{"version":3,"sources":["meteor://ðŸ’»app/packages/anti_i18n/packages/anti_i18n.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kF","file":"/packages/anti_i18n.js","sourcesContent":["(function () {\n\n///////////////////////////////////////////////////////////////////////\n//                                                                   //\n// packages/anti:i18n/i18n.js                                        //\n//                                                                   //\n///////////////////////////////////////////////////////////////////////\n                                                                     //\n/*                                                                   // 1\n  just-i18n package for Meteor.js                                    // 2\n  author: Hubert OG <hubert@orlikarnia.com>                          // 3\n*/                                                                   // 4\n                                                                     // 5\n                                                                     // 6\nvar maps            = {};                                            // 7\nvar language        = '';                                            // 8\nvar defaultLanguage = 'en';                                          // 9\nvar missingTemplate = '';                                            // 10\nvar showMissing     = false;                                         // 11\nvar dep             = new Deps.Dependency();                         // 12\n                                                                     // 13\n                                                                     // 14\n/*                                                                   // 15\n  Convert key to internationalized version                           // 16\n*/                                                                   // 17\ni18n = function() {                                                  // 18\n  dep.depend();                                                      // 19\n                                                                     // 20\n  var label;                                                         // 21\n  var args = _.toArray(arguments);                                   // 22\n                                                                     // 23\n  /* remove extra parameter added by blaze */                        // 24\n  if(typeof args[args.length-1] === 'object') {                      // 25\n    args.pop();                                                      // 26\n  }                                                                  // 27\n                                                                     // 28\n  var label = args[0];                                               // 29\n  args.shift();                                                      // 30\n                                                                     // 31\n                                                                     // 32\n  if(typeof label !== 'string') return '';                           // 33\n  var str = (maps[language] && maps[language][label]) ||             // 34\n         (maps[defaultLanguage] && maps[defaultLanguage][label]) ||  // 35\n         (showMissing && _.template(missingTemplate, {language: language, defaultLanguage: defaultLanguage, label: label})) ||\n         '';                                                         // 37\n  str = replaceWithParams(str, args)                                 // 38\n  return str;                                                        // 39\n};                                                                   // 40\n                                                                     // 41\n/*                                                                   // 42\n  Register handlebars helper                                         // 43\n*/                                                                   // 44\nif(Meteor.isClient) {                                                // 45\n  if(UI) {                                                           // 46\n    UI.registerHelper('i18n', function () {                          // 47\n      return i18n.apply(this, arguments);                            // 48\n    });                                                              // 49\n  } else if(Handlebars) {                                            // 50\n    Handlebars.registerHelper('i18n', function () {                  // 51\n      return i18n.apply(this, arguments);                            // 52\n    });                                                              // 53\n  }                                                                  // 54\n}                                                                    // 55\n                                                                     // 56\nfunction replaceWithParams(string, params) {                         // 57\n  var formatted = string;                                            // 58\n  params.forEach(function(param , index){                            // 59\n    var pos = index + 1;                                             // 60\n    formatted = formatted.replace(\"{$\" + pos + \"}\", param);          // 61\n  });                                                                // 62\n                                                                     // 63\n  return formatted;                                                  // 64\n};                                                                   // 65\n                                                                     // 66\n/*                                                                   // 67\n  Settings                                                           // 68\n*/                                                                   // 69\ni18n.setLanguage = function(lng) {                                   // 70\n  language = lng;                                                    // 71\n  dep.changed();                                                     // 72\n};                                                                   // 73\n                                                                     // 74\ni18n.setDefaultLanguage = function(lng) {                            // 75\n  defaultLanguage = lng;                                             // 76\n  dep.changed();                                                     // 77\n};                                                                   // 78\n                                                                     // 79\ni18n.getLanguage = function() {                                      // 80\n  dep.depend();                                                      // 81\n  return language;                                                   // 82\n};                                                                   // 83\n                                                                     // 84\ni18n.showMissing = function(template) {                              // 85\n  if(template) {                                                     // 86\n    if(typeof template === 'string') {                               // 87\n      missingTemplate = template;                                    // 88\n    } else {                                                         // 89\n      missingTemplate = '[<%= label %>]';                            // 90\n    }                                                                // 91\n    showMissing = true;                                              // 92\n  } else {                                                           // 93\n    missingTemplate = '';                                            // 94\n    showMissing = false;                                             // 95\n  }                                                                  // 96\n};                                                                   // 97\n                                                                     // 98\n/*                                                                   // 99\n  Register map                                                       // 100\n*/                                                                   // 101\ni18n.map = function(language, map) {                                 // 102\n  if(!maps[language]) maps[language] = {};                           // 103\n  registerMap(language, '', false, map);                             // 104\n  dep.changed();                                                     // 105\n};                                                                   // 106\n                                                                     // 107\nvar registerMap = function(language, prefix, dot, map) {             // 108\n  if(typeof map === 'string') {                                      // 109\n    maps[language][prefix] = map;                                    // 110\n  } else if(typeof map === 'object') {                               // 111\n    if(dot) prefix = prefix + '.';                                   // 112\n    _.each(map, function(value, key) {                               // 113\n      registerMap(language, prefix + key, true, value);              // 114\n    });                                                              // 115\n  }                                                                  // 116\n};                                                                   // 117\n                                                                     // 118\n                                                                     // 119\n///////////////////////////////////////////////////////////////////////\n\n}).call(this);\n"]}