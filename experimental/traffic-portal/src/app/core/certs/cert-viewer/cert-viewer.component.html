
<mat-card appearance="outlined" class="page-content">
	<tp-loading *ngIf="dsCert === undefined"></tp-loading>
	<mat-card-content *ngIf="dsCert !== undefined">
		<mat-tab-group #matTab>
			<mat-tab label="Input Certificate" *ngIf="!dsCert">
					<form ngNativeValidate (submit)="process(true)" class="tab-content">
						<mat-form-field>
							<mat-label>Certificate Chain</mat-label>
							<textarea matInput name="custom" [(ngModel)]="inputCert" cdkAutosizeMaxRows="15" cdkTextareaAutosize required></textarea>
						</mat-form-field>
						<button mat-raised-button type="submit">Submit</button>
					</form>
			</mat-tab>
			<mat-tab label="Certificate Details" [disabled]="certChain.length === 0">
				<div class="tab-content">
					<mat-form-field>
						<mat-label>Detected Order</mat-label>
						<input matInput readonly name="order" [(ngModel)]="certOrder"/>
					</mat-form-field>
					<mat-accordion>
						<mat-expansion-panel *ngFor="let c of certChain; let i = index;">
							<mat-expansion-panel-header>{{c.type}}</mat-expansion-panel-header>
							<tp-cert-detail *ngIf="!c.parseError" [cert]="c"></tp-cert-detail>
							<div *ngIf="c.parseError">Unable to parse this certificate!</div>
						</mat-expansion-panel>
					</mat-accordion>
				</div>
			</mat-tab>
			<mat-tab label="TO Cert Info" *ngIf="dsCert">
				<div class="tab-content">
					<mat-form-field>
						<mat-label>Version</mat-label>
						<input type="text" matInput name="version" [(ngModel)]="cert.version" />
					</mat-form-field>
					<mat-form-field>
						<mat-label>Common Name</mat-label>
						<input type="text" matInput name="commonName" [(ngModel)]="cert.hostname" />
					</mat-form-field>
					<mat-form-field>
						<mat-label>Expiration</mat-label>
						<input type="text" matInput name="expiration" [(ngModel)]="cert.expiration" />
					</mat-form-field>
					<mat-form-field>
						<mat-label>SANs</mat-label>
						<input type="text" matInput name="sans" [(ngModel)]="cert.sans" />
					</mat-form-field>
					<mat-form-field>
						<mat-label>Private Key</mat-label>
						<textarea matInput name="privateKey" [(ngModel)]="cert.certificate.key" cdkAutosizeMaxRows="15" cdkTextareaAutosize></textarea>
					</mat-form-field>
					<mat-form-field>
						<mat-label>Certificate Signing Request</mat-label>
						<textarea matInput name="csr" [(ngModel)]="cert.certificate.csr" cdkAutosizeMaxRows="15" cdkTextareaAutosize></textarea>
					</mat-form-field>
					<mat-form-field>
						<mat-label>Certificate</mat-label>
						<textarea matInput name="crt" [(ngModel)]="cert.certificate.crt" cdkAutosizeMaxRows="15" cdkTextareaAutosize></textarea>
					</mat-form-field>
				</div>
			</mat-tab>
		</mat-tab-group>
	</mat-card-content>
</mat-card>
