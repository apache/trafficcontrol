define(["@grafana/data","react","react-router-dom","@grafana/runtime","rxjs","lodash","@grafana/ui","@emotion/css","react-dom"],((e,t,r,n,a,o,i,s,l)=>(()=>{var u={944:(e,t,r)=>{"use strict";function n(e){var t,r,a="";if("string"==typeof e||"number"==typeof e)a+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(r=n(e[t]))&&(a&&(a+=" "),a+=r);else for(t in e)e[t]&&(a&&(a+=" "),a+=t);return a}function a(){for(var e,t,r=0,a="";r<arguments.length;)(e=arguments[r++])&&(t=n(e))&&(a&&(a+=" "),a+=t);return a}r.r(t),r.d(t,{clsx:()=>a,default:()=>o});const o=a},4:(e,t,r)=>{e=r.nmd(e);var n="__lodash_hash_undefined__",a=1,o=2,i=9007199254740991,s="[object Arguments]",l="[object Array]",u="[object AsyncFunction]",c="[object Boolean]",d="[object Date]",p="[object Error]",h="[object Function]",f="[object GeneratorFunction]",m="[object Map]",g="[object Number]",y="[object Null]",b="[object Object]",v="[object Promise]",w="[object Proxy]",S="[object RegExp]",_="[object Set]",O="[object String]",x="[object Undefined]",C="[object WeakMap]",P="[object ArrayBuffer]",D="[object DataView]",E=/^\[object .+?Constructor\]$/,R=/^(?:0|[1-9]\d*)$/,j={};j["[object Float32Array]"]=j["[object Float64Array]"]=j["[object Int8Array]"]=j["[object Int16Array]"]=j["[object Int32Array]"]=j["[object Uint8Array]"]=j["[object Uint8ClampedArray]"]=j["[object Uint16Array]"]=j["[object Uint32Array]"]=!0,j[s]=j[l]=j[P]=j[c]=j[D]=j[d]=j[p]=j[h]=j[m]=j[g]=j[b]=j[S]=j[_]=j[O]=j[C]=!1;var T="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g,k="object"==typeof self&&self&&self.Object===Object&&self,A=T||k||Function("return this")(),I=t&&!t.nodeType&&t,V=I&&e&&!e.nodeType&&e,F=V&&V.exports===I,L=F&&T.process,M=function(){try{return L&&L.binding&&L.binding("util")}catch(e){}}(),z=M&&M.isTypedArray;function N(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}function H(e){var t=-1,r=Array(e.size);return e.forEach((function(e,n){r[++t]=[n,e]})),r}function B(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=e})),r}var U,$,W,q=Array.prototype,G=Function.prototype,Q=Object.prototype,Y=A["__core-js_shared__"],K=G.toString,X=Q.hasOwnProperty,Z=(U=/[^.]+$/.exec(Y&&Y.keys&&Y.keys.IE_PROTO||""))?"Symbol(src)_1."+U:"",J=Q.toString,ee=RegExp("^"+K.call(X).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),te=F?A.Buffer:void 0,re=A.Symbol,ne=A.Uint8Array,ae=Q.propertyIsEnumerable,oe=q.splice,ie=re?re.toStringTag:void 0,se=Object.getOwnPropertySymbols,le=te?te.isBuffer:void 0,ue=($=Object.keys,W=Object,function(e){return $(W(e))}),ce=Ve(A,"DataView"),de=Ve(A,"Map"),pe=Ve(A,"Promise"),he=Ve(A,"Set"),fe=Ve(A,"WeakMap"),me=Ve(Object,"create"),ge=ze(ce),ye=ze(de),be=ze(pe),ve=ze(he),we=ze(fe),Se=re?re.prototype:void 0,_e=Se?Se.valueOf:void 0;function Oe(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function xe(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Ce(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Pe(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new Ce;++t<r;)this.add(e[t])}function De(e){var t=this.__data__=new xe(e);this.size=t.size}function Ee(e,t){for(var r=e.length;r--;)if(Ne(e[r][0],t))return r;return-1}function Re(e){return null==e?void 0===e?x:y:ie&&ie in Object(e)?function(e){var t=X.call(e,ie),r=e[ie];try{e[ie]=void 0;var n=!0}catch(e){}var a=J.call(e);return n&&(t?e[ie]=r:delete e[ie]),a}(e):function(e){return J.call(e)}(e)}function je(e){return Ge(e)&&Re(e)==s}function Te(e,t,r,n,i){return e===t||(null==e||null==t||!Ge(e)&&!Ge(t)?e!=e&&t!=t:function(e,t,r,n,i,u){var h=Be(e),f=Be(t),y=h?l:Le(e),v=f?l:Le(t),w=(y=y==s?b:y)==b,x=(v=v==s?b:v)==b,C=y==v;if(C&&Ue(e)){if(!Ue(t))return!1;h=!0,w=!1}if(C&&!w)return u||(u=new De),h||Qe(e)?ke(e,t,r,n,i,u):function(e,t,r,n,i,s,l){switch(r){case D:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case P:return!(e.byteLength!=t.byteLength||!s(new ne(e),new ne(t)));case c:case d:case g:return Ne(+e,+t);case p:return e.name==t.name&&e.message==t.message;case S:case O:return e==t+"";case m:var u=H;case _:var h=n&a;if(u||(u=B),e.size!=t.size&&!h)return!1;var f=l.get(e);if(f)return f==t;n|=o,l.set(e,t);var y=ke(u(e),u(t),n,i,s,l);return l.delete(e),y;case"[object Symbol]":if(_e)return _e.call(e)==_e.call(t)}return!1}(e,t,y,r,n,i,u);if(!(r&a)){var E=w&&X.call(e,"__wrapped__"),R=x&&X.call(t,"__wrapped__");if(E||R){var j=E?e.value():e,T=R?t.value():t;return u||(u=new De),i(j,T,r,n,u)}}return!!C&&(u||(u=new De),function(e,t,r,n,o,i){var s=r&a,l=Ae(e),u=l.length;if(u!=Ae(t).length&&!s)return!1;for(var c=u;c--;){var d=l[c];if(!(s?d in t:X.call(t,d)))return!1}var p=i.get(e);if(p&&i.get(t))return p==t;var h=!0;i.set(e,t),i.set(t,e);for(var f=s;++c<u;){var m=e[d=l[c]],g=t[d];if(n)var y=s?n(g,m,d,t,e,i):n(m,g,d,e,t,i);if(!(void 0===y?m===g||o(m,g,r,n,i):y)){h=!1;break}f||(f="constructor"==d)}if(h&&!f){var b=e.constructor,v=t.constructor;b==v||!("constructor"in e)||!("constructor"in t)||"function"==typeof b&&b instanceof b&&"function"==typeof v&&v instanceof v||(h=!1)}return i.delete(e),i.delete(t),h}(e,t,r,n,i,u))}(e,t,r,n,Te,i))}function ke(e,t,r,n,i,s){var l=r&a,u=e.length,c=t.length;if(u!=c&&!(l&&c>u))return!1;var d=s.get(e);if(d&&s.get(t))return d==t;var p=-1,h=!0,f=r&o?new Pe:void 0;for(s.set(e,t),s.set(t,e);++p<u;){var m=e[p],g=t[p];if(n)var y=l?n(g,m,p,t,e,s):n(m,g,p,e,t,s);if(void 0!==y){if(y)continue;h=!1;break}if(f){if(!N(t,(function(e,t){if(a=t,!f.has(a)&&(m===e||i(m,e,r,n,s)))return f.push(t);var a}))){h=!1;break}}else if(m!==g&&!i(m,g,r,n,s)){h=!1;break}}return s.delete(e),s.delete(t),h}function Ae(e){return function(e,t,r){var n=t(e);return Be(e)?n:function(e,t){for(var r=-1,n=t.length,a=e.length;++r<n;)e[a+r]=t[r];return e}(n,r(e))}(e,Ye,Fe)}function Ie(e,t){var r,n,a=e.__data__;return("string"==(n=typeof(r=t))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?a["string"==typeof t?"string":"hash"]:a.map}function Ve(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return function(e){return!(!qe(e)||function(e){return!!Z&&Z in e}(e))&&($e(e)?ee:E).test(ze(e))}(r)?r:void 0}Oe.prototype.clear=function(){this.__data__=me?me(null):{},this.size=0},Oe.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Oe.prototype.get=function(e){var t=this.__data__;if(me){var r=t[e];return r===n?void 0:r}return X.call(t,e)?t[e]:void 0},Oe.prototype.has=function(e){var t=this.__data__;return me?void 0!==t[e]:X.call(t,e)},Oe.prototype.set=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=me&&void 0===t?n:t,this},xe.prototype.clear=function(){this.__data__=[],this.size=0},xe.prototype.delete=function(e){var t=this.__data__,r=Ee(t,e);return!(r<0||(r==t.length-1?t.pop():oe.call(t,r,1),--this.size,0))},xe.prototype.get=function(e){var t=this.__data__,r=Ee(t,e);return r<0?void 0:t[r][1]},xe.prototype.has=function(e){return Ee(this.__data__,e)>-1},xe.prototype.set=function(e,t){var r=this.__data__,n=Ee(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this},Ce.prototype.clear=function(){this.size=0,this.__data__={hash:new Oe,map:new(de||xe),string:new Oe}},Ce.prototype.delete=function(e){var t=Ie(this,e).delete(e);return this.size-=t?1:0,t},Ce.prototype.get=function(e){return Ie(this,e).get(e)},Ce.prototype.has=function(e){return Ie(this,e).has(e)},Ce.prototype.set=function(e,t){var r=Ie(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this},Pe.prototype.add=Pe.prototype.push=function(e){return this.__data__.set(e,n),this},Pe.prototype.has=function(e){return this.__data__.has(e)},De.prototype.clear=function(){this.__data__=new xe,this.size=0},De.prototype.delete=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},De.prototype.get=function(e){return this.__data__.get(e)},De.prototype.has=function(e){return this.__data__.has(e)},De.prototype.set=function(e,t){var r=this.__data__;if(r instanceof xe){var n=r.__data__;if(!de||n.length<199)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new Ce(n)}return r.set(e,t),this.size=r.size,this};var Fe=se?function(e){return null==e?[]:(e=Object(e),function(t,r){for(var n=-1,a=null==t?0:t.length,o=0,i=[];++n<a;){var s=t[n];l=s,ae.call(e,l)&&(i[o++]=s)}var l;return i}(se(e)))}:function(){return[]},Le=Re;function Me(e,t){return!!(t=null==t?i:t)&&("number"==typeof e||R.test(e))&&e>-1&&e%1==0&&e<t}function ze(e){if(null!=e){try{return K.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Ne(e,t){return e===t||e!=e&&t!=t}(ce&&Le(new ce(new ArrayBuffer(1)))!=D||de&&Le(new de)!=m||pe&&Le(pe.resolve())!=v||he&&Le(new he)!=_||fe&&Le(new fe)!=C)&&(Le=function(e){var t=Re(e),r=t==b?e.constructor:void 0,n=r?ze(r):"";if(n)switch(n){case ge:return D;case ye:return m;case be:return v;case ve:return _;case we:return C}return t});var He=je(function(){return arguments}())?je:function(e){return Ge(e)&&X.call(e,"callee")&&!ae.call(e,"callee")},Be=Array.isArray,Ue=le||function(){return!1};function $e(e){if(!qe(e))return!1;var t=Re(e);return t==h||t==f||t==u||t==w}function We(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=i}function qe(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Ge(e){return null!=e&&"object"==typeof e}var Qe=z?function(e){return function(t){return e(t)}}(z):function(e){return Ge(e)&&We(e.length)&&!!j[Re(e)]};function Ye(e){return null!=(t=e)&&We(t.length)&&!$e(t)?function(e,t){var r=Be(e),n=!r&&He(e),a=!r&&!n&&Ue(e),o=!r&&!n&&!a&&Qe(e),i=r||n||a||o,s=i?function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}(e.length,String):[],l=s.length;for(var u in e)!t&&!X.call(e,u)||i&&("length"==u||a&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||Me(u,l))||s.push(u);return s}(e):function(e){if(r=(t=e)&&t.constructor,t!==("function"==typeof r&&r.prototype||Q))return ue(e);var t,r,n=[];for(var a in Object(e))X.call(e,a)&&"constructor"!=a&&n.push(a);return n}(e);var t}e.exports=function(e,t){return Te(e,t)}},772:(e,t,r)=>{"use strict";var n=r(331);function a(){}function o(){}o.resetWarningCache=a,e.exports=function(){function e(e,t,r,a,o,i){if(i!==n){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:a};return r.PropTypes=r,r}},615:(e,t,r)=>{e.exports=r(772)()},331:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},322:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"DraggableCore",{enumerable:!0,get:function(){return c.default}}),t.default=void 0;var n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=h(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=a?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}return n.default=e,r&&r.set(e,n),n}(r(650)),a=p(r(615)),o=p(r(729)),i=p(r(944)),s=r(65),l=r(237),u=r(972),c=p(r(700)),d=p(r(936));function p(e){return e&&e.__esModule?e:{default:e}}function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(h=function(e){return e?r:t})(e)}function f(){return f=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},f.apply(this,arguments)}function m(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class g extends n.Component{static getDerivedStateFromProps(e,t){let{position:r}=e,{prevPropsPosition:n}=t;return!r||n&&r.x===n.x&&r.y===n.y?null:((0,d.default)("Draggable: getDerivedStateFromProps %j",{position:r,prevPropsPosition:n}),{x:r.x,y:r.y,prevPropsPosition:{...r}})}constructor(e){super(e),m(this,"onDragStart",((e,t)=>{if((0,d.default)("Draggable: onDragStart: %j",t),!1===this.props.onStart(e,(0,l.createDraggableData)(this,t)))return!1;this.setState({dragging:!0,dragged:!0})})),m(this,"onDrag",((e,t)=>{if(!this.state.dragging)return!1;(0,d.default)("Draggable: onDrag: %j",t);const r=(0,l.createDraggableData)(this,t),n={x:r.x,y:r.y,slackX:0,slackY:0};if(this.props.bounds){const{x:e,y:t}=n;n.x+=this.state.slackX,n.y+=this.state.slackY;const[a,o]=(0,l.getBoundPosition)(this,n.x,n.y);n.x=a,n.y=o,n.slackX=this.state.slackX+(e-n.x),n.slackY=this.state.slackY+(t-n.y),r.x=n.x,r.y=n.y,r.deltaX=n.x-this.state.x,r.deltaY=n.y-this.state.y}if(!1===this.props.onDrag(e,r))return!1;this.setState(n)})),m(this,"onDragStop",((e,t)=>{if(!this.state.dragging)return!1;if(!1===this.props.onStop(e,(0,l.createDraggableData)(this,t)))return!1;(0,d.default)("Draggable: onDragStop: %j",t);const r={dragging:!1,slackX:0,slackY:0};if(Boolean(this.props.position)){const{x:e,y:t}=this.props.position;r.x=e,r.y=t}this.setState(r)})),this.state={dragging:!1,dragged:!1,x:e.position?e.position.x:e.defaultPosition.x,y:e.position?e.position.y:e.defaultPosition.y,prevPropsPosition:{...e.position},slackX:0,slackY:0,isElementSVG:!1},!e.position||e.onDrag||e.onStop||console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.")}componentDidMount(){void 0!==window.SVGElement&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}componentWillUnmount(){this.setState({dragging:!1})}findDOMNode(){var e,t;return null!==(e=null===(t=this.props)||void 0===t||null===(t=t.nodeRef)||void 0===t?void 0:t.current)&&void 0!==e?e:o.default.findDOMNode(this)}render(){const{axis:e,bounds:t,children:r,defaultPosition:a,defaultClassName:o,defaultClassNameDragging:u,defaultClassNameDragged:d,position:p,positionOffset:h,scale:m,...g}=this.props;let y={},b=null;const v=!Boolean(p)||this.state.dragging,w=p||a,S={x:(0,l.canDragX)(this)&&v?this.state.x:w.x,y:(0,l.canDragY)(this)&&v?this.state.y:w.y};this.state.isElementSVG?b=(0,s.createSVGTransform)(S,h):y=(0,s.createCSSTransform)(S,h);const _=(0,i.default)(r.props.className||"",o,{[u]:this.state.dragging,[d]:this.state.dragged});return n.createElement(c.default,f({},g,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),n.cloneElement(n.Children.only(r),{className:_,style:{...r.props.style,...y},transform:b}))}}t.default=g,m(g,"displayName","Draggable"),m(g,"propTypes",{...c.default.propTypes,axis:a.default.oneOf(["both","x","y","none"]),bounds:a.default.oneOfType([a.default.shape({left:a.default.number,right:a.default.number,top:a.default.number,bottom:a.default.number}),a.default.string,a.default.oneOf([!1])]),defaultClassName:a.default.string,defaultClassNameDragging:a.default.string,defaultClassNameDragged:a.default.string,defaultPosition:a.default.shape({x:a.default.number,y:a.default.number}),positionOffset:a.default.shape({x:a.default.oneOfType([a.default.number,a.default.string]),y:a.default.oneOfType([a.default.number,a.default.string])}),position:a.default.shape({x:a.default.number,y:a.default.number}),className:u.dontSetMe,style:u.dontSetMe,transform:u.dontSetMe}),m(g,"defaultProps",{...c.default.defaultProps,axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1})},700:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=d(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=a?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}return n.default=e,r&&r.set(e,n),n}(r(650)),a=c(r(615)),o=c(r(729)),i=r(65),s=r(237),l=r(972),u=c(r(936));function c(e){return e&&e.__esModule?e:{default:e}}function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(d=function(e){return e?r:t})(e)}function p(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const h={start:"touchstart",move:"touchmove",stop:"touchend"},f={start:"mousedown",move:"mousemove",stop:"mouseup"};let m=f;class g extends n.Component{constructor(){super(...arguments),p(this,"dragging",!1),p(this,"lastX",NaN),p(this,"lastY",NaN),p(this,"touchIdentifier",null),p(this,"mounted",!1),p(this,"handleDragStart",(e=>{if(this.props.onMouseDown(e),!this.props.allowAnyClick&&"number"==typeof e.button&&0!==e.button)return!1;const t=this.findDOMNode();if(!t||!t.ownerDocument||!t.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");const{ownerDocument:r}=t;if(this.props.disabled||!(e.target instanceof r.defaultView.Node)||this.props.handle&&!(0,i.matchesSelectorAndParentsTo)(e.target,this.props.handle,t)||this.props.cancel&&(0,i.matchesSelectorAndParentsTo)(e.target,this.props.cancel,t))return;"touchstart"===e.type&&e.preventDefault();const n=(0,i.getTouchIdentifier)(e);this.touchIdentifier=n;const a=(0,s.getControlPosition)(e,n,this);if(null==a)return;const{x:o,y:l}=a,c=(0,s.createCoreData)(this,o,l);(0,u.default)("DraggableCore: handleDragStart: %j",c),(0,u.default)("calling",this.props.onStart),!1!==this.props.onStart(e,c)&&!1!==this.mounted&&(this.props.enableUserSelectHack&&(0,i.addUserSelectStyles)(r),this.dragging=!0,this.lastX=o,this.lastY=l,(0,i.addEvent)(r,m.move,this.handleDrag),(0,i.addEvent)(r,m.stop,this.handleDragStop))})),p(this,"handleDrag",(e=>{const t=(0,s.getControlPosition)(e,this.touchIdentifier,this);if(null==t)return;let{x:r,y:n}=t;if(Array.isArray(this.props.grid)){let e=r-this.lastX,t=n-this.lastY;if([e,t]=(0,s.snapToGrid)(this.props.grid,e,t),!e&&!t)return;r=this.lastX+e,n=this.lastY+t}const a=(0,s.createCoreData)(this,r,n);if((0,u.default)("DraggableCore: handleDrag: %j",a),!1!==this.props.onDrag(e,a)&&!1!==this.mounted)this.lastX=r,this.lastY=n;else try{this.handleDragStop(new MouseEvent("mouseup"))}catch(e){const t=document.createEvent("MouseEvents");t.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(t)}})),p(this,"handleDragStop",(e=>{if(!this.dragging)return;const t=(0,s.getControlPosition)(e,this.touchIdentifier,this);if(null==t)return;let{x:r,y:n}=t;if(Array.isArray(this.props.grid)){let e=r-this.lastX||0,t=n-this.lastY||0;[e,t]=(0,s.snapToGrid)(this.props.grid,e,t),r=this.lastX+e,n=this.lastY+t}const a=(0,s.createCoreData)(this,r,n);if(!1===this.props.onStop(e,a)||!1===this.mounted)return!1;const o=this.findDOMNode();o&&this.props.enableUserSelectHack&&(0,i.removeUserSelectStyles)(o.ownerDocument),(0,u.default)("DraggableCore: handleDragStop: %j",a),this.dragging=!1,this.lastX=NaN,this.lastY=NaN,o&&((0,u.default)("DraggableCore: Removing handlers"),(0,i.removeEvent)(o.ownerDocument,m.move,this.handleDrag),(0,i.removeEvent)(o.ownerDocument,m.stop,this.handleDragStop))})),p(this,"onMouseDown",(e=>(m=f,this.handleDragStart(e)))),p(this,"onMouseUp",(e=>(m=f,this.handleDragStop(e)))),p(this,"onTouchStart",(e=>(m=h,this.handleDragStart(e)))),p(this,"onTouchEnd",(e=>(m=h,this.handleDragStop(e))))}componentDidMount(){this.mounted=!0;const e=this.findDOMNode();e&&(0,i.addEvent)(e,h.start,this.onTouchStart,{passive:!1})}componentWillUnmount(){this.mounted=!1;const e=this.findDOMNode();if(e){const{ownerDocument:t}=e;(0,i.removeEvent)(t,f.move,this.handleDrag),(0,i.removeEvent)(t,h.move,this.handleDrag),(0,i.removeEvent)(t,f.stop,this.handleDragStop),(0,i.removeEvent)(t,h.stop,this.handleDragStop),(0,i.removeEvent)(e,h.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,i.removeUserSelectStyles)(t)}}findDOMNode(){var e,t;return null!==(e=this.props)&&void 0!==e&&e.nodeRef?null===(t=this.props)||void 0===t||null===(t=t.nodeRef)||void 0===t?void 0:t.current:o.default.findDOMNode(this)}render(){return n.cloneElement(n.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}}t.default=g,p(g,"displayName","DraggableCore"),p(g,"propTypes",{allowAnyClick:a.default.bool,children:a.default.node.isRequired,disabled:a.default.bool,enableUserSelectHack:a.default.bool,offsetParent:function(e,t){if(e[t]&&1!==e[t].nodeType)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:a.default.arrayOf(a.default.number),handle:a.default.string,cancel:a.default.string,nodeRef:a.default.object,onStart:a.default.func,onDrag:a.default.func,onStop:a.default.func,onMouseDown:a.default.func,scale:a.default.number,className:l.dontSetMe,style:l.dontSetMe,transform:l.dontSetMe}),p(g,"defaultProps",{allowAnyClick:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1})},529:(e,t,r)=>{"use strict";const{default:n,DraggableCore:a}=r(322);e.exports=n,e.exports.default=n,e.exports.DraggableCore=a},65:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addClassName=u,t.addEvent=function(e,t,r,n){if(!e)return;const a={capture:!0,...n};e.addEventListener?e.addEventListener(t,r,a):e.attachEvent?e.attachEvent("on"+t,r):e["on"+t]=r},t.addUserSelectStyles=function(e){if(!e)return;let t=e.getElementById("react-draggable-style-el");t||(t=e.createElement("style"),t.type="text/css",t.id="react-draggable-style-el",t.innerHTML=".react-draggable-transparent-selection *::-moz-selection {all: inherit;}\n",t.innerHTML+=".react-draggable-transparent-selection *::selection {all: inherit;}\n",e.getElementsByTagName("head")[0].appendChild(t)),e.body&&u(e.body,"react-draggable-transparent-selection")},t.createCSSTransform=function(e,t){const r=l(e,t,"px");return{[(0,a.browserPrefixToKey)("transform",a.default)]:r}},t.createSVGTransform=function(e,t){return l(e,t,"")},t.getTouch=function(e,t){return e.targetTouches&&(0,n.findInArray)(e.targetTouches,(e=>t===e.identifier))||e.changedTouches&&(0,n.findInArray)(e.changedTouches,(e=>t===e.identifier))},t.getTouchIdentifier=function(e){return e.targetTouches&&e.targetTouches[0]?e.targetTouches[0].identifier:e.changedTouches&&e.changedTouches[0]?e.changedTouches[0].identifier:void 0},t.getTranslation=l,t.innerHeight=function(e){let t=e.clientHeight;const r=e.ownerDocument.defaultView.getComputedStyle(e);return t-=(0,n.int)(r.paddingTop),t-=(0,n.int)(r.paddingBottom),t},t.innerWidth=function(e){let t=e.clientWidth;const r=e.ownerDocument.defaultView.getComputedStyle(e);return t-=(0,n.int)(r.paddingLeft),t-=(0,n.int)(r.paddingRight),t},t.matchesSelector=s,t.matchesSelectorAndParentsTo=function(e,t,r){let n=e;do{if(s(n,t))return!0;if(n===r)return!1;n=n.parentNode}while(n);return!1},t.offsetXYFromParent=function(e,t,r){const n=t===t.ownerDocument.body?{left:0,top:0}:t.getBoundingClientRect();return{x:(e.clientX+t.scrollLeft-n.left)/r,y:(e.clientY+t.scrollTop-n.top)/r}},t.outerHeight=function(e){let t=e.clientHeight;const r=e.ownerDocument.defaultView.getComputedStyle(e);return t+=(0,n.int)(r.borderTopWidth),t+=(0,n.int)(r.borderBottomWidth),t},t.outerWidth=function(e){let t=e.clientWidth;const r=e.ownerDocument.defaultView.getComputedStyle(e);return t+=(0,n.int)(r.borderLeftWidth),t+=(0,n.int)(r.borderRightWidth),t},t.removeClassName=c,t.removeEvent=function(e,t,r,n){if(!e)return;const a={capture:!0,...n};e.removeEventListener?e.removeEventListener(t,r,a):e.detachEvent?e.detachEvent("on"+t,r):e["on"+t]=null},t.removeUserSelectStyles=function(e){if(e)try{if(e.body&&c(e.body,"react-draggable-transparent-selection"),e.selection)e.selection.empty();else{const t=(e.defaultView||window).getSelection();t&&"Caret"!==t.type&&t.removeAllRanges()}}catch(e){}};var n=r(972),a=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=a?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(r(249));function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}let i="";function s(e,t){return i||(i=(0,n.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],(function(t){return(0,n.isFunction)(e[t])}))),!!(0,n.isFunction)(e[i])&&e[i](t)}function l(e,t,r){let{x:n,y:a}=e,o="translate(".concat(n).concat(r,",").concat(a).concat(r,")");if(t){const e="".concat("string"==typeof t.x?t.x:t.x+r),n="".concat("string"==typeof t.y?t.y:t.y+r);o="translate(".concat(e,", ").concat(n,")")+o}return o}function u(e,t){e.classList?e.classList.add(t):e.className.match(new RegExp("(?:^|\\s)".concat(t,"(?!\\S)")))||(e.className+=" ".concat(t))}function c(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(?:^|\\s)".concat(t,"(?!\\S)"),"g"),"")}},249:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.browserPrefixToKey=a,t.browserPrefixToStyle=function(e,t){return t?"-".concat(t.toLowerCase(),"-").concat(e):e},t.default=void 0,t.getPrefix=n;const r=["Moz","Webkit","O","ms"];function n(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"transform";if("undefined"==typeof window)return"";const n=null===(e=window.document)||void 0===e||null===(e=e.documentElement)||void 0===e?void 0:e.style;if(!n)return"";if(t in n)return"";for(let e=0;e<r.length;e++)if(a(t,r[e])in n)return r[e];return""}function a(e,t){return t?"".concat(t).concat(function(e){let t="",r=!0;for(let n=0;n<e.length;n++)r?(t+=e[n].toUpperCase(),r=!1):"-"===e[n]?r=!0:t+=e[n];return t}(e)):e}t.default=n()},936:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){}},237:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.canDragX=function(e){return"both"===e.props.axis||"x"===e.props.axis},t.canDragY=function(e){return"both"===e.props.axis||"y"===e.props.axis},t.createCoreData=function(e,t,r){const a=!(0,n.isNum)(e.lastX),i=o(e);return a?{node:i,deltaX:0,deltaY:0,lastX:t,lastY:r,x:t,y:r}:{node:i,deltaX:t-e.lastX,deltaY:r-e.lastY,lastX:e.lastX,lastY:e.lastY,x:t,y:r}},t.createDraggableData=function(e,t){const r=e.props.scale;return{node:t.node,x:e.state.x+t.deltaX/r,y:e.state.y+t.deltaY/r,deltaX:t.deltaX/r,deltaY:t.deltaY/r,lastX:e.state.x,lastY:e.state.y}},t.getBoundPosition=function(e,t,r){if(!e.props.bounds)return[t,r];let{bounds:i}=e.props;i="string"==typeof i?i:function(e){return{left:e.left,top:e.top,right:e.right,bottom:e.bottom}}(i);const s=o(e);if("string"==typeof i){const{ownerDocument:e}=s,t=e.defaultView;let r;if(r="parent"===i?s.parentNode:e.querySelector(i),!(r instanceof t.HTMLElement))throw new Error('Bounds selector "'+i+'" could not find an element.');const o=r,l=t.getComputedStyle(s),u=t.getComputedStyle(o);i={left:-s.offsetLeft+(0,n.int)(u.paddingLeft)+(0,n.int)(l.marginLeft),top:-s.offsetTop+(0,n.int)(u.paddingTop)+(0,n.int)(l.marginTop),right:(0,a.innerWidth)(o)-(0,a.outerWidth)(s)-s.offsetLeft+(0,n.int)(u.paddingRight)-(0,n.int)(l.marginRight),bottom:(0,a.innerHeight)(o)-(0,a.outerHeight)(s)-s.offsetTop+(0,n.int)(u.paddingBottom)-(0,n.int)(l.marginBottom)}}return(0,n.isNum)(i.right)&&(t=Math.min(t,i.right)),(0,n.isNum)(i.bottom)&&(r=Math.min(r,i.bottom)),(0,n.isNum)(i.left)&&(t=Math.max(t,i.left)),(0,n.isNum)(i.top)&&(r=Math.max(r,i.top)),[t,r]},t.getControlPosition=function(e,t,r){const n="number"==typeof t?(0,a.getTouch)(e,t):null;if("number"==typeof t&&!n)return null;const i=o(r),s=r.props.offsetParent||i.offsetParent||i.ownerDocument.body;return(0,a.offsetXYFromParent)(n||e,s,r.props.scale)},t.snapToGrid=function(e,t,r){return[Math.round(t/e[0])*e[0],Math.round(r/e[1])*e[1]]};var n=r(972),a=r(65);function o(e){const t=e.findDOMNode();if(!t)throw new Error("<DraggableCore>: Unmounted during event!");return t}},972:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dontSetMe=function(e,t,r){if(e[t])return new Error("Invalid prop ".concat(t," passed to ").concat(r," - do not set this, set it on the child."))},t.findInArray=function(e,t){for(let r=0,n=e.length;r<n;r++)if(t.apply(t,[e[r],r,e]))return e[r]},t.int=function(e){return parseInt(e,10)},t.isFunction=function(e){return"function"==typeof e||"[object Function]"===Object.prototype.toString.call(e)},t.isNum=function(e){return"number"==typeof e&&!isNaN(e)}},275:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=p(r(650)),o=p(r(615)),i=r(529),s=r(26),l=r(728),u=r(284),c=r(288),d=p(r(944));function p(e){return e&&e.__esModule?e:{default:e}}function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){v(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function m(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function g(e,t){return g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},g(e,t)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e){return b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},b(e)}function v(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}(h,e);var t,r,o,c,p=(o=h,c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=b(o);if(c){var r=b(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return y(e)}(this,e)});function h(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,h);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return v(y(e=p.call.apply(p,[this].concat(r))),"state",{resizing:null,dragging:null,className:""}),v(y(e),"elementRef",a.default.createRef()),v(y(e),"onDragStart",(function(t,r){var n=r.node,a=e.props,o=a.onDragStart,i=a.transformScale;if(o){var s={top:0,left:0},l=n.offsetParent;if(l){var c=l.getBoundingClientRect(),d=n.getBoundingClientRect(),p=d.left/i,h=c.left/i,f=d.top/i,m=c.top/i;s.left=p-h+l.scrollLeft,s.top=f-m+l.scrollTop,e.setState({dragging:s});var g=(0,u.calcXY)(e.getPositionParams(),s.top,s.left,e.props.w,e.props.h),b=g.x,v=g.y;return o.call(y(e),e.props.i,b,v,{e:t,node:n,newPosition:s})}}})),v(y(e),"onDrag",(function(t,r){var n=r.node,a=r.deltaX,o=r.deltaY,i=e.props.onDrag;if(i){if(!e.state.dragging)throw new Error("onDrag called before onDragStart.");var s=e.state.dragging.top+o,l=e.state.dragging.left+a,c=e.props,d=c.isBounded,p=c.i,h=c.w,f=c.h,m=c.containerWidth,g=e.getPositionParams();if(d){var b=n.offsetParent;if(b){var v=e.props,w=v.margin,S=v.rowHeight,_=b.clientHeight-(0,u.calcGridItemWHPx)(f,S,w[1]);s=(0,u.clamp)(s,0,_);var O=(0,u.calcGridColWidth)(g),x=m-(0,u.calcGridItemWHPx)(h,O,w[0]);l=(0,u.clamp)(l,0,x)}}var C={top:s,left:l};e.setState({dragging:C});var P=(0,u.calcXY)(g,s,l,h,f),D=P.x,E=P.y;return i.call(y(e),p,D,E,{e:t,node:n,newPosition:C})}})),v(y(e),"onDragStop",(function(t,r){var n=r.node,a=e.props.onDragStop;if(a){if(!e.state.dragging)throw new Error("onDragEnd called before onDragStart.");var o=e.props,i=o.w,s=o.h,l=o.i,c=e.state.dragging,d=c.left,p=c.top,h={top:p,left:d};e.setState({dragging:null});var f=(0,u.calcXY)(e.getPositionParams(),p,d,i,s),m=f.x,g=f.y;return a.call(y(e),l,m,g,{e:t,node:n,newPosition:h})}})),v(y(e),"onResizeStop",(function(t,r){e.onResizeHandler(t,r,"onResizeStop")})),v(y(e),"onResizeStart",(function(t,r){e.onResizeHandler(t,r,"onResizeStart")})),v(y(e),"onResize",(function(t,r){e.onResizeHandler(t,r,"onResize")})),e}return t=h,r=[{key:"shouldComponentUpdate",value:function(e,t){if(this.props.children!==e.children)return!0;if(this.props.droppingPosition!==e.droppingPosition)return!0;var r=(0,u.calcGridItemPosition)(this.getPositionParams(this.props),this.props.x,this.props.y,this.props.w,this.props.h,this.state),n=(0,u.calcGridItemPosition)(this.getPositionParams(e),e.x,e.y,e.w,e.h,t);return!(0,l.fastPositionEqual)(r,n)||this.props.useCSSTransforms!==e.useCSSTransforms}},{key:"componentDidMount",value:function(){this.moveDroppingItem({})}},{key:"componentDidUpdate",value:function(e){this.moveDroppingItem(e)}},{key:"moveDroppingItem",value:function(e){var t=this.props.droppingPosition;if(t){var r=this.elementRef.current;if(r){var n=e.droppingPosition||{left:0,top:0},a=this.state.dragging,o=a&&t.left!==n.left||t.top!==n.top;if(a){if(o){var i=t.left-a.left,s=t.top-a.top;this.onDrag(t.e,{node:r,deltaX:i,deltaY:s})}}else this.onDragStart(t.e,{node:r,deltaX:t.left,deltaY:t.top})}}}},{key:"getPositionParams",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;return{cols:e.cols,containerPadding:e.containerPadding,containerWidth:e.containerWidth,margin:e.margin,maxRows:e.maxRows,rowHeight:e.rowHeight}}},{key:"createStyle",value:function(e){var t,r=this.props,n=r.usePercentages,a=r.containerWidth;return r.useCSSTransforms?t=(0,l.setTransform)(e):(t=(0,l.setTopLeft)(e),n&&(t.left=(0,l.perc)(e.left/a),t.width=(0,l.perc)(e.width/a))),t}},{key:"mixinDraggable",value:function(e,t){return a.default.createElement(i.DraggableCore,{disabled:!t,onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop,handle:this.props.handle,cancel:".react-resizable-handle"+(this.props.cancel?","+this.props.cancel:""),scale:this.props.transformScale,nodeRef:this.elementRef},e)}},{key:"mixinResizable",value:function(e,t,r){var n=this.props,o=n.cols,i=n.x,l=n.minW,c=n.minH,d=n.maxW,p=n.maxH,h=n.transformScale,f=n.resizeHandles,m=n.resizeHandle,g=this.getPositionParams(),y=(0,u.calcGridItemPosition)(g,0,0,o-i,0).width,b=(0,u.calcGridItemPosition)(g,0,0,l,c),v=(0,u.calcGridItemPosition)(g,0,0,d,p),w=[b.width,b.height],S=[Math.min(v.width,y),Math.min(v.height,1/0)];return a.default.createElement(s.Resizable,{draggableOpts:{disabled:!r},className:r?void 0:"react-resizable-hide",width:t.width,height:t.height,minConstraints:w,maxConstraints:S,onResizeStop:this.onResizeStop,onResizeStart:this.onResizeStart,onResize:this.onResize,transformScale:h,resizeHandles:f,handle:m},e)}},{key:"onResizeHandler",value:function(e,t,r){var n=t.node,a=t.size,o=this.props[r];if(o){var i=this.props,s=i.cols,l=i.x,c=i.y,d=i.i,p=i.maxH,h=i.minH,f=this.props,m=f.minW,g=f.maxW,y=(0,u.calcWH)(this.getPositionParams(),a.width,a.height,l,c),b=y.w,v=y.h;m=Math.max(m,1),g=Math.min(g,s-l),b=(0,u.clamp)(b,m,g),v=(0,u.clamp)(v,h,p),this.setState({resizing:"onResizeStop"===r?null:a}),o.call(this,d,b,v,{e,node:n,size:a})}}},{key:"render",value:function(){var e=this.props,t=e.x,r=e.y,n=e.w,o=e.h,i=e.isDraggable,s=e.isResizable,l=e.droppingPosition,c=e.useCSSTransforms,p=(0,u.calcGridItemPosition)(this.getPositionParams(),t,r,n,o,this.state),h=a.default.Children.only(this.props.children),m=a.default.cloneElement(h,{ref:this.elementRef,className:(0,d.default)("react-grid-item",h.props.className,this.props.className,{static:this.props.static,resizing:Boolean(this.state.resizing),"react-draggable":i,"react-draggable-dragging":Boolean(this.state.dragging),dropping:Boolean(l),cssTransforms:c}),style:f(f(f({},this.props.style),h.props.style),this.createStyle(p))});return m=this.mixinResizable(m,p,s),this.mixinDraggable(m,i)}}],r&&m(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),h}(a.default.Component);t.default=w,v(w,"propTypes",{children:o.default.element,cols:o.default.number.isRequired,containerWidth:o.default.number.isRequired,rowHeight:o.default.number.isRequired,margin:o.default.array.isRequired,maxRows:o.default.number.isRequired,containerPadding:o.default.array.isRequired,x:o.default.number.isRequired,y:o.default.number.isRequired,w:o.default.number.isRequired,h:o.default.number.isRequired,minW:function(e,t){var r=e[t];return"number"!=typeof r?new Error("minWidth not Number"):r>e.w||r>e.maxW?new Error("minWidth larger than item width/maxWidth"):void 0},maxW:function(e,t){var r=e[t];return"number"!=typeof r?new Error("maxWidth not Number"):r<e.w||r<e.minW?new Error("maxWidth smaller than item width/minWidth"):void 0},minH:function(e,t){var r=e[t];return"number"!=typeof r?new Error("minHeight not Number"):r>e.h||r>e.maxH?new Error("minHeight larger than item height/maxHeight"):void 0},maxH:function(e,t){var r=e[t];return"number"!=typeof r?new Error("maxHeight not Number"):r<e.h||r<e.minH?new Error("maxHeight smaller than item height/minHeight"):void 0},i:o.default.string.isRequired,resizeHandles:c.resizeHandleAxesType,resizeHandle:c.resizeHandleType,onDragStop:o.default.func,onDragStart:o.default.func,onDrag:o.default.func,onResizeStop:o.default.func,onResizeStart:o.default.func,onResize:o.default.func,isDraggable:o.default.bool.isRequired,isResizable:o.default.bool.isRequired,isBounded:o.default.bool.isRequired,static:o.default.bool,useCSSTransforms:o.default.bool.isRequired,transformScale:o.default.number,className:o.default.string,handle:o.default.string,cancel:o.default.string,droppingPosition:o.default.shape({e:o.default.object.isRequired,left:o.default.number.isRequired,top:o.default.number.isRequired})}),v(w,"defaultProps",{className:"",cancel:"",handle:"",minH:1,minW:1,maxH:1/0,maxW:1/0,transformScale:1})},402:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var r=p(t);if(r&&r.has(e))return r.get(e);var a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=o?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(a,i,s):a[i]=e[i]}return a.default=e,r&&r.set(e,a),a}(r(650)),o=d(r(4)),i=d(r(944)),s=r(728),l=r(284),u=d(r(275)),c=d(r(288));function d(e){return e&&e.__esModule?e:{default:e}}function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(p=function(e){return e?r:t})(e)}function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){S(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function m(e,t){if(e){if("string"==typeof e)return g(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?g(e,t):void 0}}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function y(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function b(e,t){return b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},b(e,t)}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e){return w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},w(e)}function S(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var _="react-grid-layout",O=!1;try{O=/firefox/i.test(navigator.userAgent)}catch(e){}var x=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&b(e,t)}(x,e);var t,r,c,d,p,h=(d=x,p=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=w(d);if(p){var r=w(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return v(e)}(this,e)});function x(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,x);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return S(v(e=h.call.apply(h,[this].concat(r))),"state",{activeDrag:null,layout:(0,s.synchronizeLayoutWithChildren)(e.props.layout,e.props.children,e.props.cols,(0,s.compactType)(e.props),e.props.allowOverlap),mounted:!1,oldDragItem:null,oldLayout:null,oldResizeItem:null,droppingDOMNode:null,children:[]}),S(v(e),"dragEnterCounter",0),S(v(e),"onDragStart",(function(t,r,n,a){var o=a.e,i=a.node,l=e.state.layout,u=(0,s.getLayoutItem)(l,t);if(u)return e.setState({oldDragItem:(0,s.cloneLayoutItem)(u),oldLayout:l}),e.props.onDragStart(l,u,u,null,o,i)})),S(v(e),"onDrag",(function(t,r,n,a){var o=a.e,i=a.node,l=e.state.oldDragItem,u=e.state.layout,c=e.props,d=c.cols,p=c.allowOverlap,h=c.preventCollision,f=(0,s.getLayoutItem)(u,t);if(f){var m={w:f.w,h:f.h,x:f.x,y:f.y,placeholder:!0,i:t};u=(0,s.moveElement)(u,f,r,n,!0,h,(0,s.compactType)(e.props),d,p),e.props.onDrag(u,l,f,m,o,i),e.setState({layout:p?u:(0,s.compact)(u,(0,s.compactType)(e.props),d),activeDrag:m})}})),S(v(e),"onDragStop",(function(t,r,n,a){var o=a.e,i=a.node;if(e.state.activeDrag){var l=e.state.oldDragItem,u=e.state.layout,c=e.props,d=c.cols,p=c.preventCollision,h=c.allowOverlap,f=(0,s.getLayoutItem)(u,t);if(f){u=(0,s.moveElement)(u,f,r,n,!0,p,(0,s.compactType)(e.props),d,h),e.props.onDragStop(u,l,f,null,o,i);var m=h?u:(0,s.compact)(u,(0,s.compactType)(e.props),d),g=e.state.oldLayout;e.setState({activeDrag:null,layout:m,oldDragItem:null,oldLayout:null}),e.onLayoutMaybeChanged(m,g)}}})),S(v(e),"onResizeStart",(function(t,r,n,a){var o=a.e,i=a.node,l=e.state.layout,u=(0,s.getLayoutItem)(l,t);u&&(e.setState({oldResizeItem:(0,s.cloneLayoutItem)(u),oldLayout:e.state.layout}),e.props.onResizeStart(l,u,u,null,o,i))})),S(v(e),"onResize",(function(t,r,n,a){var o=a.e,i=a.node,l=e.state,u=l.layout,c=l.oldResizeItem,d=e.props,p=d.cols,h=d.preventCollision,g=d.allowOverlap,y=(0,s.withLayoutItem)(u,t,(function(e){var t;if(h&&!g){var a=(0,s.getAllCollisions)(u,f(f({},e),{},{w:r,h:n})).filter((function(t){return t.i!==e.i}));if(t=a.length>0){var o=1/0,i=1/0;a.forEach((function(t){t.x>e.x&&(o=Math.min(o,t.x)),t.y>e.y&&(i=Math.min(i,t.y))})),Number.isFinite(o)&&(e.w=o-e.x),Number.isFinite(i)&&(e.h=i-e.y)}}return t||(e.w=r,e.h=n),e})),b=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){s=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw a}}return o}}(e,t)||m(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(y,2),v=b[0],w=b[1];if(w){var S={w:w.w,h:w.h,x:w.x,y:w.y,static:!0,i:t};e.props.onResize(v,c,w,S,o,i),e.setState({layout:g?v:(0,s.compact)(v,(0,s.compactType)(e.props),p),activeDrag:S})}})),S(v(e),"onResizeStop",(function(t,r,n,a){var o=a.e,i=a.node,l=e.state,u=l.layout,c=l.oldResizeItem,d=e.props,p=d.cols,h=d.allowOverlap,f=(0,s.getLayoutItem)(u,t);e.props.onResizeStop(u,c,f,null,o,i);var m=h?u:(0,s.compact)(u,(0,s.compactType)(e.props),p),g=e.state.oldLayout;e.setState({activeDrag:null,layout:m,oldResizeItem:null,oldLayout:null}),e.onLayoutMaybeChanged(m,g)})),S(v(e),"onDragOver",(function(t){var r;if(t.preventDefault(),t.stopPropagation(),O&&(null===(r=t.nativeEvent.target)||void 0===r||!r.classList.contains(_)))return!1;var n=e.props,o=n.droppingItem,i=n.onDropDragOver,s=n.margin,u=n.cols,c=n.rowHeight,d=n.maxRows,p=n.width,h=n.containerPadding,y=n.transformScale,b=null==i?void 0:i(t);if(!1===b)return e.state.droppingDOMNode&&e.removeDroppingPlaceholder(),!1;var v,w=f(f({},o),b),S=e.state.layout,x=t.nativeEvent,C=x.layerX,P=x.layerY,D={left:C/y,top:P/y,e:t};if(e.state.droppingDOMNode){if(e.state.droppingPosition){var E=e.state.droppingPosition,R=E.left,j=E.top;(R!=C||j!=P)&&e.setState({droppingPosition:D})}}else{var T={cols:u,margin:s,maxRows:d,rowHeight:c,containerWidth:p,containerPadding:h||s},k=(0,l.calcXY)(T,P,C,w.w,w.h);e.setState({droppingDOMNode:a.createElement("div",{key:w.i}),droppingPosition:D,layout:[].concat((v=S,function(e){if(Array.isArray(e))return g(e)}(v)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(v)||m(v)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),[f(f({},w),{},{x:k.x,y:k.y,static:!1,isDraggable:!0})])})}})),S(v(e),"removeDroppingPlaceholder",(function(){var t=e.props,r=t.droppingItem,n=t.cols,a=e.state.layout,o=(0,s.compact)(a.filter((function(e){return e.i!==r.i})),(0,s.compactType)(e.props),n);e.setState({layout:o,droppingDOMNode:null,activeDrag:null,droppingPosition:void 0})})),S(v(e),"onDragLeave",(function(t){t.preventDefault(),t.stopPropagation(),e.dragEnterCounter--,0===e.dragEnterCounter&&e.removeDroppingPlaceholder()})),S(v(e),"onDragEnter",(function(t){t.preventDefault(),t.stopPropagation(),e.dragEnterCounter++})),S(v(e),"onDrop",(function(t){t.preventDefault(),t.stopPropagation();var r=e.props.droppingItem,n=e.state.layout,a=n.find((function(e){return e.i===r.i}));e.dragEnterCounter=0,e.removeDroppingPlaceholder(),e.props.onDrop(n,a,t)})),e}return t=x,c=[{key:"getDerivedStateFromProps",value:function(e,t){var r;return t.activeDrag?null:((0,o.default)(e.layout,t.propsLayout)&&e.compactType===t.compactType?(0,s.childrenEqual)(e.children,t.children)||(r=t.layout):r=e.layout,r?{layout:(0,s.synchronizeLayoutWithChildren)(r,e.children,e.cols,(0,s.compactType)(e),e.allowOverlap),compactType:e.compactType,children:e.children,propsLayout:e.layout}:null)}}],(r=[{key:"componentDidMount",value:function(){this.setState({mounted:!0}),this.onLayoutMaybeChanged(this.state.layout,this.props.layout)}},{key:"shouldComponentUpdate",value:function(e,t){return this.props.children!==e.children||!(0,s.fastRGLPropsEqual)(this.props,e,o.default)||this.state.activeDrag!==t.activeDrag||this.state.mounted!==t.mounted||this.state.droppingPosition!==t.droppingPosition}},{key:"componentDidUpdate",value:function(e,t){if(!this.state.activeDrag){var r=this.state.layout,n=t.layout;this.onLayoutMaybeChanged(r,n)}}},{key:"containerHeight",value:function(){if(this.props.autoSize){var e=(0,s.bottom)(this.state.layout),t=this.props.containerPadding?this.props.containerPadding[1]:this.props.margin[1];return e*this.props.rowHeight+(e-1)*this.props.margin[1]+2*t+"px"}}},{key:"onLayoutMaybeChanged",value:function(e,t){t||(t=this.state.layout),(0,o.default)(t,e)||this.props.onLayoutChange(e)}},{key:"placeholder",value:function(){var e=this.state.activeDrag;if(!e)return null;var t=this.props,r=t.width,n=t.cols,o=t.margin,i=t.containerPadding,s=t.rowHeight,l=t.maxRows,c=t.useCSSTransforms,d=t.transformScale;return a.createElement(u.default,{w:e.w,h:e.h,x:e.x,y:e.y,i:e.i,className:"react-grid-placeholder",containerWidth:r,cols:n,margin:o,containerPadding:i||o,maxRows:l,rowHeight:s,isDraggable:!1,isResizable:!1,isBounded:!1,useCSSTransforms:c,transformScale:d},a.createElement("div",null))}},{key:"processGridItem",value:function(e,t){if(e&&e.key){var r=(0,s.getLayoutItem)(this.state.layout,String(e.key));if(!r)return null;var n=this.props,o=n.width,i=n.cols,l=n.margin,c=n.containerPadding,d=n.rowHeight,p=n.maxRows,h=n.isDraggable,f=n.isResizable,m=n.isBounded,g=n.useCSSTransforms,y=n.transformScale,b=n.draggableCancel,v=n.draggableHandle,w=n.resizeHandles,S=n.resizeHandle,_=this.state,O=_.mounted,x=_.droppingPosition,C="boolean"==typeof r.isDraggable?r.isDraggable:!r.static&&h,P="boolean"==typeof r.isResizable?r.isResizable:!r.static&&f,D=r.resizeHandles||w,E=C&&m&&!1!==r.isBounded;return a.createElement(u.default,{containerWidth:o,cols:i,margin:l,containerPadding:c||l,maxRows:p,rowHeight:d,cancel:b,handle:v,onDragStop:this.onDragStop,onDragStart:this.onDragStart,onDrag:this.onDrag,onResizeStart:this.onResizeStart,onResize:this.onResize,onResizeStop:this.onResizeStop,isDraggable:C,isResizable:P,isBounded:E,useCSSTransforms:g&&O,usePercentages:!O,transformScale:y,w:r.w,h:r.h,x:r.x,y:r.y,i:r.i,minH:r.minH,minW:r.minW,maxH:r.maxH,maxW:r.maxW,static:r.static,droppingPosition:t?x:void 0,resizeHandles:D,resizeHandle:S},e)}}},{key:"render",value:function(){var e=this,t=this.props,r=t.className,n=t.style,o=t.isDroppable,l=t.innerRef,u=(0,i.default)(_,r),c=f({height:this.containerHeight()},n);return a.createElement("div",{ref:l,className:u,style:c,onDrop:o?this.onDrop:s.noop,onDragLeave:o?this.onDragLeave:s.noop,onDragEnter:o?this.onDragEnter:s.noop,onDragOver:o?this.onDragOver:s.noop},a.Children.map(this.props.children,(function(t){return e.processGridItem(t)})),o&&this.state.droppingDOMNode&&this.processGridItem(this.state.droppingDOMNode,!0),this.placeholder())}}])&&y(t.prototype,r),c&&y(t,c),Object.defineProperty(t,"prototype",{writable:!1}),x}(a.Component);t.default=x,S(x,"displayName","ReactGridLayout"),S(x,"propTypes",c.default),S(x,"defaultProps",{autoSize:!0,cols:12,className:"",style:{},draggableHandle:"",draggableCancel:"",containerPadding:null,rowHeight:150,maxRows:1/0,layout:[],margin:[10,10],isBounded:!1,isDraggable:!0,isResizable:!0,allowOverlap:!1,isDroppable:!1,useCSSTransforms:!0,transformScale:1,verticalCompact:!0,compactType:"vertical",preventCollision:!1,droppingItem:{i:"__dropping-elem__",h:1,w:1},resizeHandles:["se"],onLayoutChange:s.noop,onDragStart:s.noop,onDrag:s.noop,onDragStop:s.noop,onResizeStart:s.noop,onResize:s.noop,onResizeStop:s.noop,onDrop:s.noop,onDropDragOver:s.noop})},288:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resizeHandleType=t.resizeHandleAxesType=t.default=void 0;var n=o(r(615)),a=o(r(650));function o(e){return e&&e.__esModule?e:{default:e}}var i=n.default.arrayOf(n.default.oneOf(["s","w","e","n","sw","nw","se","ne"]));t.resizeHandleAxesType=i;var s=n.default.oneOfType([n.default.node,n.default.func]);t.resizeHandleType=s;var l={className:n.default.string,style:n.default.object,width:n.default.number,autoSize:n.default.bool,cols:n.default.number,draggableCancel:n.default.string,draggableHandle:n.default.string,verticalCompact:function(e){e.verticalCompact},compactType:n.default.oneOf(["vertical","horizontal"]),layout:function(e){var t=e.layout;void 0!==t&&r(728).validateLayout(t,"layout")},margin:n.default.arrayOf(n.default.number),containerPadding:n.default.arrayOf(n.default.number),rowHeight:n.default.number,maxRows:n.default.number,isBounded:n.default.bool,isDraggable:n.default.bool,isResizable:n.default.bool,allowOverlap:n.default.bool,preventCollision:n.default.bool,useCSSTransforms:n.default.bool,transformScale:n.default.number,isDroppable:n.default.bool,resizeHandles:i,resizeHandle:s,onLayoutChange:n.default.func,onDragStart:n.default.func,onDrag:n.default.func,onDragStop:n.default.func,onResizeStart:n.default.func,onResize:n.default.func,onResizeStop:n.default.func,onDrop:n.default.func,droppingItem:n.default.shape({i:n.default.string.isRequired,w:n.default.number.isRequired,h:n.default.number.isRequired}),children:function(e,t){var r=e[t],n={};a.default.Children.forEach(r,(function(e){if(null!=(null==e?void 0:e.key)){if(n[e.key])throw new Error('Duplicate child key "'+e.key+'" found! This will cause problems in ReactGridLayout.');n[e.key]=!0}}))},innerRef:n.default.any};t.default=l},255:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}t.default=void 0;var a=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var r=p(t);if(r&&r.has(e))return r.get(e);var a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=o?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(a,i,s):a[i]=e[i]}return a.default=e,r&&r.set(e,a),a}(r(650)),o=d(r(615)),i=d(r(4)),s=r(728),l=r(119),u=d(r(402)),c=["breakpoint","breakpoints","cols","layouts","margin","containerPadding","onBreakpointChange","onLayoutChange","onWidthChange"];function d(e){return e&&e.__esModule?e:{default:e}}function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(p=function(e){return e?r:t})(e)}function h(){return h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},h.apply(this,arguments)}function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){w(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function g(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function y(e,t){return y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},y(e,t)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}function w(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var S=function(e){return Object.prototype.toString.call(e)};function _(e,t){return null==e?null:Array.isArray(e)?e:e[t]}var O=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y(e,t)}(S,e);var t,r,o,d,p,f=(d=S,p=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=v(d);if(p){var r=v(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return b(e)}(this,e)});function S(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,S);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return w(b(e=f.call.apply(f,[this].concat(r))),"state",e.generateInitialState()),w(b(e),"onLayoutChange",(function(t){e.props.onLayoutChange(t,m(m({},e.props.layouts),{},w({},e.state.breakpoint,t)))})),e}return t=S,o=[{key:"getDerivedStateFromProps",value:function(e,t){if(!(0,i.default)(e.layouts,t.layouts)){var r=t.breakpoint,n=t.cols;return{layout:(0,l.findOrGenerateResponsiveLayout)(e.layouts,e.breakpoints,r,r,n,e.compactType),layouts:e.layouts}}return null}}],(r=[{key:"generateInitialState",value:function(){var e=this.props,t=e.width,r=e.breakpoints,n=e.layouts,a=e.cols,o=(0,l.getBreakpointFromWidth)(r,t),i=(0,l.getColsFromBreakpoint)(o,a),s=!1===this.props.verticalCompact?null:this.props.compactType;return{layout:(0,l.findOrGenerateResponsiveLayout)(n,r,o,o,i,s),breakpoint:o,cols:i}}},{key:"componentDidUpdate",value:function(e){this.props.width==e.width&&this.props.breakpoint===e.breakpoint&&(0,i.default)(this.props.breakpoints,e.breakpoints)&&(0,i.default)(this.props.cols,e.cols)||this.onWidthChange(e)}},{key:"onWidthChange",value:function(e){var t=this.props,r=t.breakpoints,n=t.cols,a=t.layouts,o=t.compactType,i=this.props.breakpoint||(0,l.getBreakpointFromWidth)(this.props.breakpoints,this.props.width),u=this.state.breakpoint,c=(0,l.getColsFromBreakpoint)(i,n),d=m({},a);if(u!==i||e.breakpoints!==r||e.cols!==n){u in d||(d[u]=(0,s.cloneLayout)(this.state.layout));var p=(0,l.findOrGenerateResponsiveLayout)(d,r,i,u,c,o);p=(0,s.synchronizeLayoutWithChildren)(p,this.props.children,c,o,this.props.allowOverlap),d[i]=p,this.props.onLayoutChange(p,d),this.props.onBreakpointChange(i,c),this.setState({breakpoint:i,layout:p,cols:c})}var h=_(this.props.margin,i),f=_(this.props.containerPadding,i);this.props.onWidthChange(this.props.width,h,c,f)}},{key:"render",value:function(){var e=this.props,t=(e.breakpoint,e.breakpoints,e.cols,e.layouts,e.margin),r=e.containerPadding,n=(e.onBreakpointChange,e.onLayoutChange,e.onWidthChange,function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(e,c));return a.createElement(u.default,h({},n,{margin:_(t,this.state.breakpoint),containerPadding:_(r,this.state.breakpoint),onLayoutChange:this.onLayoutChange,layout:this.state.layout,cols:this.state.cols}))}}])&&g(t.prototype,r),o&&g(t,o),Object.defineProperty(t,"prototype",{writable:!1}),S}(a.Component);t.default=O,w(O,"propTypes",{breakpoint:o.default.string,breakpoints:o.default.object,allowOverlap:o.default.bool,cols:o.default.object,margin:o.default.oneOfType([o.default.array,o.default.object]),containerPadding:o.default.oneOfType([o.default.array,o.default.object]),layouts:function(e,t){if("[object Object]"!==S(e[t]))throw new Error("Layout property must be an object. Received: "+S(e[t]));Object.keys(e[t]).forEach((function(t){if(!(t in e.breakpoints))throw new Error("Each key in layouts must align with a key in breakpoints.");(0,s.validateLayout)(e.layouts[t],"layouts."+t)}))},width:o.default.number.isRequired,onBreakpointChange:o.default.func,onLayoutChange:o.default.func,onWidthChange:o.default.func}),w(O,"defaultProps",{breakpoints:{lg:1200,md:996,sm:768,xs:480,xxs:0},cols:{lg:12,md:10,sm:6,xs:4,xxs:2},containerPadding:{lg:null,md:null,sm:null,xs:null,xxs:null},layouts:{},margin:[10,10],allowOverlap:!1,onBreakpointChange:s.noop,onLayoutChange:s.noop,onWidthChange:s.noop})},284:(e,t)=>{"use strict";function r(e){var t=e.margin,r=e.containerPadding,n=e.containerWidth,a=e.cols;return(n-t[0]*(a-1)-2*r[0])/a}function n(e,t,r){return Number.isFinite(e)?Math.round(t*e+Math.max(0,e-1)*r):e}function a(e,t,r){return Math.max(Math.min(e,r),t)}Object.defineProperty(t,"__esModule",{value:!0}),t.calcGridColWidth=r,t.calcGridItemPosition=function(e,t,a,o,i,s){var l=e.margin,u=e.containerPadding,c=e.rowHeight,d=r(e),p={};return s&&s.resizing?(p.width=Math.round(s.resizing.width),p.height=Math.round(s.resizing.height)):(p.width=n(o,d,l[0]),p.height=n(i,c,l[1])),s&&s.dragging?(p.top=Math.round(s.dragging.top),p.left=Math.round(s.dragging.left)):(p.top=Math.round((c+l[1])*a+u[1]),p.left=Math.round((d+l[0])*t+u[0])),p},t.calcGridItemWHPx=n,t.calcWH=function(e,t,n,o,i){var s=e.margin,l=e.maxRows,u=e.cols,c=e.rowHeight,d=r(e),p=Math.round((t+s[0])/(d+s[0])),h=Math.round((n+s[1])/(c+s[1]));return{w:p=a(p,0,u-o),h:h=a(h,0,l-i)}},t.calcXY=function(e,t,n,o,i){var s=e.margin,l=e.cols,u=e.rowHeight,c=e.maxRows,d=r(e),p=Math.round((n-s[0])/(d+s[0])),h=Math.round((t-s[1])/(u+s[1]));return{x:p=a(p,0,l-o),y:h=a(h,0,c-i)}},t.clamp=a},22:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}t.default=function(e){var t;return t=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}(b,t);var r,o,l,u,y=(r=b,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=f(r);if(o){var a=f(this).constructor;e=Reflect.construct(t,arguments,a)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return h(e)}(this,e)});function b(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,b);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return m(h(e=y.call.apply(y,[this].concat(r))),"state",{width:1280}),m(h(e),"elementRef",a.createRef()),m(h(e),"mounted",!1),m(h(e),"onWindowResize",(function(){if(e.mounted){var t=e.elementRef.current;t instanceof HTMLElement&&t.offsetWidth&&e.setState({width:t.offsetWidth})}})),e}return l=b,(u=[{key:"componentDidMount",value:function(){this.mounted=!0,window.addEventListener("resize",this.onWindowResize),this.onWindowResize()}},{key:"componentWillUnmount",value:function(){this.mounted=!1,window.removeEventListener("resize",this.onWindowResize)}},{key:"render",value:function(){var t=this.props,r=t.measureBeforeMount,n=function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(t,s);return r&&!this.mounted?a.createElement("div",{className:(0,i.default)(this.props.className,g),style:this.props.style,ref:this.elementRef}):a.createElement(e,c({innerRef:this.elementRef},n,this.state))}}])&&d(l.prototype,u),Object.defineProperty(l,"prototype",{writable:!1}),b}(a.Component),m(t,"defaultProps",{measureBeforeMount:!1}),m(t,"propTypes",{measureBeforeMount:o.default.bool}),t};var a=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var r=u(t);if(r&&r.has(e))return r.get(e);var a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=o?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(a,i,s):a[i]=e[i]}return a.default=e,r&&r.set(e,a),a}(r(650)),o=l(r(615)),i=l(r(944)),s=["measureBeforeMount"];function l(e){return e&&e.__esModule?e:{default:e}}function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(u=function(e){return e?r:t})(e)}function c(){return c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},c.apply(this,arguments)}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function p(e,t){return p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},p(e,t)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}function m(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var g="react-grid-layout"},902:e=>{e.exports=function(e,t,r){return e===t||e.className===t.className&&r(e.style,t.style)&&e.width===t.width&&e.autoSize===t.autoSize&&e.cols===t.cols&&e.draggableCancel===t.draggableCancel&&e.draggableHandle===t.draggableHandle&&r(e.verticalCompact,t.verticalCompact)&&r(e.compactType,t.compactType)&&r(e.layout,t.layout)&&r(e.margin,t.margin)&&r(e.containerPadding,t.containerPadding)&&e.rowHeight===t.rowHeight&&e.maxRows===t.maxRows&&e.isBounded===t.isBounded&&e.isDraggable===t.isDraggable&&e.isResizable===t.isResizable&&e.allowOverlap===t.allowOverlap&&e.preventCollision===t.preventCollision&&e.useCSSTransforms===t.useCSSTransforms&&e.transformScale===t.transformScale&&e.isDroppable===t.isDroppable&&r(e.resizeHandles,t.resizeHandles)&&r(e.resizeHandle,t.resizeHandle)&&e.onLayoutChange===t.onLayoutChange&&e.onDragStart===t.onDragStart&&e.onDrag===t.onDrag&&e.onDragStop===t.onDragStop&&e.onResizeStart===t.onResizeStart&&e.onResize===t.onResize&&e.onResizeStop===t.onResizeStop&&e.onDrop===t.onDrop&&r(e.droppingItem,t.droppingItem)&&r(e.innerRef,t.innerRef)}},119:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.findOrGenerateResponsiveLayout=function(e,t,r,o,i,s){if(e[r])return(0,n.cloneLayout)(e[r]);for(var l=e[o],u=a(t),c=u.slice(u.indexOf(r)),d=0,p=c.length;d<p;d++){var h=c[d];if(e[h]){l=e[h];break}}return l=(0,n.cloneLayout)(l||[]),(0,n.compact)((0,n.correctBounds)(l,{cols:i}),s,i)},t.getBreakpointFromWidth=function(e,t){for(var r=a(e),n=r[0],o=1,i=r.length;o<i;o++){var s=r[o];t>e[s]&&(n=s)}return n},t.getColsFromBreakpoint=function(e,t){if(!t[e])throw new Error("ResponsiveReactGridLayout: `cols` entry for breakpoint "+e+" is missing!");return t[e]},t.sortBreakpoints=a;var n=r(728);function a(e){return Object.keys(e).sort((function(t,r){return e[t]-e[r]}))}},728:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bottom=d,t.childrenEqual=function(e,t){return(0,n.default)(a.default.Children.map(e,(function(e){return null==e?void 0:e.key})),a.default.Children.map(t,(function(e){return null==e?void 0:e.key})))},t.cloneLayout=p,t.cloneLayoutItem=f,t.collides=g,t.compact=y,t.compactItem=w,t.compactType=function(e){var t=e||{},r=t.verticalCompact,n=t.compactType;return!1===r?null:n},t.correctBounds=S,t.fastPositionEqual=function(e,t){return e.left===t.left&&e.top===t.top&&e.width===t.width&&e.height===t.height},t.fastRGLPropsEqual=void 0,t.getAllCollisions=x,t.getFirstCollision=O,t.getLayoutItem=_,t.getStatics=C,t.modifyLayout=h,t.moveElement=P,t.moveElementAwayFromCollision=D,t.noop=void 0,t.perc=function(e){return 100*e+"%"},t.setTopLeft=function(e){var t=e.top,r=e.left,n=e.width,a=e.height;return{top:"".concat(t,"px"),left:"".concat(r,"px"),width:"".concat(n,"px"),height:"".concat(a,"px"),position:"absolute"}},t.setTransform=function(e){var t=e.top,r=e.left,n=e.width,a=e.height,o="translate(".concat(r,"px,").concat(t,"px)");return{transform:o,WebkitTransform:o,MozTransform:o,msTransform:o,OTransform:o,width:"".concat(n,"px"),height:"".concat(a,"px"),position:"absolute"}},t.sortLayoutItems=E,t.sortLayoutItemsByColRow=j,t.sortLayoutItemsByRowCol=R,t.synchronizeLayoutWithChildren=function(e,t,r,n,o){e=e||[];var i=[];a.default.Children.forEach(t,(function(t){if(null!=(null==t?void 0:t.key)){var r=_(e,String(t.key));if(r)i.push(f(r));else{!u&&t.props._grid&&console.warn("`_grid` properties on children have been deprecated as of React 15.2. Please use `data-grid` or add your properties directly to the `layout`.");var n=t.props["data-grid"]||t.props._grid;n?(u||T([n],"ReactGridLayout.children"),i.push(f(s(s({},n),{},{i:t.key})))):i.push(f({w:1,h:1,x:0,y:d(i),i:String(t.key)}))}}}));var l=S(i,{cols:r});return o?l:y(l,n,r)},t.validateLayout=T,t.withLayoutItem=function(e,t,r){var n=_(e,t);return n?[e=h(e,n=r(f(n))),n]:[e,null]};var n=o(r(4)),a=o(r(650));function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var u=!0,c=!1;function d(e){for(var t,r=0,n=0,a=e.length;n<a;n++)(t=e[n].y+e[n].h)>r&&(r=t);return r}function p(e){for(var t=Array(e.length),r=0,n=e.length;r<n;r++)t[r]=f(e[r]);return t}function h(e,t){for(var r=Array(e.length),n=0,a=e.length;n<a;n++)t.i===e[n].i?r[n]=t:r[n]=e[n];return r}function f(e){return{w:e.w,h:e.h,x:e.x,y:e.y,i:e.i,minW:e.minW,maxW:e.maxW,minH:e.minH,maxH:e.maxH,moved:Boolean(e.moved),static:Boolean(e.static),isDraggable:e.isDraggable,isResizable:e.isResizable,resizeHandles:e.resizeHandles,isBounded:e.isBounded}}var m=r(902);function g(e,t){return!(e.i===t.i||e.x+e.w<=t.x||e.x>=t.x+t.w||e.y+e.h<=t.y||e.y>=t.y+t.h)}function y(e,t,r){for(var n=C(e),a=E(e,t),o=Array(e.length),i=0,s=a.length;i<s;i++){var l=f(a[i]);l.static||(l=w(n,l,t,r,a),n.push(l)),o[e.indexOf(a[i])]=l,l.moved=!1}return o}t.fastRGLPropsEqual=m;var b={x:"w",y:"h"};function v(e,t,r,n){var a=b[n];t[n]+=1;for(var o=e.map((function(e){return e.i})).indexOf(t.i)+1;o<e.length;o++){var i=e[o];if(!i.static){if(i.y>t.y+t.h)break;g(t,i)&&v(e,i,r+t[a],n)}}t[n]=r}function w(e,t,r,n,a){var o,i="horizontal"===r;if("vertical"===r)for(t.y=Math.min(d(e),t.y);t.y>0&&!O(e,t);)t.y--;else if(i)for(;t.x>0&&!O(e,t);)t.x--;for(;o=O(e,t);)i?v(a,t,o.x+o.w,"x"):v(a,t,o.y+o.h,"y"),i&&t.x+t.w>n&&(t.x=n-t.w,t.y++);return t.y=Math.max(t.y,0),t.x=Math.max(t.x,0),t}function S(e,t){for(var r=C(e),n=0,a=e.length;n<a;n++){var o=e[n];if(o.x+o.w>t.cols&&(o.x=t.cols-o.w),o.x<0&&(o.x=0,o.w=t.cols),o.static)for(;O(r,o);)o.y++;else r.push(o)}return e}function _(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r].i===t)return e[r]}function O(e,t){for(var r=0,n=e.length;r<n;r++)if(g(e[r],t))return e[r]}function x(e,t){return e.filter((function(e){return g(e,t)}))}function C(e){return e.filter((function(e){return e.static}))}function P(e,t,r,n,a,o,i,s,l){if(t.static&&!0!==t.isDraggable)return e;if(t.y===n&&t.x===r)return e;k("Moving element ".concat(t.i," to [").concat(String(r),",").concat(String(n),"] from [").concat(t.x,",").concat(t.y,"]"));var u=t.x,c=t.y;"number"==typeof r&&(t.x=r),"number"==typeof n&&(t.y=n),t.moved=!0;var d=E(e,i);("vertical"===i&&"number"==typeof n?c>=n:"horizontal"===i&&"number"==typeof r&&u>=r)&&(d=d.reverse());var h=x(d,t),f=h.length>0;if(f&&l)return p(e);if(f&&o)return k("Collision prevented on ".concat(t.i,", reverting.")),t.x=u,t.y=c,t.moved=!1,e;for(var m=0,g=h.length;m<g;m++){var y=h[m];k("Resolving collision between ".concat(t.i," at [").concat(t.x,",").concat(t.y,"] and ").concat(y.i," at [").concat(y.x,",").concat(y.y,"]")),y.moved||(e=y.static?D(e,y,t,a,i,s):D(e,t,y,a,i,s))}return e}function D(e,t,r,n,a,o){var i="horizontal"===a,s="horizontal"!==a,l=t.static;if(n){n=!1;var u={x:i?Math.max(t.x-r.w,0):r.x,y:s?Math.max(t.y-r.h,0):r.y,w:r.w,h:r.h,i:"-1"};if(!O(e,u))return k("Doing reverse collision on ".concat(r.i," up to [").concat(u.x,",").concat(u.y,"].")),P(e,r,i?u.x:void 0,s?u.y:void 0,n,l,a,o)}return P(e,r,i?r.x+1:void 0,s?r.y+1:void 0,n,l,a,o)}function E(e,t){return"horizontal"===t?j(e):"vertical"===t?R(e):e}function R(e){return e.slice(0).sort((function(e,t){return e.y>t.y||e.y===t.y&&e.x>t.x?1:e.y===t.y&&e.x===t.x?0:-1}))}function j(e){return e.slice(0).sort((function(e,t){return e.x>t.x||e.x===t.x&&e.y>t.y?1:-1}))}function T(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Layout",r=["x","y","w","h"];if(!Array.isArray(e))throw new Error(t+" must be an array!");for(var n=0,a=e.length;n<a;n++)for(var o=e[n],i=0;i<r.length;i++)if("number"!=typeof o[r[i]])throw new Error("ReactGridLayout: "+t+"["+n+"]."+r[i]+" must be a number!")}function k(){var e;c&&(e=console).log.apply(e,arguments)}t.noop=function(){}},788:(e,t,r)=>{e.exports=r(402).default,e.exports.utils=r(728),e.exports.Responsive=r(255).default,e.exports.Responsive.utils=r(119),e.exports.WidthProvider=r(22).default},377:(e,t,r)=>{"use strict";t.__esModule=!0,t.default=void 0;var n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=l(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=a?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}return n.default=e,r&&r.set(e,n),n}(r(650)),a=r(529),o=r(203),i=r(404),s=["children","className","draggableOpts","width","height","handle","handleSize","lockAspectRatio","axis","minConstraints","maxConstraints","onResize","onResizeStop","onResizeStart","resizeHandles","transformScale"];function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(l=function(e){return e?r:t})(e)}function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},u.apply(this,arguments)}function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){p(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function p(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function h(e,t){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},h(e,t)}var f=function(e){var t,r;function i(){for(var t,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(t=e.call.apply(e,[this].concat(n))||this).handleRefs={},t.lastHandleRect=null,t.slack=null,t}r=e,(t=i).prototype=Object.create(r.prototype),t.prototype.constructor=t,h(t,r);var l=i.prototype;return l.componentWillUnmount=function(){this.resetData()},l.resetData=function(){this.lastHandleRect=this.slack=null},l.runConstraints=function(e,t){var r=this.props,n=r.minConstraints,a=r.maxConstraints,o=r.lockAspectRatio;if(!n&&!a&&!o)return[e,t];if(o){var i=this.props.width/this.props.height,s=e-this.props.width,l=t-this.props.height;Math.abs(s)>Math.abs(l*i)?t=e/i:e=t*i}var u=e,c=t,d=this.slack||[0,0],p=d[0],h=d[1];return e+=p,t+=h,n&&(e=Math.max(n[0],e),t=Math.max(n[1],t)),a&&(e=Math.min(a[0],e),t=Math.min(a[1],t)),this.slack=[p+(u-e),h+(c-t)],[e,t]},l.resizeHandler=function(e,t){var r=this;return function(n,a){var o=a.node,i=a.deltaX,s=a.deltaY;"onResizeStart"===e&&r.resetData();var l=("both"===r.props.axis||"x"===r.props.axis)&&"n"!==t&&"s"!==t,u=("both"===r.props.axis||"y"===r.props.axis)&&"e"!==t&&"w"!==t;if(l||u){var c=t[0],d=t[t.length-1],p=o.getBoundingClientRect();null!=r.lastHandleRect&&("w"===d&&(i+=p.left-r.lastHandleRect.left),"n"===c&&(s+=p.top-r.lastHandleRect.top)),r.lastHandleRect=p,"w"===d&&(i=-i),"n"===c&&(s=-s);var h=r.props.width+(l?i/r.props.transformScale:0),f=r.props.height+(u?s/r.props.transformScale:0),m=r.runConstraints(h,f);h=m[0],f=m[1];var g=h!==r.props.width||f!==r.props.height,y="function"==typeof r.props[e]?r.props[e]:null;y&&!("onResize"===e&&!g)&&(null==n.persist||n.persist(),y(n,{node:o,size:{width:h,height:f},handle:t})),"onResizeStop"===e&&r.resetData()}}},l.renderResizeHandle=function(e,t){var r=this.props.handle;if(!r)return n.createElement("span",{className:"react-resizable-handle react-resizable-handle-"+e,ref:t});if("function"==typeof r)return r(e,t);var a=d({ref:t},"string"==typeof r.type?{}:{handleAxis:e});return n.cloneElement(r,a)},l.render=function(){var e=this,t=this.props,r=t.children,i=t.className,l=t.draggableOpts,c=(t.width,t.height,t.handle,t.handleSize,t.lockAspectRatio,t.axis,t.minConstraints,t.maxConstraints,t.onResize,t.onResizeStop,t.onResizeStart,t.resizeHandles),p=(t.transformScale,function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(t,s));return(0,o.cloneElement)(r,d(d({},p),{},{className:(i?i+" ":"")+"react-resizable",children:[].concat(r.props.children,c.map((function(t){var r,o=null!=(r=e.handleRefs[t])?r:e.handleRefs[t]=n.createRef();return n.createElement(a.DraggableCore,u({},l,{nodeRef:o,key:"resizableHandle-"+t,onStop:e.resizeHandler("onResizeStop",t),onStart:e.resizeHandler("onResizeStart",t),onDrag:e.resizeHandler("onResize",t)}),e.renderResizeHandle(t,o))})))}))},i}(n.Component);t.default=f,f.propTypes=i.resizableProps,f.defaultProps={axis:"both",handleSize:[20,20],lockAspectRatio:!1,minConstraints:[20,20],maxConstraints:[1/0,1/0],resizeHandles:["se"],transformScale:1}},60:(e,t,r)=>{"use strict";t.default=void 0;var n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=u(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=a?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}return n.default=e,r&&r.set(e,n),n}(r(650)),a=l(r(615)),o=l(r(377)),i=r(404),s=["handle","handleSize","onResize","onResizeStart","onResizeStop","draggableOpts","minConstraints","maxConstraints","lockAspectRatio","axis","width","height","resizeHandles","style","transformScale"];function l(e){return e&&e.__esModule?e:{default:e}}function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(u=function(e){return e?r:t})(e)}function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},c.apply(this,arguments)}function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){h(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function h(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f(e,t){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},f(e,t)}var m=function(e){var t,r;function a(){for(var t,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(t=e.call.apply(e,[this].concat(n))||this).state={width:t.props.width,height:t.props.height,propsWidth:t.props.width,propsHeight:t.props.height},t.onResize=function(e,r){var n=r.size;t.props.onResize?(null==e.persist||e.persist(),t.setState(n,(function(){return t.props.onResize&&t.props.onResize(e,r)}))):t.setState(n)},t}return r=e,(t=a).prototype=Object.create(r.prototype),t.prototype.constructor=t,f(t,r),a.getDerivedStateFromProps=function(e,t){return t.propsWidth!==e.width||t.propsHeight!==e.height?{width:e.width,height:e.height,propsWidth:e.width,propsHeight:e.height}:null},a.prototype.render=function(){var e=this.props,t=e.handle,r=e.handleSize,a=(e.onResize,e.onResizeStart),i=e.onResizeStop,l=e.draggableOpts,u=e.minConstraints,d=e.maxConstraints,h=e.lockAspectRatio,f=e.axis,m=(e.width,e.height,e.resizeHandles),g=e.style,y=e.transformScale,b=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,s);return n.createElement(o.default,{axis:f,draggableOpts:l,handle:t,handleSize:r,height:this.state.height,lockAspectRatio:h,maxConstraints:d,minConstraints:u,onResizeStart:a,onResize:this.onResize,onResizeStop:i,resizeHandles:m,transformScale:y,width:this.state.width},n.createElement("div",c({},b,{style:p(p({},g),{},{width:this.state.width+"px",height:this.state.height+"px"})})))},a}(n.Component);t.default=m,m.propTypes=p(p({},i.resizableProps),{},{children:a.default.element})},404:(e,t,r)=>{"use strict";t.__esModule=!0,t.resizableProps=void 0;var n,a=(n=r(615))&&n.__esModule?n:{default:n};r(529);var o={axis:a.default.oneOf(["both","x","y","none"]),className:a.default.string,children:a.default.element.isRequired,draggableOpts:a.default.shape({allowAnyClick:a.default.bool,cancel:a.default.string,children:a.default.node,disabled:a.default.bool,enableUserSelectHack:a.default.bool,offsetParent:a.default.node,grid:a.default.arrayOf(a.default.number),handle:a.default.string,nodeRef:a.default.object,onStart:a.default.func,onDrag:a.default.func,onStop:a.default.func,onMouseDown:a.default.func,scale:a.default.number}),height:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n,o=t[0];return"both"===o.axis||"y"===o.axis?(n=a.default.number).isRequired.apply(n,t):a.default.number.apply(a.default,t)},handle:a.default.oneOfType([a.default.node,a.default.func]),handleSize:a.default.arrayOf(a.default.number),lockAspectRatio:a.default.bool,maxConstraints:a.default.arrayOf(a.default.number),minConstraints:a.default.arrayOf(a.default.number),onResizeStop:a.default.func,onResizeStart:a.default.func,onResize:a.default.func,resizeHandles:a.default.arrayOf(a.default.oneOf(["s","w","e","n","sw","nw","se","ne"])),transformScale:a.default.number,width:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n,o=t[0];return"both"===o.axis||"x"===o.axis?(n=a.default.number).isRequired.apply(n,t):a.default.number.apply(a.default,t)}};t.resizableProps=o},203:(e,t,r)=>{"use strict";t.__esModule=!0,t.cloneElement=function(e,t){return t.style&&e.props.style&&(t.style=i(i({},e.props.style),t.style)),t.className&&e.props.className&&(t.className=e.props.className+" "+t.className),a.default.cloneElement(e,t)};var n,a=(n=r(650))&&n.__esModule?n:{default:n};function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}},26:(e,t,r)=>{"use strict";e.exports=function(){throw new Error("Don't instantiate Resizable directly! Use require('react-resizable').Resizable")},e.exports.Resizable=r(377).default,e.exports.ResizableBox=r(60).default},644:e=>{"use strict";e.exports=s},305:t=>{"use strict";t.exports=e},545:e=>{"use strict";e.exports=n},388:e=>{"use strict";e.exports=i},980:e=>{"use strict";e.exports=o},650:e=>{"use strict";e.exports=t},729:e=>{"use strict";e.exports=l},814:e=>{"use strict";e.exports=r},177:e=>{"use strict";e.exports=a}},c={};function d(e){var t=c[e];if(void 0!==t)return t.exports;var r=c[e]={id:e,loaded:!1,exports:{}};return u[e](r,r.exports,d),r.loaded=!0,r.exports}d.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return d.d(t,{a:t}),t},d.d=(e,t)=>{for(var r in t)d.o(t,r)&&!d.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},d.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),d.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),d.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},d.nmd=e=>(e.paths=[],e.children||(e.children=[]),e);var p={};return(()=>{"use strict";d.r(p),d.d(p,{plugin:()=>hu});var e=d(305),t=d(650),r=d.n(t);const n=r().createContext(null);var a=d(814);const o=`/a/${JSON.parse('{"id":"trafficcontrol-scenes-app"}').id}`;var i;!function(e){e.CacheGroup="cache-group",e.DeliveryService="delivery-service",e.Server="server"}(i||(i={}));const s={CACHE_STATS:{uid:"cache_stats",type:"influxdb"},DELIVERYSERVICE_STATS:{uid:"deliveryservice_stats",type:"influxdb"},DAILY_STATS:{uid:"daily_stats",type:"influxdb"},TELEGRAF:{uid:"telegraf",type:"influxdb"}};function l(e){return`${o}/${e}`}var u=d(545),c=Object.defineProperty,h=Object.getOwnPropertySymbols,f=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,g=(e,t,r)=>t in e?c(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,y=(e,t)=>{for(var r in t||(t={}))f.call(t,r)&&g(e,r,t[r]);if(h)for(var r of h(t))m.call(t,r)&&g(e,r,t[r]);return e};function b(t,r){const n=y({},u.locationService.getSearchObject());if(r)for(const e of Object.keys(n))r.includes(e)||delete n[e];return e.urlUtil.renderUrl(e.locationUtil.assureBaseUrl(t),n)}function v(e,t){return r().createElement(e.Component,{model:e,routeProps:t})}Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;const w=new Map;var S=d(177);const _={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let O;const x=new Uint8Array(16);function C(){if(!O&&(O="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!O))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return O(x)}const P=[];for(let e=0;e<256;++e)P.push((e+256).toString(16).slice(1));const D=function(e,t,r){if(_.randomUUID&&!t&&!e)return _.randomUUID();const n=(e=e||{}).random||(e.rng||C)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){r=r||0;for(let e=0;e<16;++e)t[r+e]=n[e];return t}return function(e,t=0){return P[e[t+0]]+P[e[t+1]]+P[e[t+2]]+P[e[t+3]]+"-"+P[e[t+4]]+P[e[t+5]]+"-"+P[e[t+6]]+P[e[t+7]]+"-"+P[e[t+8]]+P[e[t+9]]+"-"+P[e[t+10]]+P[e[t+11]]+P[e[t+12]]+P[e[t+13]]+P[e[t+14]]+P[e[t+15]]}(n)};var E=Object.defineProperty,R=Object.defineProperties,j=Object.getOwnPropertyDescriptors,T=Object.getOwnPropertySymbols,k=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable,I=(e,t,r)=>t in e?E(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const V=r().memo((function(e){var n,a=e,{model:o}=a,i=((e,t)=>{var r={};for(var n in e)k.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&T)for(var n of T(e))t.indexOf(n)<0&&A.call(e,n)&&(r[n]=e[n]);return r})(a,["model"]);const s=null!=(n=o.constructor.Component)?n:F,[l,u]=r().useState(!1);return(0,t.useEffect)((()=>(u(!0),o.activate())),[o]),l?r().createElement(s,(c=((e,t)=>{for(var r in t||(t={}))k.call(t,r)&&I(e,r,t[r]);if(T)for(var r of T(t))A.call(t,r)&&I(e,r,t[r]);return e})({},i),R(c,j({model:o})))):null;var c}));function F(e){return null}class L extends e.BusEventWithPayload{}L.type="scene-object-state-change";class M extends e.BusEventWithPayload{}M.type="scene-object-user-action";var z,N=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)};class H{constructor(e){var t,r;((e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,void 0)})(this,z),r=e,N(this,t=z,"write to private field"),t.set(this,r)}resolve(){return N(this,e=z,"read from private field"),e.get(this);var e}}z=new WeakMap;var B=Object.defineProperty,U=Object.getOwnPropertySymbols,$=Object.prototype.hasOwnProperty,W=Object.prototype.propertyIsEnumerable,q=(e,t,r)=>t in e?B(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,G=(e,t)=>{for(var r in t||(t={}))$.call(t,r)&&q(e,r,t[r]);if(U)for(var r of U(t))W.call(t,r)&&q(e,r,t[r]);return e};class Q{constructor(t){this._isActive=!1,this._activationHandlers=[],this._deactivationHandlers=new Map,this._subs=new S.Subscription,this._refCount=0,t.key||(t.key=D()),this._events=new e.EventBusSrv,this._state=Object.freeze(t),this._setParent()}get state(){return this._state}get isActive(){return this._isActive}get parent(){return this._parent}get variableDependency(){return this._variableDependency}get urlSync(){return this._urlSync}get Component(){return V}_setParent(){this.forEachChild((e=>{e._parent&&e._parent!==this&&console.warn("SceneObject already has a parent set that is different from the new parent. You cannot share the same SceneObject instance in multiple scenes or in multiple different places of the same scene graph. Use SceneObject.clone() to duplicate a SceneObject or store a state key reference and use sceneGraph.findObject to locate it.",e,this),e._parent=this}))}subscribeToState(e){return this._events.subscribe(L,(t=>{t.payload.changedObject===this&&e(t.payload.newState,t.payload.prevState)}))}subscribeToEvent(e,t){return this._events.subscribe(e,t)}setState(e){const t=this._state,r=G(G({},this._state),e);this._state=Object.freeze(r),this._setParent(),this._handleActivationOfChangedStateProps(t,r),this.publishEvent(new L({prevState:t,newState:r,partialUpdate:e,changedObject:this}),!0)}_handleActivationOfChangedStateProps(e,t){this.isActive&&(e.$data!==t.$data&&this._handleChangedStateActivation(e.$data,t.$data),e.$variables!==t.$variables&&this._handleChangedStateActivation(e.$variables,t.$variables),e.$timeRange!==t.$timeRange&&this._handleChangedStateActivation(e.$timeRange,t.$timeRange))}_handleChangedStateActivation(e,t){if(e){const t=this._deactivationHandlers.get(e);t&&(t(),this._deactivationHandlers.delete(e))}t&&this._deactivationHandlers.set(t,t.activate())}publishEvent(e,t){this._events.publish(e),t&&this.parent&&this.parent.publishEvent(e,t)}getRoot(){return this._parent?this._parent.getRoot():this}_internalActivate(){this._isActive=!0;const{$data:e,$variables:t,$timeRange:r,$behaviors:n}=this.state;if(r&&!r.isActive&&this._deactivationHandlers.set(r,r.activate()),t&&!t.isActive&&this._deactivationHandlers.set(t,t.activate()),e&&!e.isActive&&this._deactivationHandlers.set(e,e.activate()),n)for(const e of n)if(e instanceof Q)this._deactivationHandlers.set(e,e.activate());else if("function"==typeof e){const t=e(this);t&&this._deactivationHandlers.set(e,t)}this._activationHandlers.forEach((e=>{const t=e();t&&this._deactivationHandlers.set(t,t)}))}activate(){this.isActive||this._internalActivate(),this._refCount++;let e=!1;return()=>{if(this._refCount--,e){const e="SceneObject cancelation handler returned by activate() called a second time";throw console.error(e,this),new Error(e)}e=!0,0===this._refCount&&this._internalDeactivate()}}_internalDeactivate(){this._isActive=!1;for(let e of this._deactivationHandlers.values())e();this._deactivationHandlers.clear(),this._events.removeAllListeners(),this._subs.unsubscribe(),this._subs=new S.Subscription}useState(){return function(e){const[r,n]=(0,t.useState)(e.state),a=e.state;return(0,t.useEffect)((()=>{const t=e.subscribeToState(n);return e.state!==a&&n(e.state),()=>t.unsubscribe()}),[e]),e.state}(this)}forceRender(){this.setState({})}clone(e){return function(e,t){const r=function(e,t){const r=ee({},e);for(const e in r){const t=r[e];if(t instanceof Q&&(r[e]=t.clone()),t instanceof H)throw new Error("Cannot clone a SceneObject with a SceneObjectRef in state");if(Array.isArray(t)){const n=[];for(const e of t)e instanceof Q?n.push(e.clone()):n.push(e);r[e]=n}}return Object.assign(r,t),r}(e.state,t);return new e.constructor(r)}(this,e)}addActivationHandler(e){this._activationHandlers.push(e)}forEachChild(e){for(const t of Object.values(this.state))if(t instanceof Q&&e(t),Array.isArray(t))for(const r of t)r instanceof Q&&e(r)}getRef(){return this._ref||(this._ref=new H(this)),this._ref}}var Y=Object.defineProperty,K=Object.getOwnPropertySymbols,X=Object.prototype.hasOwnProperty,Z=Object.prototype.propertyIsEnumerable,J=(e,t,r)=>t in e?Y(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ee=(e,t)=>{for(var r in t||(t={}))X.call(t,r)&&J(e,r,t[r]);if(K)for(var r of K(t))Z.call(t,r)&&J(e,r,t[r]);return e};function te(e,t){let r,n=e;for(;n&&!r;)r=t(n),n=n.parent;return r}const re=new Map;var ne=(e=>(e[e.never=0]="never",e[e.onDashboardLoad=1]="onDashboardLoad",e[e.onTimeRangeChanged=2]="onTimeRangeChanged",e))(ne||{}),ae=(e=>(e.Done="Done",e.Error="Error",e.Loading="Loading",e.NotStarted="NotStarted",e.Streaming="Streaming",e))(ae||{}),oe=(e=>(e[e.Crosshair=1]="Crosshair",e[e.Off=0]="Off",e[e.Tooltip=2]="Tooltip",e))(oe||{}),ie=Object.defineProperty,se=Object.getOwnPropertySymbols,le=Object.prototype.hasOwnProperty,ue=Object.prototype.propertyIsEnumerable,ce=(e,t,r)=>t in e?ie(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const de={state:ae.Done,series:[],timeRange:(0,e.getDefaultTimeRange)()};class pe{constructor(e,t){this._sceneObject=e,this._keys=t.keys}getKeys(){return this._keys}getUrlState(){return this._sceneObject.getUrlState()}updateFromUrl(e){this._sceneObject.updateFromUrl(e)}}const he=/^\d+[yYmMsSwWhHdD]$/;function fe(t){if("string"!=typeof t)return null;if(-1!==t.indexOf("now"))return t;if(he.test(t))return t;if(8===t.length){const r=(0,e.toUtc)(t,"YYYYMMDD");if(r.isValid())return r.toISOString()}else if(15===t.length){const r=(0,e.toUtc)(t,"YYYYMMDDTHHmmss");if(r.isValid())return r.toISOString()}else if(24===t.length)return(0,e.toUtc)(t).toISOString();const r=parseInt(t,10);return isNaN(r)?null:(0,e.toUtc)(r).toISOString()}function me(t,r,n,a){return{from:e.dateMath.parse(t,!1,n,a),to:e.dateMath.parse(r,!0,n,a),raw:{from:t,to:r}}}var ge=Object.defineProperty,ye=Object.getOwnPropertySymbols,be=Object.prototype.hasOwnProperty,ve=Object.prototype.propertyIsEnumerable,we=(e,t,r)=>t in e?ge(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;class Se extends Q{constructor(t={}){var r,n;const a=null!=(r=t.from)?r:"now-6h",o=null!=(n=t.to)?n:"now",i=t.timeZone;super(((e,t)=>{for(var r in t||(t={}))be.call(t,r)&&we(e,r,t[r]);if(ye)for(var r of ye(t))ve.call(t,r)&&we(e,r,t[r]);return e})({from:a,to:o,timeZone:i,value:me(a,o,i||(0,e.getTimeZone)(),t.fiscalYearStartMonth)},t)),this._urlSync=new pe(this,{keys:["from","to"]}),this.onTimeRangeChange=e=>{const t={},r={};"string"==typeof e.raw.from?(t.from=e.raw.from,r.from=e.raw.from):(t.from=e.raw.from.toISOString(),r.from=e.raw.from.toISOString(!0)),"string"==typeof e.raw.to?(t.to=e.raw.to,r.to=e.raw.to):(t.to=e.raw.to.toISOString(),r.to=e.raw.to.toISOString(!0)),t.value=me(r.from,r.to,this.getTimeZone(),this.state.fiscalYearStartMonth),t.from===this.state.from&&t.to===this.state.to||this.setState(t)},this.onTimeZoneChange=e=>{this.setState({timeZone:e})},this.onRefresh=()=>{this.setState({value:me(this.state.from,this.state.to,this.getTimeZone(),this.state.fiscalYearStartMonth)})},this.addActivationHandler(this._onActivate.bind(this))}_onActivate(){if(!this.state.timeZone){const e=this.getTimeZoneSource();e!==this&&this._subs.add(e.subscribeToState(((t,r)=>{void 0!==t.timeZone&&t.timeZone!==r.timeZone&&this.setState({value:me(this.state.from,this.state.to,e.getTimeZone(),this.state.fiscalYearStartMonth)})})))}return this.state.weekStart&&(0,e.setWeekStart)(this.state.weekStart),()=>{this.state.weekStart&&(0,e.setWeekStart)(u.config.bootData.user.weekStart)}}getTimeZoneSource(){if(!this.parent||!this.parent.parent)return this;return te(this.parent.parent,(e=>{if(e.state.$timeRange&&e.state.$timeRange.state.timeZone)return e.state.$timeRange}))||this}getTimeZone(){if(this.state.timeZone)return this.state.timeZone;const t=this.getTimeZoneSource();return t!==this?t.state.timeZone:(0,e.getTimeZone)()}getUrlState(){return{from:this.state.from,to:this.state.to}}updateFromUrl(e){var t,r;if(!e.to&&!e.from)return;const n={},a=fe(e.from);a&&(n.from=a);const o=fe(e.to);o&&(n.to=o),n.value=me(null!=(t=n.from)?t:this.state.from,null!=(r=n.to)?r:this.state.to,this.getTimeZone(),this.state.fiscalYearStartMonth),this.setState(n)}}const _e=new class extends Q{constructor(e){super(((e,t)=>{for(var r in t||(t={}))le.call(t,r)&&ce(e,r,t[r]);if(se)for(var r of se(t))ue.call(t,r)&&ce(e,r,t[r]);return e})({data:de},e))}getResultsStream(){const e={origin:this,data:this.state.data};return(0,S.of)(e)}},Oe=new Se,xe=new class extends Q{constructor(){super({variables:[]})}getByName(e){}isVariableLoadingOrWaitingToUpdate(e){return!1}};function Ce(e){var t;return null!=(t=te(e,(e=>e.state.$timeRange)))?t:Oe}var Pe=(e=>(e.CSV="csv",e.Date="date",e.Distributed="distributed",e.DoubleQuote="doublequote",e.Glob="glob",e.HTML="html",e.JSON="json",e.Lucene="lucene",e.PercentEncode="percentencode",e.Pipe="pipe",e.QueryParam="queryparam",e.Raw="raw",e.Regex="regex",e.SQLString="sqlstring",e.SingleQuote="singlequote",e.Text="text",e.UriEncode="uriencode",e))(Pe||{});class De extends e.BusEventWithPayload{}function Ee(e){return"object"==typeof e&&"formatter"in e}De.type="scene-variable-changed-value";var Re=d(980);let je,Te={};function ke(e){return Te[e]||(Te[e]=(0,Re.property)(e))}class Ae{constructor(e,t){this.state={name:e,value:t,type:"scopedvar"}}getValue(e){let{value:t}=this.state,r=t.value;return r=e?ke(e)(t.value):t.value,"string"===r||"number"===r||"boolean"===r?r:String(r)}getValueText(){const{value:e}=this.state;return null!=e.text?String(e.text):String(e)}}const Ie=new e.Registry((()=>[{id:Pe.Lucene,name:"Lucene",description:"Values are lucene escaped and multi-valued variables generate an OR expression",formatter:e=>"string"==typeof e?Ve(e):Array.isArray(e)?0===e.length?"__empty__":"("+(0,Re.map)(e,(e=>'"'+Ve(e)+'"')).join(" OR ")+")":Ve(`${e}`)},{id:Pe.Raw,name:"raw",description:"Keep value as is",formatter:e=>String(e)},{id:Pe.Regex,name:"Regex",description:"Values are regex escaped and multi-valued variables generate a (<value>|<value>) expression",formatter:t=>{if("string"==typeof t)return(0,e.escapeRegex)(t);if(Array.isArray(t)){const r=t.map((t=>"string"==typeof t?(0,e.escapeRegex)(t):(0,e.escapeRegex)(String(t))));return 1===r.length?r[0]:"("+r.join("|")+")"}return(0,e.escapeRegex)(`${t}`)}},{id:Pe.Pipe,name:"Pipe",description:"Values are separated by | character",formatter:e=>"string"==typeof e?e:Array.isArray(e)?e.join("|"):`${e}`},{id:Pe.Distributed,name:"Distributed",description:"Multiple values are formatted like variable=value",formatter:(e,t,r)=>"string"==typeof e?e:Array.isArray(e)?(e=(0,Re.map)(e,((e,t)=>0!==t?r.state.name+"="+e:e))).join(","):`${e}`},{id:Pe.CSV,name:"Csv",description:"Comma-separated values",formatter:e=>"string"==typeof e?e:(0,Re.isArray)(e)?e.join(","):String(e)},{id:Pe.HTML,name:"HTML",description:"HTML escaping of values",formatter:t=>"string"==typeof t?e.textUtil.escapeHtml(t):(0,Re.isArray)(t)?e.textUtil.escapeHtml(t.join(", ")):e.textUtil.escapeHtml(String(t))},{id:Pe.JSON,name:"JSON",description:"JSON stringify value",formatter:e=>"string"==typeof e?e:JSON.stringify(e)},{id:Pe.PercentEncode,name:"Percent encode",description:"Useful for URL escaping values",formatter:e=>(0,Re.isArray)(e)?Fe("{"+e.join(",")+"}"):Fe(e)},{id:Pe.SingleQuote,name:"Single quote",description:"Single quoted values",formatter:e=>{const t=new RegExp("'","g");if((0,Re.isArray)(e))return(0,Re.map)(e,(e=>`'${(0,Re.replace)(e,t,"\\'")}'`)).join(",");let r="string"==typeof e?e:String(e);return`'${(0,Re.replace)(r,t,"\\'")}'`}},{id:Pe.DoubleQuote,name:"Double quote",description:"Double quoted values",formatter:e=>{const t=new RegExp('"',"g");if((0,Re.isArray)(e))return(0,Re.map)(e,(e=>`"${(0,Re.replace)(e,t,'\\"')}"`)).join(",");let r="string"==typeof e?e:String(e);return`"${(0,Re.replace)(r,t,'\\"')}"`}},{id:Pe.SQLString,name:"SQL string",description:"SQL string quoting and commas for use in IN statements and other scenarios",formatter:He},{id:Pe.Date,name:"Date",description:"Format date in different ways",formatter:(t,r)=>{var n;let a=NaN;if("number"==typeof t?a=t:"string"==typeof t&&(a=parseInt(t,10)),isNaN(a))return"NaN";const o=null!=(n=r[0])?n:"iso";switch(o){case"ms":return String(t);case"seconds":return`${Math.round(a/1e3)}`;case"iso":return(0,e.dateTime)(a).toISOString();default:return(r||[]).length>1?(0,e.dateTime)(a).format(r.join(":")):(0,e.dateTime)(a).format(o)}}},{id:Pe.Glob,name:"Glob",description:"Format multi-valued variables using glob syntax, example {value1,value2}",formatter:e=>(0,Re.isArray)(e)&&e.length>1?"{"+e.join(",")+"}":String(e)},{id:Pe.Text,name:"Text",description:"Format variables in their text representation. Example in multi-variable scenario A + B + C.",formatter:(e,t,r)=>r.getValueText?r.getValueText():String(e)},{id:Pe.QueryParam,name:"Query parameter",description:"Format variables as URL parameters. Example in multi-variable scenario A + B + C => var-foo=A&var-foo=B&var-foo=C.",formatter:(e,t,r)=>Array.isArray(e)?e.map((e=>ze(r.state.name,e))).join("&"):ze(r.state.name,e)},{id:Pe.UriEncode,name:"Percent encode as URI",description:"Useful for URL escaping values, taking into URI syntax characters",formatter:e=>(0,Re.isArray)(e)?Le("{"+e.join(",")+"}"):Le(e)}]));function Ve(e){return!1===isNaN(+e)?e:e.replace(/([\!\*\+\-\=<>\s\&\|\(\)\[\]\{\}\^\~\?\:\\/"])/g,"\\$1")}function Fe(e){return"object"==typeof e&&(e=String(e)),Me(encodeURIComponent(e))}const Le=e=>Me(encodeURI(String(e))),Me=e=>e.replace(/[!'()*]/g,(e=>"%"+e.charCodeAt(0).toString(16).toUpperCase()));function ze(e,t){return`var-${e}=${Fe(t)}`}const Ne={"'":"''",'"':'\\"'};function He(e){const t=new RegExp("'|\"","g");if((0,Re.isArray)(e))return(0,Re.map)(e,(e=>`'${(0,Re.replace)(e,t,(e=>{var t;return null!=(t=Ne[e])?t:""}))}'`)).join(",");let r="string"==typeof e?e:String(e);return`'${(0,Re.replace)(r,t,(e=>{var t;return null!=(t=Ne[e])?t:""}))}'`}const Be="All",Ue="$__all",$e="$__auto",We=/\$(\w+)|\[\[(\w+?)(?::(\w+))?\]\]|\${(\w+)(?:\.([^:^\}]+))?(?::([^\}]+))?}/g;function qe(e,t){const r=t.state.$variables;if(!r)return t.parent?qe(e,t.parent):null;return r.getByName(e)||(t.parent?qe(e,t.parent):null)}class Ge extends Q{constructor(e){super(e),this.addActivationHandler((()=>this._onActivate()))}_onActivate(){const{layers:e}=this.state,t=[];for(const r of e)t.push(r.activate());return()=>{t.forEach((e=>e()))}}}function Qe(e){var t;return null!=(t=te(e,(e=>e.state.$data)))?t:_e}function Ye(e,t,r,n){if(t(e))return e;let a=null;return e.forEachChild((e=>{if(e===r)return;let n=Ye(e,t);n&&(a=n)})),a||(n&&e.parent?Ye(e.parent,t,e,!0):null)}class Ke{constructor(e){this._value=e}formatter(){return this._value}}class Xe{constructor(e,t){this.state={name:e,type:"time_macro"},this._sceneObject=t}getValue(){const e=Ce(this._sceneObject);return"__from"===this.state.name?e.state.value.from.valueOf():e.state.value.to.valueOf()}getValueText(){const t=Ce(this._sceneObject);return"__from"===this.state.name?(0,e.dateTimeFormat)(t.state.value.from,{timeZone:t.getTimeZone()}):(0,e.dateTimeFormat)(t.state.value.to,{timeZone:t.getTimeZone()})}}class Ze{constructor(e,t){this.state={name:e,type:"time_macro"},this._sceneObject=t}getValue(){var e;const t=Qe(this._sceneObject);if(t){const r=null==(e=t.state.data)?void 0:e.request;return r?"__interval_ms"===this.state.name?r.intervalMs:r.interval:`\${${this.state.name}}`}return`\${${this.state.name}}`}}function Je(e,t={}){if(e.state.$variables)for(const r of e.state.$variables.state.variables)r.state.skipUrlSync||t[r.state.name]||(t[r.state.name]=r);return e.parent&&Je(e.parent,t),t}var et=Object.defineProperty,tt=Object.defineProperties,rt=Object.getOwnPropertyDescriptors,nt=Object.getOwnPropertySymbols,at=Object.prototype.hasOwnProperty,ot=Object.prototype.propertyIsEnumerable,it=(e,t,r)=>t in e?et(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const st=(0,e.getDisplayProcessor)();class lt{constructor(e){this._urlQueryParams=e}formatter(e){if(!e)return this._urlQueryParams;const t=e.split(":");if("exclude"===t[0]&&t.length>1){const e=new URLSearchParams(this._urlQueryParams);for(const r of t[1].split(","))e.delete(r);return`?${e}`}if("include"===t[0]&&t.length>1){const e=new URLSearchParams(this._urlQueryParams),r=t[1].split(",");for(const t of e.keys())r.includes(t)||e.delete(t);return`?${e}`}return this._urlQueryParams}}const ut={[e.DataLinkBuiltInVars.includeVars]:class{constructor(e,t){this.state={name:e,type:"url_variable"},this._sceneObject=t}getValue(){const e=Je(this._sceneObject),t=Ie.get(Pe.QueryParam),r=[];for(const n of Object.keys(e)){const a=e[n],o=a.getValue();o&&(Ee(o)?r.push(o.formatter(Pe.QueryParam)):r.push(t.formatter(o,[],a)))}return new Ke(r.join("&"))}getValueText(){return""}},[e.DataLinkBuiltInVars.keepTime]:class{constructor(e,t){this.state={name:e,type:"url_variable"},this._sceneObject=t}getValue(){var t;const r=null==(t=Ce(this._sceneObject).urlSync)?void 0:t.getUrlState();return new Ke(e.urlUtil.toUrlParams(r))}getValueText(){return""}},__value:class{constructor(e,t,r,n){this._match=r,this._scopedVars=n,this.state={name:e,type:"__value"}}getValue(t){var r,n;const a=null==(r=this._scopedVars)?void 0:r.__dataContext;if(!a)return this._match;const{frame:o,rowIndex:i,field:s,calculatedValue:l}=a.value;if(l)switch(t){case"numeric":case"raw":return l.numeric;case"time":return"";default:return(0,e.formattedValueToString)(l)}if(null==i)return this._match;if("time"===t){const t=o.fields.find((t=>t.type===e.FieldType.time));return t?t.values.get(i):void 0}if(!s)return this._match;const u=s.values.get(i);if("raw"===t)return u;const c=(null!=(n=s.display)?n:st)(u);return"numeric"===t?c.numeric:(0,e.formattedValueToString)(c)}getValueText(){return""}},__data:class{constructor(e,t,r,n){this._match=r,this._scopedVars=n,this.state={name:e,type:"__data"}}getValue(t){var r,n;const a=null==(r=this._scopedVars)?void 0:r.__dataContext;if(!a||!t)return this._match;const{frame:o,rowIndex:i}=a.value;if(void 0===i||void 0===t)return this._match;const s={name:o.name,refId:o.refId,fields:(0,e.getFieldDisplayValuesProxy)({frame:o,rowIndex:i})};return null!=(n=ke(t)(s))?n:""}getValueText(){return""}},__series:class{constructor(e,t,r,n){this._match=r,this._scopedVars=n,this.state={name:e,type:"__series"}}getValue(t){var r;const n=null==(r=this._scopedVars)?void 0:r.__dataContext;if(!n||!t)return this._match;if("name"!==t)return this._match;const{frame:a,frameIndex:o}=n.value;return(0,e.getFrameDisplayName)(a,o)}getValueText(){return""}},__field:class{constructor(e,t,r,n){this._match=r,this._scopedVars=n,this.state={name:e,type:"__field"}}getValue(t){var r,n;const a=null==(r=this._scopedVars)?void 0:r.__dataContext;if(!a||!t)return this._match;if(void 0===t||""===t)return this._match;const{frame:o,field:i,data:s}=a.value,l=function(t,r,n){return new Proxy({},{get:(a,o)=>{return"name"===o?t.name:"displayName"===o?(0,e.getFieldDisplayName)(t,r,n):"labels"===o||"formattedLabels"===o?t.labels?(i=((e,t)=>{for(var r in t||(t={}))at.call(t,r)&&it(e,r,t[r]);if(nt)for(var r of nt(t))ot.call(t,r)&&it(e,r,t[r]);return e})({},t.labels),s={__values:Object.values(t.labels).sort().join(", "),toString:()=>(0,e.formatLabels)(t.labels,"",!0)},tt(i,rt(s))):"":void 0;var i,s}})}(i,o,s);return null!=(n=ke(t)(l))?n:""}getValueText(){return""}},__url:class{constructor(e,t){this.state={name:e,type:"url_macro"}}getValue(e){var t;const r=u.locationService.getLocation(),n=null!=(t=u.config.appSubUrl)?t:"";switch(null!=e?e:""){case"params":return new lt(r.search);case"path":return n+r.pathname;default:return n+r.pathname+r.search}}getValueText(){return""}},__from:Xe,__to:Xe,__timezone:class{constructor(e,t){this.state={name:e,type:"time_macro"},this._sceneObject=t}getValue(){return Ce(this._sceneObject).getTimeZone()}getValueText(){return this.getValue()}},__user:class{constructor(e,t){this.state={name:e,type:"user_macro"}}getValue(e){const t=u.config.bootData.user;switch(e){case"login":return t.login;case"email":return t.email;default:return String(t.id)}}getValueText(){return""}},__org:class{constructor(e,t){this.state={name:e,type:"org_macro"}}getValue(e){const t=u.config.bootData.user;return"name"===e?t.orgName:String(t.orgId)}getValueText(){return""}},__interval:Ze,__interval_ms:Ze},ct={getVariables:function(e){var t;return null!=(t=te(e,(e=>e.state.$variables)))?t:xe},getData:Qe,getTimeRange:Ce,getLayout:function(e){return te(e,(e=>function(e){return"isDraggable"in e}(e)?e:void 0))||null},getDataLayers:function(e,t=!1){let r,n=e,a=[];for(;n&&(!n.state.$data||n.state.$data instanceof Ge||n.state.$data.state.$data instanceof Ge&&(r=n.state.$data.state.$data),n.state.$data&&n.state.$data instanceof Ge&&(r=n.state.$data),!r||(a=a.concat(r.state.layers),!t));)n=n.parent;return a},interpolate:function(e,t,r,n){return""===t||null==t?"":function(e,t,r,n){return t?(We.lastIndex=0,t.replace(We,((t,a,o,i,s,l,u)=>{const c=i||u||n,d=function(e,t,r,n){const a=null==r?void 0:r[e];if(a)return function(e,t){return je?(je.state.name=e,je.state.value=t):je=new Ae(e,t),je}(e,a);return qe(e,n)||(ut[e]?new ut[e](e,n,t,r):null)}(a||o||s,t,r,e);return d?function(e,t,r){if(null==t)return"";if(Ee(t))return t.formatter(r);if(Array.isArray(t)||"object"!=typeof t||(t=`${t}`),"function"==typeof r)return r(t,{name:e.state.name,type:e.state.type,multi:e.state.isMulti,includeAll:e.state.includeAll});let n=[];r?(n=r.split(":"),n.length>1?(r=n[0],n=n.slice(1)):n=[]):r=Pe.Glob;let a=Ie.getIfExists(r);return a||(console.error(`Variable format ${r} not found. Using glob format as fallback.`),a=Ie.get(Pe.Glob)),a.formatter(t,n,e)}(d,d.getValue(l),c):t}))):null!=t?t:""}(e,t,r,n)},lookupVariable:qe,hasVariableDependencyInLoadingState:function(e){if(!e.variableDependency)return!1;for(const t of e.variableDependency.getNames()){const r=qe(t,e);if(r&&r.parent.isVariableLoadingOrWaitingToUpdate(r))return!0}return!1},findObject:function(e,t){return Ye(e,t,void 0,!0)},getAncestor:function(e,t){let r=e;for(;r;){if(r instanceof t)return r;r=r.parent}throw new Error("Unable to find parent of type "+t.name)}};function dt(e,t){return e===t||(0,Re.isEqual)(e,t)}function pt(e){try{return JSON.stringify(e,null)}catch(e){console.error(e)}return""}class ht{constructor(e,t){this._sceneObject=e,this._options=t,this._dependencies=new Set,this.scanCount=0,this.defaultHandlerReferencedVariableValueChanged=()=>{this._sceneObject.forceRender()},this._statePaths=t.statePaths}hasDependencyOn(e){return this.getNames().has(e)}variableUpdatesCompleted(e){const t=this.getNames();let r=!1;for(const n of e)if(t.has(n.state.name)){r=!0;break}this._options.onVariableUpdatesCompleted?this._options.onVariableUpdatesCompleted(e,r):r&&(this._options.onReferencedVariableValueChanged?this._options.onReferencedVariableValueChanged():this.defaultHandlerReferencedVariableValueChanged())}getNames(){const e=this._state,t=this._state=this._sceneObject.state;if(!e)return this.scanStateForDependencies(this._state),this._dependencies;if(t!==e)if(this._statePaths){for(const r of this._statePaths)if(t[r]!==e[r]){this.scanStateForDependencies(t);break}}else this.scanStateForDependencies(t);return this._dependencies}setPaths(e){this._statePaths=e}scanStateForDependencies(e){if(this._dependencies.clear(),this.scanCount+=1,this._options.variableNames)for(const e of this._options.variableNames)this._dependencies.add(e);else if(this._statePaths)for(const t of this._statePaths){const r=e[t];r&&this.extractVariablesFrom(r)}else this.extractVariablesFrom(e)}extractVariablesFrom(e){We.lastIndex=0;const t=("string"!=typeof e?pt(e):e).matchAll(We);if(t)for(const e of t){const[,t,r,,n]=e,a=t||r||n;this._dependencies.add(a)}}}var ft=Object.defineProperty,mt=Object.defineProperties,gt=Object.getOwnPropertyDescriptors,yt=Object.getOwnPropertySymbols,bt=Object.prototype.hasOwnProperty,vt=Object.prototype.propertyIsEnumerable,wt=(e,t,r)=>t in e?ft(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;class St extends Q{constructor(e){var t,r;super((t=((e,t)=>{for(var r in t||(t={}))bt.call(t,r)&&wt(e,r,t[r]);if(yt)for(var r of yt(t))vt.call(t,r)&&wt(e,r,t[r]);return e})({},e),r={sync:e.sync||oe.Off},mt(t,gt(r)))),this.getEventsBus=e=>{if(!this.parent)throw new Error("EnableCursorSync cannot be used as a standalone scene object");return new _t(this.parent,e)}}getEventsScope(){if(!this.parent)throw new Error("EnableCursorSync cannot be used as a standalone scene object");return this.state.key}}class _t{constructor(e,t){this._source=e,this._eventsOrigin=t}publish(e){e.origin=this,this._eventsOrigin.publishEvent(e,!0)}getStream(e){return new S.Observable((t=>{const r=this._source.subscribeToEvent(e,(e=>{t.next(e)}));return()=>r.unsubscribe()}))}subscribe(e,t){return this.getStream(e).pipe().subscribe(t)}removeAllListeners(){}newScopedBus(e,t){throw new Error("For internal use only")}}async function Ot(e,t){if(null==e?void 0:e.uid){const t=re.get(e.uid);if(t)return t}return e&&e.query?e:await(0,u.getDataSourceSrv)().get(e,t)}class xt{constructor(){this._values=new Map}recordCurrentDependencyValuesForSceneObject(e){if(this.clearValues(),e.variableDependency)for(const t of e.variableDependency.getNames()){const r=ct.lookupVariable(t,e);r&&this._values.set(r,r.getValue())}}clearValues(){this._values.clear()}hasValues(){return!!this._values}recordCurrentValue(e){this._values.set(e,e.getValue())}hasRecordedValue(e){return this._values.has(e)}hasValueChanged(e){return!(!this._values.has(e)||dt(this._values.get(e),e.getValue()))}hasDependenciesChanged(e){if(!this._values)return!1;if(!e.variableDependency)return!1;for(const t of e.variableDependency.getNames()){const r=ct.lookupVariable(t,e);if(r&&this._values.has(r)&&!dt(this._values.get(r),r.getValue()))return!0}return!1}}function Ct(e){return"function"==typeof e}Object.defineProperty,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;var Pt=function(e,t){return Pt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},Pt(e,t)};function Dt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}Pt(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}function Et(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Rt(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,a,o=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)i.push(n.value)}catch(e){a={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(a)throw a.error}}return i}function jt(e,t,r){if(r||2===arguments.length)for(var n,a=0,o=t.length;a<o;a++)!n&&a in t||(n||(n=Array.prototype.slice.call(t,0,a)),n[a]=t[a]);return e.concat(n||Array.prototype.slice.call(t))}Object.create,Object.create,"function"==typeof SuppressedError&&SuppressedError;var Tt,kt=((Tt=function(e){var t;t=this,Error.call(t),t.stack=(new Error).stack,this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e}).prototype=Object.create(Error.prototype),Tt.prototype.constructor=Tt,Tt);function At(e,t){if(e){var r=e.indexOf(t);0<=r&&e.splice(r,1)}}var It=function(){function e(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}var t;return e.prototype.unsubscribe=function(){var e,t,r,n,a;if(!this.closed){this.closed=!0;var o=this._parentage;if(o)if(this._parentage=null,Array.isArray(o))try{for(var i=Et(o),s=i.next();!s.done;s=i.next())s.value.remove(this)}catch(t){e={error:t}}finally{try{s&&!s.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}else o.remove(this);var l=this.initialTeardown;if(Ct(l))try{l()}catch(e){a=e instanceof kt?e.errors:[e]}var u=this._finalizers;if(u){this._finalizers=null;try{for(var c=Et(u),d=c.next();!d.done;d=c.next()){var p=d.value;try{Ft(p)}catch(e){a=null!=a?a:[],e instanceof kt?a=jt(jt([],Rt(a)),Rt(e.errors)):a.push(e)}}}catch(e){r={error:e}}finally{try{d&&!d.done&&(n=c.return)&&n.call(c)}finally{if(r)throw r.error}}}if(a)throw new kt(a)}},e.prototype.add=function(t){var r;if(t&&t!==this)if(this.closed)Ft(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(r=this._finalizers)&&void 0!==r?r:[]).push(t)}},e.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},e.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},e.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&At(t,e)},e.prototype.remove=function(t){var r=this._finalizers;r&&At(r,t),t instanceof e&&t._removeParent(this)},e.EMPTY=((t=new e).closed=!0,t),e}();function Vt(e){return e instanceof It||e&&"closed"in e&&Ct(e.remove)&&Ct(e.add)&&Ct(e.unsubscribe)}function Ft(e){Ct(e)?e():e.unsubscribe()}It.EMPTY;var Lt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Mt={setTimeout:function(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var a=Mt.delegate;return(null==a?void 0:a.setTimeout)?a.setTimeout.apply(a,jt([e,t],Rt(r))):setTimeout.apply(void 0,jt([e,t],Rt(r)))},clearTimeout:function(e){var t=Mt.delegate;return((null==t?void 0:t.clearTimeout)||clearTimeout)(e)},delegate:void 0};function zt(){}var Nt=Ht("C",void 0,void 0);function Ht(e,t,r){return{kind:e,value:t,error:r}}var Bt=null,Ut=function(e){function t(t){var r=e.call(this)||this;return r.isStopped=!1,t?(r.destination=t,Vt(t)&&t.add(r)):r.destination=Kt,r}return Dt(t,e),t.create=function(e,t,r){return new Gt(e,t,r)},t.prototype.next=function(e){this.isStopped?Yt(function(e){return Ht("N",e,void 0)}(e),this):this._next(e)},t.prototype.error=function(e){this.isStopped?Yt(Ht("E",void 0,e),this):(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped?Yt(Nt,this):(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(It),$t=Function.prototype.bind;function Wt(e,t){return $t.call(e,t)}var qt=function(){function e(e){this.partialObserver=e}return e.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(e){Qt(e)}},e.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(e){Qt(e)}else Qt(e)},e.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(e){Qt(e)}},e}(),Gt=function(e){function t(t,r,n){var a,o,i=e.call(this)||this;return Ct(t)||!t?a={next:null!=t?t:void 0,error:null!=r?r:void 0,complete:null!=n?n:void 0}:i&&Lt.useDeprecatedNextContext?((o=Object.create(t)).unsubscribe=function(){return i.unsubscribe()},a={next:t.next&&Wt(t.next,o),error:t.error&&Wt(t.error,o),complete:t.complete&&Wt(t.complete,o)}):a=t,i.destination=new qt(a),i}return Dt(t,e),t}(Ut);function Qt(e){var t;Lt.useDeprecatedSynchronousErrorHandling?(t=e,Lt.useDeprecatedSynchronousErrorHandling&&Bt&&(Bt.errorThrown=!0,Bt.error=t)):function(e){Mt.setTimeout((function(){var t=Lt.onUnhandledError;if(!t)throw e;t(e)}))}(e)}function Yt(e,t){var r=Lt.onStoppedNotification;r&&Mt.setTimeout((function(){return r(e,t)}))}var Kt={closed:!0,next:zt,error:function(e){throw e},complete:zt};!function(e){function t(t,r,n,a,o,i){var s=e.call(this,t)||this;return s.onFinalize=o,s.shouldUnsubscribe=i,s._next=r?function(e){try{r(e)}catch(e){t.error(e)}}:e.prototype._next,s._error=a?function(e){try{a(e)}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._error,s._complete=n?function(){try{n()}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._complete,s}Dt(t,e),t.prototype.unsubscribe=function(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var r=this.closed;e.prototype.unsubscribe.call(this),!r&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}}}(Ut);var Xt="function"==typeof Symbol&&Symbol.observable||"@@observable";function Zt(e){return e}function Jt(e){var t;return null!==(t=null!=e?e:Lt.Promise)&&void 0!==t?t:Promise}!function(){function e(e){e&&(this._subscribe=e)}e.prototype.lift=function(t){var r=new e;return r.source=this,r.operator=t,r},e.prototype.subscribe=function(e,t,r){var n,a=this,o=(n=e)&&n instanceof Ut||function(e){return e&&Ct(e.next)&&Ct(e.error)&&Ct(e.complete)}(n)&&Vt(n)?e:new Gt(e,t,r);return function(e){if(Lt.useDeprecatedSynchronousErrorHandling){var t=!Bt;if(t&&(Bt={errorThrown:!1,error:null}),e(),t){var r=Bt,n=r.errorThrown,a=r.error;if(Bt=null,n)throw a}}else e()}((function(){var e=a,t=e.operator,r=e.source;o.add(t?t.call(o,r):r?a._subscribe(o):a._trySubscribe(o))})),o},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.error(t)}},e.prototype.forEach=function(e,t){var r=this;return new(t=Jt(t))((function(t,n){var a=new Gt({next:function(t){try{e(t)}catch(e){n(e),a.unsubscribe()}},error:n,complete:t});r.subscribe(a)}))},e.prototype._subscribe=function(e){var t;return null===(t=this.source)||void 0===t?void 0:t.subscribe(e)},e.prototype[Xt]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return(0===(r=e).length?Zt:1===r.length?r[0]:function(e){return r.reduce((function(e,t){return t(e)}),e)})(this);var r},e.prototype.toPromise=function(e){var t=this;return new(e=Jt(e))((function(e,r){var n;t.subscribe((function(e){return n=e}),(function(e){return r(e)}),(function(){return e(n)}))}))},e.create=function(t){return new e(t)}}(),"function"==typeof Symbol&&Symbol.iterator&&Symbol.iterator,Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;function er(e,t,...r){window.grafanaSceneLogging&&console.log(`${e}: `,t,...r)}u.config.isPublicDashboardView,Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable,Object.defineProperty,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable,Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable,Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;var tr=d(388),rr=d(644),nr=Object.defineProperty,ar=Object.getOwnPropertySymbols,or=Object.prototype.hasOwnProperty,ir=Object.prototype.propertyIsEnumerable,sr=(e,t,r)=>t in e?nr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const lr="__previousPeriod",ur="__noPeriod",cr={label:"Previous period",value:lr},dr={label:"No comparison",value:ur},pr=[{label:"Day before",value:"24h"},{label:"Week before",value:"1w"},{label:"Month before",value:"1M"}];class hr extends Q{constructor(t){super(((e,t)=>{for(var r in t||(t={}))or.call(t,r)&&sr(e,r,t[r]);if(ar)for(var r of ar(t))ir.call(t,r)&&sr(e,r,t[r]);return e})({compareOptions:pr},t)),this._urlSync=new pe(this,{keys:["compareWith"]}),this._onActivate=()=>{const e=ct.getTimeRange(this);this.setState({compareOptions:this.getCompareOptions(e.state.value)}),this._subs.add(e.subscribeToState((e=>{const t=this.getCompareOptions(e.value),r={compareOptions:t};Boolean(this.state.compareWith)&&!t.find((({value:e})=>e===this.state.compareWith))&&(r.compareWith=lr),this.setState(r)})))},this.getCompareOptions=t=>{const r=Math.ceil(t.to.diff(t.from)),n=pr.findIndex((({value:t})=>e.rangeUtil.intervalToMs(t)>=r));return[dr,cr,...pr.slice(n).map((({label:e,value:t})=>({label:e,value:t})))]},this.onCompareWithChanged=e=>{e===ur?this.onClearCompare():this.setState({compareWith:e})},this.onClearCompare=()=>{this.setState({compareWith:void 0})},this.addActivationHandler(this._onActivate)}getCompareTimeRange(t){let r,n;if(this.state.compareWith){if(this.state.compareWith===lr){const a=t.to.diff(t.from);r=(0,e.dateTime)(t.from).subtract(a),n=(0,e.dateTime)(t.to).subtract(a)}else r=(0,e.dateTime)(t.from).subtract(e.rangeUtil.intervalToMs(this.state.compareWith)),n=(0,e.dateTime)(t.to).subtract(e.rangeUtil.intervalToMs(this.state.compareWith));return{from:r,to:n,raw:{from:r,to:n}}}}getUrlState(){return{compareWith:this.state.compareWith}}updateFromUrl(e){if(!e.compareWith)return;const t=fe(e.compareWith);t&&(this.getCompareOptions(ct.getTimeRange(this).state.value).find((({value:e})=>e===t))?this.setState({compareWith:t}):this.setState({compareWith:"__previousPeriod"}))}}function fr(e){return{previewButton:(0,rr.css)({"&:disabled":{border:`1px solid ${e.colors.secondary.border}`,color:e.colors.text.disabled,opacity:1}})}}hr.Component=function({model:e}){var t;const n=(0,tr.useStyles2)(fr),{compareWith:a,compareOptions:o}=e.useState(),[i,s]=r().useState(a),l=null!=(t=o.find((({value:e})=>e===i)))?t:cr,u=o.find((({value:e})=>e===a)),c=Boolean(u),d=()=>{c?(s(a),e.onClearCompare()):c||e.onCompareWithChanged(l.value)};return r().createElement(tr.ButtonGroup,null,r().createElement(tr.ToolbarButton,{variant:"canvas",tooltip:"Enable time frame comparison",onClick:e=>{e.stopPropagation(),e.preventDefault(),d()}},r().createElement(tr.Checkbox,{label:" ",value:c,onClick:d}),"Comparison"),c?r().createElement(tr.ButtonSelect,{variant:"canvas",value:u,options:o,onChange:t=>{e.onCompareWithChanged(t.value)}}):r().createElement(tr.ToolbarButton,{className:n.previewButton,disabled:!0,variant:"canvas",isOpen:!1},l.label))};const mr=e=>`${e}-compare`;var gr=Object.defineProperty,yr=Object.defineProperties,br=Object.getOwnPropertyDescriptors,vr=Object.getOwnPropertySymbols,wr=Object.prototype.hasOwnProperty,Sr=Object.prototype.propertyIsEnumerable,_r=(e,t,r)=>t in e?gr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Or=(e,t)=>{for(var r in t||(t={}))wr.call(t,r)&&_r(e,r,t[r]);if(vr)for(var r of vr(t))Sr.call(t,r)&&_r(e,r,t[r]);return e},xr=(e,t)=>yr(e,br(t));function Cr(t){return t.pipe((0,S.map)((([t,r])=>{const n=r.timeRange.from.diff(t.timeRange.from);return r.series.forEach((t=>{t.refId=mr(t.refId||""),t.meta=xr(Or({},t.meta),{timeCompare:{diffMs:n,isTimeShiftQuery:!0}}),t.fields.forEach((t=>(t.type===e.FieldType.time&&(t.values=t.values.map((e=>n<0?e-n:e+n))),t.config=xr(Or({},t.config),{color:{mode:"fixed",fixedColor:u.config.theme.palette.gray60}}),t)))})),xr(Or({},t),{series:[...t.series,...r.series]})})))}var Pr=Object.defineProperty,Dr=Object.defineProperties,Er=Object.getOwnPropertyDescriptors,Rr=Object.getOwnPropertySymbols,jr=Object.prototype.hasOwnProperty,Tr=Object.prototype.propertyIsEnumerable,kr=(e,t,r)=>t in e?Pr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Ar=(e,t)=>{for(var r in t||(t={}))jr.call(t,r)&&kr(e,r,t[r]);if(Rr)for(var r of Rr(t))Tr.call(t,r)&&kr(e,r,t[r]);return e},Ir=(e,t)=>Dr(e,Er(t));function Vr(e){return void 0!==e.useState}function Fr(e){return"enrichDataRequest"in e}let Lr,Mr=new Set;var zr=Object.defineProperty,Nr=Object.defineProperties,Hr=Object.getOwnPropertyDescriptors,Br=Object.getOwnPropertySymbols,Ur=Object.prototype.hasOwnProperty,$r=Object.prototype.propertyIsEnumerable,Wr=(e,t,r)=>t in e?zr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,qr=(e,t)=>{for(var r in t||(t={}))Ur.call(t,r)&&Wr(e,r,t[r]);if(Br)for(var r of Br(t))$r.call(t,r)&&Wr(e,r,t[r]);return e},Gr=(e,t)=>Nr(e,Hr(t));let Qr=100;function Yr(){return"SQR"+Qr++}class Kr extends Q{constructor(t){super(t),this._variableValueRecorder=new xt,this._results=new S.ReplaySubject,this._scopedVars={__sceneObject:{value:this,text:"__sceneObject"}},this._variableDependency=new ht(this,{statePaths:["queries","datasource"],onVariableUpdatesCompleted:(e,t)=>this.onVariableUpdatesCompleted(e,t)}),this.prepareRequests=(t,r)=>{const n=this.getTimeCompare(),{minInterval:a,queries:o}=this.state;let i,s=qr({app:"scenes",requestId:Yr(),timezone:t.getTimeZone(),panelId:1,range:t.state.value,interval:"1s",intervalMs:1e3,targets:(0,Re.cloneDeep)(o),maxDataPoints:this.getMaxDataPoints(),scopedVars:this._scopedVars,startTime:Date.now(),liveStreaming:this.state.liveStreaming,rangeRaw:{from:t.state.from,to:t.state.to}},function(e){const t=e.getRoot();return Fr(t)?t.enrichDataRequest(e):null}(this));this._adhocFilterSet&&(s.filters=this._adhocFilterSet.state.filters),s.targets=s.targets.map((e=>(e.datasource||(e.datasource=r.getRef()),e)));const l=a||r.interval,u=e.rangeUtil.calculateInterval(t.state.value,s.maxDataPoints,l);s.scopedVars=Object.assign({},s.scopedVars,{__interval:{text:u.interval,value:u.interval},__interval_ms:{text:u.intervalMs.toString(),value:u.intervalMs}}),s.interval=u.interval,s.intervalMs=u.intervalMs;const c=t.state.value;if(n){const e=n.getCompareTimeRange(c);e&&(i=Gr(qr({},s),{range:e,requestId:Yr()}),s=Gr(qr({},s),{range:c}))}return[s,i]},this.onDataReceived=t=>{this._results.next({origin:this,data:t});const r=(0,e.preProcessPanelData)(t,this.state.data),n=this._combineDataLayers(r);let a=this.state._hasFetchedData;a||r.state===ae.Loading||(a=!0),this.setState({data:n,_hasFetchedData:a})},this.addActivationHandler((()=>this._onActivate()))}getResultsStream(){return this._results}_onActivate(){const e=ct.getTimeRange(this),t=this.getTimeCompare();return t&&this._subs.add(t.subscribeToState(((e,t)=>{e.compareWith!==t.compareWith&&this.runQueries()}))),this._subs.add(e.subscribeToState((()=>{this.runWithTimeRange(e)}))),this.shouldRunQueriesOnActivate()&&this.runQueries(),()=>this._onDeactivate()}_handleDataLayers(){const e=ct.getDataLayers(this),t=[],r=new Map;e.length>0&&(e.forEach((e=>{t.push(e.getResultsStream())})),this._dataLayersSub=(0,S.merge)(t).pipe((0,S.mergeAll)(),(0,S.map)((e=>(r.set(e.origin.state.key,e.data),r)))).subscribe((e=>{this._onLayersReceived(e)})))}_onLayersReceived(t){var r;const n=ct.getTimeRange(this),a=ct.getDataLayers(this),{dataLayerFilter:o}=this.state;let i,s=[],l=[];const u=Array.from(t.keys());if(Array.from(t.values()).forEach(((t,r)=>{const n=u[r],o=a.find((e=>e.state.key===n));o&&(o.topic===e.DataTopic.Annotations&&t[e.DataTopic.Annotations]&&(s=s.concat(t[e.DataTopic.Annotations])),"alertStates"===o.topic&&(l=l.concat(t.series)))})),(null==o?void 0:o.panelId)&&(s.length>0&&(s=function(e,t){var r;if(!Array.isArray(e)||0===e.length)return e;const n=Array.from({length:e.length},(()=>new Set));let a=0;for(const o of e){for(let e=0;e<o.length;e++){if(n[a].has(e))continue;let i=!0;const s=o.fields.find((e=>"panelId"===e.name)),l=o.fields.find((e=>"source"===e.name));if(l){s&&"dashboard"===l.values[e].type&&(i=s.values[e]===t.panelId);const n=l.values[e].filter;if(n){const e=(null!=(r=n.ids)?r:[]).includes(t.panelId);n.exclude?e&&(i=!1):e||(i=!1)}}i&&n[a].add(e)}a++}const o=[];a=0;for(const t of e){const e=n[a].size,r=[];for(const e of t.fields){const o=[];for(let r=0;r<t.length;r++)n[a].has(r)&&o.push(e.values[r]);r.push(Ir(Ar({},e),{values:o}))}o.push(Ir(Ar({},t),{fields:r,length:e})),a++}return o}(s,o)),l.length>0))for(const t of l){const r=new e.DataFrameView(t);for(const e of r)if(e.panelId===o.panelId){i=e;break}}const c=this.state.data?this.state.data:Gr(qr({},de),{timeRange:n.state.value});this.setState({data:Gr(qr({},c),{annotations:s,alertState:null!=i?i:null==(r=this.state.data)?void 0:r.alertState})})}onVariableUpdatesCompleted(e,t){(this.state._isWaitingForVariables||t)&&this.runQueries()}shouldRunQueriesOnActivate(){return!(!this.state.maxDataPoints&&this.state.maxDataPointsFromWidth&&!this._containerWidth||(this._variableValueRecorder.hasDependenciesChanged(this)?(er("SceneQueryRunner","Variable dependency changed while inactive, shouldRunQueriesOnActivate returns true"),0):this.state.data&&!this._isDataTimeRangeStale(this.state.data)))}_isDataTimeRangeStale(e){const t=ct.getTimeRange(this).state.value,r=e.timeRange;return(t.from.unix()!==r.from.unix()||t.to.unix()!==r.to.unix())&&(er("SceneQueryRunner","Data time range is stale"),!0)}_onDeactivate(){this._querySub&&(this._querySub.unsubscribe(),this._querySub=void 0),this._dataLayersSub&&(this._dataLayersSub.unsubscribe(),this._dataLayersSub=void 0),this._adhocFilterSub&&this._adhocFilterSub.unsubscribe(),this._variableValueRecorder.recordCurrentDependencyValuesForSceneObject(this)}setContainerWidth(e){!this._containerWidth&&e>0?(this._containerWidth=e,this.state.maxDataPointsFromWidth&&!this.state.maxDataPoints&&setTimeout((()=>{this.isActive&&!this.state._hasFetchedData&&this.runQueries()}),0)):e>0&&(this._containerWidth=e)}isDataReadyToDisplay(){return Boolean(this.state._hasFetchedData)}runQueries(){const e=ct.getTimeRange(this);this.runWithTimeRange(e)}getMaxDataPoints(){var e;return this.state.maxDataPoints?this.state.maxDataPoints:this.state.maxDataPointsFromWidth&&null!=(e=this._containerWidth)?e:500}cancelQuery(){var e;null==(e=this._querySub)||e.unsubscribe(),this._dataLayersSub&&(this._dataLayersSub.unsubscribe(),this._dataLayersSub=void 0),this.setState({data:Gr(qr({},this.state.data),{state:ae.Done})})}async runWithTimeRange(e){var t,r;this._dataLayersSub||this._handleDataLayers();const n=(0,u.getRunRequest)();if(null==(t=this._querySub)||t.unsubscribe(),ct.hasVariableDependencyInLoadingState(this))return er("SceneQueryRunner","Variable dependency is in loading state, skipping query execution"),void this.setState({_isWaitingForVariables:!0});this.state._isWaitingForVariables&&this.setState({_isWaitingForVariables:!1});const{queries:a}=this.state;if(null==a?void 0:a.length)try{const t=null!=(r=this.state.datasource)?r:function(e){var t,r;return null!=(r=null==(t=e.find((e=>null!==e.datasource)))?void 0:t.datasource)?r:void 0}(a),o=await Ot(t,this._scopedVars);this._adhocFilterSet||this.findAndSubscribeToAdhocFilters(null==t?void 0:t.uid);const[i,s]=this.prepareRequests(e,o);er("SceneQueryRunner","Starting runRequest",this.state.key),this._querySub=s?(0,S.forkJoin)([n(o,i),n(o,s)]).pipe(Cr).subscribe(this.onDataReceived):n(o,i).subscribe(this.onDataReceived)}catch(e){console.error("PanelQueryRunner Error",e);const t=Gr(qr(qr({},de),this.state.data),{state:ae.Error,errors:[(0,u.toDataQueryError)(e)]});this.setState({data:t})}else this._setNoDataState()}_combineDataLayers(e){return this.state.data&&this.state.data.annotations&&(e.annotations=(e.annotations||[]).concat(this.state.data.annotations)),this.state.data&&this.state.data.alertState&&(e.alertState=this.state.data.alertState),e}_setNoDataState(){this.state.data!==de&&this.setState({data:de})}getTimeCompare(){return this.parent?te(this.parent,(e=>{let t=null;return e instanceof hr?e:(e.forEachChild((e=>{e instanceof hr&&(t=e)})),t)})):null}findAndSubscribeToAdhocFilters(e){var t;const r=function(e){var t;for(const r of Mr.values())if((null==(t=r.state.datasource)?void 0:t.uid)===e)return r}(e);r&&"same-datasource"===r.state.applyMode&&(this._adhocFilterSet=r,this._adhocFilterSub=null==(t=this._adhocFilterSet)?void 0:t.subscribeToState((()=>this.runQueries())))}}const Xr={Breadcrumbs:{breadcrumb:e=>`data-testid ${e} breadcrumb`},TimePicker:{openButton:"data-testid TimePicker Open Button",fromField:"Time Range from field",toField:"Time Range to field",applyTimeRange:"data-testid TimePicker submit button",calendar:{label:"Time Range calendar",openButton:"Open time range calendar",closeButton:"Close time range Calendar"},absoluteTimeRangeTitle:"data-testid-absolute-time-range-narrow"},DataSourcePermissions:{form:()=>'form[name="addPermission"]',roleType:"Role to add new permission to",rolePicker:"Built-in role picker",permissionLevel:"Permission Level"},DataSource:{TestData:{QueryTab:{scenarioSelectContainer:"Test Data Query scenario select container",scenarioSelect:"Test Data Query scenario select",max:"TestData max",min:"TestData min",noise:"TestData noise",seriesCount:"TestData series count",spread:"TestData spread",startValue:"TestData start value",drop:"TestData drop values"}},DataSourceHttpSettings:{urlInput:"Datasource HTTP settings url"},Jaeger:{traceIDInput:"Trace ID"},Prometheus:{configPage:{exemplarsAddButton:"Add exemplar config button",internalLinkSwitch:"Internal link switch"},exemplarMarker:"Exemplar marker"}},Menu:{MenuComponent:e=>`${e} menu`,MenuGroup:e=>`${e} menu group`,MenuItem:e=>`${e} menu item`,SubMenu:{container:"SubMenu container",icon:"SubMenu icon"}},Panels:{Panel:{title:e=>`data-testid Panel header ${e}`,headerItems:e=>`Panel header item ${e}`,menuItems:e=>`data-testid Panel menu item ${e}`,menu:e=>`data-testid Panel menu ${e}`,containerByTitle:e=>`${e} panel`,headerCornerInfo:e=>`Panel header ${e}`,loadingBar:()=>"Panel loading bar",HoverWidget:{container:"data-test-id hover-header-container",dragIcon:"data-testid drag-icon"}},Visualization:{Graph:{container:"Graph container",VisualizationTab:{legendSection:"Legend section"},Legend:{legendItemAlias:e=>`gpl alias ${e}`,showLegendSwitch:"gpl show legend"},xAxis:{labels:()=>"div.flot-x-axis > div.flot-tick-label"}},BarGauge:{value:"Bar gauge value",valueV2:"data-testid Bar gauge value"},PieChart:{svgSlice:"Pie Chart Slice"},Text:{container:()=>".markdown-html"},Table:{header:"table header",footer:"table-footer"}}},VizLegend:{seriesName:e=>`VizLegend series ${e}`},Drawer:{General:{title:e=>`Drawer title ${e}`,expand:"Drawer expand",contract:"Drawer contract",close:"Drawer close",rcContentWrapper:()=>".rc-drawer-content-wrapper"}},PanelEditor:{General:{content:"Panel editor content"},OptionsPane:{content:"Panel editor option pane content",select:"Panel editor option pane select",fieldLabel:e=>`${e} field property editor`},DataPane:{content:"Panel editor data pane content"},applyButton:"data-testid Apply changes and go back to dashboard",toggleVizPicker:"data-testid toggle-viz-picker",toggleVizOptions:"data-testid toggle-viz-options",toggleTableView:"toggle-table-view",measureButton:"show measure tools"},PanelInspector:{Data:{content:"Panel inspector Data content"},Stats:{content:"Panel inspector Stats content"},Json:{content:"Panel inspector Json content"},Query:{content:"Panel inspector Query content",refreshButton:"Panel inspector Query refresh button",jsonObjectKeys:()=>".json-formatter-key"}},Tab:{title:e=>`Tab ${e}`,active:()=>'[class*="-activeTabStyle"]'},RefreshPicker:{runButton:"RefreshPicker run button",intervalButton:"RefreshPicker interval button",runButtonV2:"data-testid RefreshPicker run button",intervalButtonV2:"data-testid RefreshPicker interval button"},QueryTab:{content:"Query editor tab content",queryInspectorButton:"Query inspector button",queryHistoryButton:"Rich history button",addQuery:"Query editor add query button"},QueryHistory:{queryText:"Query text"},QueryEditorRows:{rows:"Query editor row"},QueryEditorRow:{actionButton:e=>`${e}`,title:e=>`Query editor row title ${e}`,container:e=>`Query editor row ${e}`},AlertTab:{content:"Alert editor tab content"},Alert:{alert:e=>`Alert ${e}`,alertV2:e=>`data-testid Alert ${e}`},TransformTab:{content:"Transform editor tab content",newTransform:e=>`New transform ${e}`,transformationEditor:e=>`Transformation editor ${e}`,transformationEditorDebugger:e=>`Transformation editor debugger ${e}`},Transforms:{card:e=>`New transform ${e}`,Reduce:{modeLabel:"Transform mode label",calculationsLabel:"Transform calculations label"},SpatialOperations:{actionLabel:"root Action field property editor",locationLabel:"root Location field property editor",location:{autoOption:"Auto location option",coords:{option:"Coords location option",latitudeFieldLabel:"root Latitude field field property editor",longitudeFieldLabel:"root Longitude field field property editor"},geohash:{option:"Geohash location option",geohashFieldLabel:"root Geohash field field property editor"},lookup:{option:"Lookup location option",lookupFieldLabel:"root Lookup field field property editor",gazetteerFieldLabel:"root Gazetteer field property editor"}}},searchInput:"search transformations"},NavBar:{Configuration:{button:"Configuration"},Toggle:{button:"Toggle menu"},Reporting:{button:"Reporting"}},NavMenu:{item:"data-testid Nav menu item"},NavToolbar:{container:"data-testid Nav toolbar"},PageToolbar:{container:()=>".page-toolbar",item:e=>`${e}`,itemButton:e=>`data-testid ${e}`},QueryEditorToolbarItem:{button:e=>`QueryEditor toolbar item button ${e}`},BackButton:{backArrow:"Go Back"},OptionsGroup:{group:e=>e?`Options group ${e}`:"Options group",toggle:e=>e?`Options group ${e} toggle`:"Options group toggle"},PluginVisualization:{item:e=>`Plugin visualization item ${e}`,current:()=>'[class*="-currentVisualizationItem"]'},Select:{option:"Select option",input:()=>'input[id*="time-options-input"]',singleValue:()=>'div[class*="-singleValue"]'},FieldConfigEditor:{content:"Field config editor content"},OverridesConfigEditor:{content:"Field overrides editor content"},FolderPicker:{container:"Folder picker select container",containerV2:"data-testid Folder picker select container",input:"Select a folder"},ReadonlyFolderPicker:{container:"data-testid Readonly folder picker select container"},DataSourcePicker:{container:"data-testid Data source picker select container",input:()=>'input[id="data-source-picker"]',inputV2:"Select a data source"},TimeZonePicker:{container:"Time zone picker select container",containerV2:"data-testid Time zone picker select container"},WeekStartPicker:{container:"Choose starting day of the week",containerV2:"data-testid Choose starting day of the week",placeholder:"Choose starting day of the week"},TraceViewer:{spanBar:"data-testid SpanBar--wrapper"},QueryField:{container:"Query field"},QueryBuilder:{queryPatterns:"Query patterns",labelSelect:"Select label",valueSelect:"Select value",matchOperatorSelect:"Select match operator"},ValuePicker:{button:e=>`Value picker button ${e}`,select:e=>`Value picker select ${e}`},Search:{section:"Search section",sectionV2:"data-testid Search section",items:"Search items",itemsV2:"data-testid Search items",cards:"data-testid Search cards",collapseFolder:e=>`data-testid Collapse folder ${e}`,expandFolder:e=>`data-testid Expand folder ${e}`,dashboardItem:e=>`${Xr.Search.dashboardItems} ${e}`,dashboardCard:e=>`data-testid Search card ${e}`,folderHeader:e=>`data-testid Folder header ${e}`,folderContent:e=>`data-testid Folder content ${e}`,dashboardItems:"data-testid Dashboard search item"},DashboardLinks:{container:"data-testid Dashboard link container",dropDown:"data-testid Dashboard link dropdown",link:"data-testid Dashboard link"},LoadingIndicator:{icon:"Loading indicator"},CallToActionCard:{button:e=>`Call to action button ${e}`,buttonV2:e=>`data-testid Call to action button ${e}`},DataLinksContextMenu:{singleLink:"Data link"},CodeEditor:{container:"Code editor container"},DashboardImportPage:{textarea:"data-testid-import-dashboard-textarea",submit:"data-testid-load-dashboard"},ImportDashboardForm:{name:"data-testid-import-dashboard-title",submit:"data-testid-import-dashboard-submit"},PanelAlertTabContent:{content:"Unified alert editor tab content"},VisualizationPreview:{card:e=>`data-testid suggestion-${e}`},ColorSwatch:{name:"data-testid-colorswatch"},DashboardRow:{title:e=>`data-testid dashboard-row-title-${e}`},UserProfile:{profileSaveButton:"data-testid-user-profile-save",preferencesSaveButton:"data-testid-shared-prefs-save",orgsTable:"data-testid-user-orgs-table",sessionsTable:"data-testid-user-sessions-table"},FileUpload:{inputField:"data-testid-file-upload-input-field",fileNameSpan:"data-testid-file-upload-file-name"},DebugOverlay:{wrapper:"debug-overlay"},OrgRolePicker:{input:"Role"},AnalyticsToolbarButton:{button:"Dashboard insights"},Variables:{variableOption:"data-testid variable-option"},Annotations:{annotationsTypeInput:"annotations-type-input",annotationsChoosePanelInput:"choose-panels-input"}},Zr={pages:{Login:{url:"/login",username:"Username input field",password:"Password input field",submit:"Login button",skip:"Skip change password button"},Home:{url:"/"},DataSource:{name:"Data source settings page name input field",delete:"Data source settings page Delete button",readOnly:"Data source settings page read only message",saveAndTest:"data-testid Data source settings page Save and Test button",alert:"Data source settings page Alert"},DataSources:{url:"/datasources",dataSources:e=>`Data source list item ${e}`},EditDataSource:{url:e=>`/datasources/edit/${e}`,settings:"Datasource settings page basic settings"},AddDataSource:{url:"/datasources/new",dataSourcePlugins:e=>`Data source plugin item ${e}`,dataSourcePluginsV2:e=>`Add new data source ${e}`},ConfirmModal:{delete:"data-testid Confirm Modal Danger Button"},AddDashboard:{url:"/dashboard/new",itemButton:e=>`data-testid ${e}`,addNewPanel:"Add new panel",addNewRow:"Add new row",addNewPanelLibrary:"Add new panel from panel library"},Dashboard:{url:e=>`/d/${e}`,DashNav:{nav:"Dashboard navigation",navV2:"data-testid Dashboard navigation",publicDashboardTag:"data-testid public dashboard tag"},SubMenu:{submenu:"Dashboard submenu",submenuItem:"data-testid template variable",submenuItemLabels:e=>`data-testid Dashboard template variables submenu Label ${e}`,submenuItemValueDropDownValueLinkTexts:e=>`data-testid Dashboard template variables Variable Value DropDown value link text ${e}`,submenuItemValueDropDownDropDown:"Variable options",submenuItemValueDropDownOptionTexts:e=>`data-testid Dashboard template variables Variable Value DropDown option text ${e}`,Annotations:{annotationsWrapper:"data-testid annotation-wrapper",annotationLabel:e=>`data-testid Dashboard annotations submenu Label ${e}`,annotationToggle:e=>`data-testid Dashboard annotations submenu Toggle ${e}`}},Settings:{Actions:{close:"data-testid dashboard-settings-close"},General:{deleteDashBoard:"Dashboard settings page delete dashboard button",sectionItems:e=>`Dashboard settings section item ${e}`,saveDashBoard:"Dashboard settings aside actions Save button",saveAsDashBoard:"Dashboard settings aside actions Save As button",timezone:"Time zone picker select container",title:"Tab General"},Annotations:{List:{addAnnotationCTA:Xr.CallToActionCard.button("Add annotation query"),addAnnotationCTAV2:Xr.CallToActionCard.buttonV2("Add annotation query")},Settings:{name:"Annotations settings name input"},NewAnnotation:{panelFilterSelect:"data-testid annotations-panel-filter",showInLabel:"show-in-label",previewInDashboard:"data-testid annotations-preview"}},Variables:{List:{addVariableCTA:Xr.CallToActionCard.button("Add variable"),addVariableCTAV2:Xr.CallToActionCard.buttonV2("Add variable"),newButton:"Variable editor New variable button",table:"Variable editor Table",tableRowNameFields:e=>`Variable editor Table Name field ${e}`,tableRowDefinitionFields:e=>`Variable editor Table Definition field ${e}`,tableRowArrowUpButtons:e=>`Variable editor Table ArrowUp button ${e}`,tableRowArrowDownButtons:e=>`Variable editor Table ArrowDown button ${e}`,tableRowDuplicateButtons:e=>`Variable editor Table Duplicate button ${e}`,tableRowRemoveButtons:e=>`Variable editor Table Remove button ${e}`},Edit:{General:{headerLink:"Variable editor Header link",modeLabelNew:"Variable editor Header mode New",modeLabelEdit:"Variable editor Header mode Edit",generalNameInput:"Variable editor Form Name field",generalNameInputV2:"data-testid Variable editor Form Name field",generalTypeSelect:"Variable editor Form Type select",generalTypeSelectV2:"data-testid Variable editor Form Type select",generalLabelInput:"Variable editor Form Label field",generalLabelInputV2:"data-testid Variable editor Form Label field",generalHideSelect:"Variable editor Form Hide select",generalHideSelectV2:"data-testid Variable editor Form Hide select",selectionOptionsMultiSwitch:"Variable editor Form Multi switch",selectionOptionsIncludeAllSwitch:"Variable editor Form IncludeAll switch",selectionOptionsCustomAllInput:"Variable editor Form IncludeAll field",selectionOptionsCustomAllInputV2:"data-testid Variable editor Form IncludeAll field",previewOfValuesOption:"Variable editor Preview of Values option",submitButton:"Variable editor Submit button",applyButton:"data-testid Variable editor Apply button"},QueryVariable:{queryOptionsDataSourceSelect:Xr.DataSourcePicker.container,queryOptionsRefreshSelect:"Variable editor Form Query Refresh select",queryOptionsRefreshSelectV2:"data-testid Variable editor Form Query Refresh select",queryOptionsRegExInput:"Variable editor Form Query RegEx field",queryOptionsRegExInputV2:"data-testid Variable editor Form Query RegEx field",queryOptionsSortSelect:"Variable editor Form Query Sort select",queryOptionsSortSelectV2:"data-testid Variable editor Form Query Sort select",queryOptionsQueryInput:"Variable editor Form Default Variable Query Editor textarea",valueGroupsTagsEnabledSwitch:"Variable editor Form Query UseTags switch",valueGroupsTagsTagsQueryInput:"Variable editor Form Query TagsQuery field",valueGroupsTagsTagsValuesQueryInput:"Variable editor Form Query TagsValuesQuery field"},ConstantVariable:{constantOptionsQueryInput:"Variable editor Form Constant Query field",constantOptionsQueryInputV2:"data-testid Variable editor Form Constant Query field"},DatasourceVariable:{datasourceSelect:"data-testid datasource variable datasource type"},TextBoxVariable:{textBoxOptionsQueryInput:"Variable editor Form TextBox Query field",textBoxOptionsQueryInputV2:"data-testid Variable editor Form TextBox Query field"},CustomVariable:{customValueInput:"data-testid custom-variable-input"},IntervalVariable:{intervalsValueInput:"data-testid interval variable intervals input"}}}},Annotations:{marker:"data-testid annotation-marker"}},Dashboards:{url:"/dashboards",dashboards:e=>`Dashboard search item ${e}`},SaveDashboardAsModal:{newName:"Save dashboard title field",save:"Save dashboard button"},SaveDashboardModal:{save:"Dashboard settings Save Dashboard Modal Save button",saveVariables:"Dashboard settings Save Dashboard Modal Save variables checkbox",saveTimerange:"Dashboard settings Save Dashboard Modal Save timerange checkbox"},SharePanelModal:{linkToRenderedImage:"Link to rendered image"},ShareDashboardModal:{shareButton:"Share dashboard or panel",PublicDashboard:{Tab:"Tab Public dashboard",WillBePublicCheckbox:"data-testid public dashboard will be public checkbox",LimitedDSCheckbox:"data-testid public dashboard limited datasources checkbox",CostIncreaseCheckbox:"data-testid public dashboard cost may increase checkbox",PauseSwitch:"data-testid public dashboard pause switch",EnableAnnotationsSwitch:"data-testid public dashboard on off switch for annotations",CreateButton:"data-testid public dashboard create button",DeleteButton:"data-testid public dashboard delete button",CopyUrlInput:"data-testid public dashboard copy url input",CopyUrlButton:"data-testid public dashboard copy url button",TemplateVariablesWarningAlert:"data-testid public dashboard disabled template variables alert",UnsupportedDataSourcesWarningAlert:"data-testid public dashboard unsupported data sources alert",NoUpsertPermissionsWarningAlert:"data-testid public dashboard no upsert permissions alert",EnableTimeRangeSwitch:"data-testid public dashboard on off switch for time range",EmailSharingConfiguration:{Container:"data-testid email sharing config container",ShareType:"data-testid public dashboard share type",EmailSharingInput:"data-testid public dashboard email sharing input",EmailSharingInviteButton:"data-testid public dashboard email sharing invite button",EmailSharingList:"data-testid public dashboard email sharing list",DeleteEmail:"data-testid public dashboard delete email button",ReshareLink:"data-testid public dashboard reshare link button"}}},PublicDashboard:{page:"public-dashboard-page",NotAvailable:{container:"public-dashboard-not-available",title:"public-dashboard-title",pausedDescription:"public-dashboard-paused-description"}},RequestViewAccess:{form:"request-view-access-form",recipientInput:"request-view-access-recipient-input",submitButton:"request-view-access-submit-button"},Explore:{url:"/explore",General:{container:"data-testid Explore",graph:"Explore Graph",table:"Explore Table",scrollView:"data-testid explorer scroll view"}},SoloPanel:{url:e=>`/d-solo/${e}`},PluginsList:{page:"Plugins list page",list:"Plugins list",listItem:"Plugins list item",signatureErrorNotice:"Unsigned plugins notice"},PluginPage:{page:"Plugin page",signatureInfo:"Plugin signature info",disabledInfo:"Plugin disabled info"},PlaylistForm:{name:"Playlist name",interval:"Playlist interval",itemDelete:"Delete playlist item"},BrowseDashbards:{table:{row:e=>`data-testid ${e} row`,checkbox:e=>`data-testid ${e} checkbox`}},Search:{url:"/?search=openn",FolderView:{url:"/?search=open&layout=folders"}},PublicDashboards:{ListItem:{linkButton:"public-dashboard-link-button",configButton:"public-dashboard-configuration-button",trashcanButton:"public-dashboard-remove-button"}},UserListPage:{tabs:{allUsers:"data-testid all-users-tab",orgUsers:"data-testid org-users-tab",publicDashboardsUsers:"data-testid public-dashboards-users-tab",users:"data-testid users-tab"},org:{url:"/org/users"},admin:{url:"/admin/users"},publicDashboards:{container:"data-testid public-dashboards-users-list"},UserListAdminPage:{container:"data-testid user-list-admin-page"},UsersListPage:{container:"data-testid users-list-page"},UsersListPublicDashboardsPage:{container:"data-testid users-list-public-dashboards-page",DashboardsListModal:{listItem:e=>`data-testid dashboards-list-item-${e}`}}}},components:Xr};function Jr(e){return r().createElement(tr.Tooltip,{content:"Cancel query"},r().createElement(tr.Icon,{className:"spin-clockwise",name:"sync",size:"xs","aria-label":Zr.components.LoadingIndicator.icon,role:"button",onMouseDown:t=>{e.onCancel(t)}}))}function en(e){const t=(0,tr.useStyles2)(tn),n=(0,tr.useTheme2)(),a="vertical"===e.layout,o=Boolean(e.isLoading)?r().createElement("div",{style:{marginLeft:n.spacing(1),marginTop:"-1px"}},r().createElement(Jr,{onCancel:t=>{var r;t.preventDefault(),t.stopPropagation(),null==(r=e.onCancel)||r.call(e)}})):null;let i=null;e.error&&(i=r().createElement(tr.Tooltip,{content:e.error,placement:"bottom"},r().createElement(tr.Icon,{className:t.errorIcon,name:"exclamation-triangle"})));const s="string"==typeof e.label?Zr.pages.Dashboard.SubMenu.submenuItemLabels(e.label):"";let l;return l=a?r().createElement("label",{className:t.verticalLabel,"data-testid":s,htmlFor:e.htmlFor},e.label,i,e.icon&&r().createElement(tr.Icon,{name:e.icon,className:t.normalIcon}),o,e.onRemove&&r().createElement(tr.IconButton,{variant:"secondary",size:"xs",name:"times",onClick:e.onRemove,tooltip:"Remove"})):r().createElement("label",{className:t.horizontalLabel,"data-testid":s,htmlFor:e.htmlFor},i,e.icon&&r().createElement(tr.Icon,{name:e.icon,className:t.normalIcon}),e.label,o),e.description?r().createElement(tr.Tooltip,{content:e.description,placement:a?"top":"bottom"},l):l}const tn=e=>({horizontalLabel:(0,rr.css)({background:e.isDark?e.colors.background.primary:e.colors.background.secondary,display:"flex",alignItems:"center",padding:e.spacing(0,1),fontWeight:e.typography.fontWeightMedium,fontSize:e.typography.bodySmall.fontSize,height:e.spacing(e.components.height.md),lineHeight:e.spacing(e.components.height.md),borderRadius:e.shape.borderRadius(1),border:`1px solid ${e.components.input.borderColor}`,position:"relative",right:-1,whiteSpace:"nowrap",gap:e.spacing(.5)}),verticalLabel:(0,rr.css)({display:"flex",alignItems:"center",fontWeight:e.typography.fontWeightMedium,fontSize:e.typography.bodySmall.fontSize,lineHeight:e.typography.bodySmall.lineHeight,whiteSpace:"nowrap",marginBottom:e.spacing(.5),gap:e.spacing(1)}),errorIcon:(0,rr.css)({color:e.colors.error.text}),normalIcon:(0,rr.css)({color:e.colors.text.secondary})});var rn=Object.defineProperty,nn=Object.defineProperties,an=Object.getOwnPropertyDescriptors,on=Object.getOwnPropertySymbols,sn=Object.prototype.hasOwnProperty,ln=Object.prototype.propertyIsEnumerable,un=(e,t,r)=>t in e?rn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,cn=(e,t)=>{for(var r in t||(t={}))sn.call(t,r)&&un(e,r,t[r]);if(on)for(var r of on(t))ln.call(t,r)&&un(e,r,t[r]);return e},dn=(e,t)=>nn(e,an(t));function pn({layer:e,isEnabled:t,onToggleLayer:n}){var a,o;const i=`data-layer-${e.state.key}`,{data:s}=e.useState(),l=Boolean(s&&s.state===ae.Loading);return r().createElement("div",{className:hn},r().createElement(en,{htmlFor:i,isLoading:l,onCancel:()=>{var t;return null==(t=e.cancelQuery)?void 0:t.call(e)},label:e.state.name,description:e.state.description,error:null==(o=null==(a=e.state.data)?void 0:a.errors)?void 0:o[0].message}),r().createElement(tr.InlineSwitch,{id:i,value:t,onChange:n}))}(class extends Q{constructor(){super({layersMap:{}}),this.addActivationHandler((()=>this._onActivate()))}_onActivate(){const e=ct.getDataLayers(this,!0);this.setState({layersMap:e.reduce(((e,t)=>dn(cn({},e),{[t.state.key]:t.state.isEnabled})),{})})}toggleLayer(e){this.setState({layersMap:dn(cn({},this.state.layersMap),{[e.state.key]:!e.state.isEnabled})}),e.setState({isEnabled:!e.state.isEnabled})}}).Component=function({model:e}){const{layersMap:t}=e.useState(),n=ct.getDataLayers(e,!0);return 0===n.length?null:r().createElement(r().Fragment,null,n.map((n=>{const a=`data-layer-${n.state.key}`;return n.state.isHidden?null:r().createElement(pn,{key:a,layer:n,onToggleLayer:()=>e.toggleLayer(n),isEnabled:t[n.state.key]})})))};const hn=(0,rr.css)({display:"flex"});Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;class fn extends Q{}function mn({variable:t,layout:n}){return t.useState().hide===e.VariableHide.hideVariable?null:"vertical"===n?r().createElement("div",{className:bn},r().createElement(gn,{variable:t,layout:n}),r().createElement(t.Component,{model:t})):r().createElement("div",{className:yn},r().createElement(gn,{variable:t}),r().createElement(t.Component,{model:t}))}function gn({variable:t,layout:n}){var a,o;const{state:i}=t;if(t.state.hide===e.VariableHide.hideLabel)return null;const s=`var-${i.key}`,l=null!=(a=i.label)?a:i.name;return r().createElement(en,{htmlFor:s,isLoading:i.loading,onCancel:()=>{var e;return null==(e=t.onCancel)?void 0:e.call(t)},label:l,error:i.error,layout:n,description:null!=(o=i.description)?o:void 0})}fn.Component=function({model:e}){const t=ct.getVariables(e).useState();return r().createElement(r().Fragment,null,t.variables.map((t=>r().createElement(mn,{key:t.state.key,variable:t,layout:e.state.layout}))))};const yn=(0,rr.css)({display:"flex"}),bn=(0,rr.css)({display:"flex",flexDirection:"column"});class vn extends Q{constructor(e){super(e),this._variablesThatHaveChanged=new Set,this._variablesToUpdate=new Set,this._updating=new Map,this._variableValueRecorder=new xt,this._variableDependency=new Sn(this._handleParentVariableUpdatesCompleted.bind(this)),this._onActivate=()=>{const e=ct.getTimeRange(this);this._subs.add(this.subscribeToEvent(De,(e=>this._handleVariableValueChanged(e.payload)))),this._subs.add(e.subscribeToState((()=>{this._refreshTimeRangeBasedVariables()}))),this._subs.add(this.subscribeToState(this._onStateChanged)),this._checkForVariablesThatChangedWhileInactive();for(const e of this.state.variables)this._variableNeedsUpdate(e)&&this._variablesToUpdate.add(e);return this._updateNextBatch(),this._onDeactivate},this._onDeactivate=()=>{var e;for(const t of this._updating.values())null==(e=t.subscription)||e.unsubscribe();for(const e of this.state.variables)this._variablesToUpdate.has(e)||this._updating.has(e)||this._variableValueRecorder.recordCurrentValue(e);this._variablesToUpdate.clear(),this._updating.clear()},this._onStateChanged=(e,t)=>{const r=this._variablesToUpdate.size;for(const r of t.variables)if(!e.variables.includes(r)){const e=this._updating.get(r);(null==e?void 0:e.subscription)&&e.subscription.unsubscribe(),this._updating.delete(r),this._variablesToUpdate.delete(r)}for(const r of e.variables)t.variables.includes(r)||this._variableNeedsUpdate(r)&&this._variablesToUpdate.add(r);0===r&&this._variablesToUpdate.size>0&&this._updateNextBatch()},this.addActivationHandler(this._onActivate)}getByName(e){return this.state.variables.find((t=>t.state.name===e))}_refreshTimeRangeBasedVariables(){for(const t of this.state.variables)"refresh"in t.state&&t.state.refresh===e.VariableRefresh.onTimeRangeChanged&&this._variablesToUpdate.add(t);this._updateNextBatch()}_checkForVariablesThatChangedWhileInactive(){if(this._variableValueRecorder.hasValues())for(const e of this.state.variables)this._variableValueRecorder.hasValueChanged(e)&&(wn(e,"Changed while in-active"),this._addDependentVariablesToUpdateQueue(e))}_variableNeedsUpdate(e){return!(!e.validateAndUpdate||this._variableValueRecorder.hasRecordedValue(e)&&(wn(e,"Skipping updateAndValidate current value valid"),1))}_updateNextBatch(){if(0!==this._variablesToUpdate.size)for(const e of this._variablesToUpdate){if(!e.validateAndUpdate)throw new Error("Variable added to variablesToUpdate but does not have validateAndUpdate");if(this._updating.has(e))continue;if(ct.hasVariableDependencyInLoadingState(e))continue;const t={variable:e};this._updating.set(e,t),wn(e,"updateAndValidate started"),t.subscription=e.validateAndUpdate().subscribe({next:()=>this._validateAndUpdateCompleted(e),error:t=>this._handleVariableError(e,t)})}else this._notifyDependentSceneObjects()}_validateAndUpdateCompleted(e){var t;const r=this._updating.get(e);null==(t=null==r?void 0:r.subscription)||t.unsubscribe(),this._updating.delete(e),this._variablesToUpdate.delete(e),wn(e,"updateAndValidate completed"),this._updateNextBatch()}cancel(e){var t;const r=this._updating.get(e);null==(t=null==r?void 0:r.subscription)||t.unsubscribe(),this._updating.delete(e),this._variablesToUpdate.delete(e)}_handleVariableError(e,t){var r;const n=this._updating.get(e);null==(r=null==n?void 0:n.subscription)||r.unsubscribe(),this._updating.delete(e),this._variablesToUpdate.delete(e),e.setState({loading:!1,error:t.message}),console.error("SceneVariableSet updateAndValidate error",t),wn(e,"updateAndValidate error",t)}_handleVariableValueChanged(e){this._variablesThatHaveChanged.add(e),this._addDependentVariablesToUpdateQueue(e),this._updating.has(e)||this._updateNextBatch()}_handleParentVariableUpdatesCompleted(e){for(const t of e)this._addDependentVariablesToUpdateQueue(t);this._variablesToUpdate.size>0&&0===this._updating.size&&this._updateNextBatch()}_addDependentVariablesToUpdateQueue(e){for(const t of this.state.variables)t.variableDependency&&t.variableDependency.hasDependencyOn(e.state.name)&&(wn(t,"Added to update queue, dependant variable value changed"),this._variablesToUpdate.add(t))}_notifyDependentSceneObjects(){this.parent&&(this._traverseSceneAndNotify(this.parent),this._variablesThatHaveChanged.clear())}_traverseSceneAndNotify(e){this!==e&&e.isActive&&(e.variableDependency&&e.variableDependency.variableUpdatesCompleted(this._variablesThatHaveChanged),e.forEachChild((e=>this._traverseSceneAndNotify(e))))}isVariableLoadingOrWaitingToUpdate(e){return!(!e.isAncestorLoading||!e.isAncestorLoading())||this._variablesToUpdate.has(e)||this._updating.has(e)}}function wn(e,t,r){er("SceneVariableSet",`Variable[${e.state.name}]: ${t}`,r)}class Sn{constructor(e){this._variableUpdatesCompleted=e,this._emptySet=new Set}getNames(){return this._emptySet}hasDependencyOn(e){return!1}variableUpdatesCompleted(e){this._variableUpdatesCompleted(e)}}function _n({model:e}){const{value:t,key:n}=e.useState(),a=e.onSearchChange?(t,r)=>{"input-change"===r.action&&e.onSearchChange(t)}:void 0;return r().createElement(tr.Select,{id:n,placeholder:"Select value",width:"auto",value:t,allowCustomValue:!0,tabSelectsValue:!1,onInputChange:a,options:e.getOptionsForSelect(),onChange:t=>{e.changeValueTo(t.value,t.label)}})}function On({model:e}){const{value:n,key:a,maxVisibleValues:o}=e.useState(),i=(0,t.useMemo)((()=>(0,Re.isArray)(n)?n:[n]),[n]),[s,l]=(0,t.useState)(i);(0,t.useEffect)((()=>{l(i)}),[i]);const u=e.onSearchChange?(t,r)=>{"input-change"===r.action&&e.onSearchChange(t)}:void 0;return r().createElement(tr.MultiSelect,{id:a,placeholder:"Select value",width:"auto",value:s,noMultiValueWrap:!0,maxVisibleValues:null!=o?o:5,tabSelectsValue:!1,allowCustomValue:!0,options:e.getOptionsForSelect(),closeMenuOnSelect:!1,isClearable:!0,onInputChange:u,onBlur:()=>{e.changeValueTo(s)},onChange:e=>{l(e.map((e=>e.value)))}})}function xn(e){return e.state.isMulti?r().createElement(On,{model:e}):r().createElement(_n,{model:e})}Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;class Cn extends Q{constructor(){super(...arguments),this._urlSync=new Pn(this)}validateAndUpdate(){return this.getValueOptions({}).pipe((0,S.map)((e=>(this.updateValueGivenNewOptions(e),{}))))}onCancel(){this.setStateHelper({loading:!1});const e=this.parent;null==e||e.cancel(this)}updateValueGivenNewOptions(e){const{value:t,text:r}=this.state,n={options:e,loading:!1,value:t,text:r};if(0===e.length)(this.state.defaultToAll||this.state.includeAll)&&(n.value=Ue,n.text=Be);else if(this.hasAllValue());else if(this.state.isMulti){const a=(Array.isArray(t)?t:[t]).filter((t=>e.find((e=>e.value===t)))),o=a.map((t=>e.find((e=>e.value===t)).label));if(0===a.length){const t=this.getDefaultMultiState(e);n.value=t.value,n.text=t.text}else(0,Re.isEqual)(a,t)&&(0,Re.isEqual)(o,r)||(n.value=a,n.text=o)}else{let a=function(e,t,r){let n;for(const a of r){if(a.value===e)return a;a.label===t&&(n=a)}return n}(t,r,e);a?(n.text=a.label,n.value=a.value):this.state.defaultToAll?(n.value=Ue,n.text=Be):(n.value=e[0].value,n.text=e[0].label)}this.setStateHelper(n),(n.value!==t||n.text!==r||this.hasAllValue())&&this.publishEvent(new De(this),!0)}getValue(){return this.hasAllValue()?this.state.allValue?new Dn(this.state.allValue,this):this.state.options.map((e=>e.value)):this.state.value}getValueText(){return this.hasAllValue()?Be:Array.isArray(this.state.text)?this.state.text.join(" + "):String(this.state.text)}hasAllValue(){const e=this.state.value;return e===Ue||Array.isArray(e)&&e[0]===Ue}getDefaultMultiState(e){return this.state.defaultToAll?{value:[Ue],text:[Be]}:{value:[e[0].value],text:[e[0].label]}}changeValueTo(e,t){if(e!==this.state.value||t!==this.state.text){if(t||(t=Array.isArray(e)?e.map((e=>this.findLabelTextForValue(e))):this.findLabelTextForValue(e)),Array.isArray(e)){if(0===e.length){const r=this.getDefaultMultiState(this.state.options);e=r.value,t=r.text}e[e.length-1]===Ue?(e=[Ue],t=[Be]):e[0]===Ue&&e.length>1&&(e.shift(),Array.isArray(t)&&t.shift())}this.setStateHelper({value:e,text:t,loading:!1}),this.publishEvent(new De(this),!0)}}findLabelTextForValue(e){const t=this.state.options.find((t=>t.value===e));if(t)return t.label;const r=this.state.options.find((t=>t.label===e));return r?r.label:e}setStateHelper(e){var t;t=e,this.setState(t)}getOptionsForSelect(){let e=this.state.options;return this.state.includeAll&&(e=[{value:Ue,label:Be},...e]),Array.isArray(this.state.value)||e.find((e=>e.value===this.state.value))||(e=[{value:this.state.value,label:String(this.state.text)},...e]),e}}class Pn{constructor(e){this._sceneObject=e}getKey(){return`var-${this._sceneObject.state.name}`}getKeys(){return this._sceneObject.state.skipUrlSync?[]:[this.getKey()]}getUrlState(){if(this._sceneObject.state.skipUrlSync)return{};let e=null,t=this._sceneObject.state.value;return e=Array.isArray(t)?t.map(String):this._sceneObject.state.isMulti?[String(t)]:String(t),{[this.getKey()]:e}}updateFromUrl(e){const t=e[this.getKey()];null!=t&&this._sceneObject.changeValueTo(t)}}class Dn{constructor(e,t){this._value=e,this._variable=t}formatter(e){return e===Pe.Text?Be:e===Pe.PercentEncode?Ie.get(Pe.PercentEncode).formatter(this._value,[],this._variable):e===Pe.QueryParam?Ie.get(Pe.QueryParam).formatter(Be,[],this._variable):this._value}}var En=Object.defineProperty,Rn=Object.getOwnPropertySymbols,jn=Object.prototype.hasOwnProperty,Tn=Object.prototype.propertyIsEnumerable,kn=(e,t,r)=>t in e?En(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;(class extends Cn{constructor(e){super(((e,t)=>{for(var r in t||(t={}))jn.call(t,r)&&kn(e,r,t[r]);if(Rn)for(var r of Rn(t))Tn.call(t,r)&&kn(e,r,t[r]);return e})({type:"custom",query:"",value:"",text:"",options:[],name:""},e)),this._variableDependency=new ht(this,{statePaths:["query"]})}getValueOptions(e){var t;const r=(null!=(t=ct.interpolate(this,this.state.query).match(/(?:\\,|[^,])+/g))?t:[]).map((e=>{var t;e=e.replace(/\\,/g,",");const r=null!=(t=/^(.+)\s:\s(.+)$/g.exec(e))?t:[];if(3===r.length){const[,e,t]=r;return{label:e.trim(),value:t.trim()}}return{label:e.trim(),value:e.trim()}}));return(0,S.of)(r)}}).Component=({model:e})=>xn(e);var An=Object.defineProperty,In=Object.getOwnPropertySymbols,Vn=Object.prototype.hasOwnProperty,Fn=Object.prototype.propertyIsEnumerable,Ln=(e,t,r)=>t in e?An(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function Mn(e,t){return!t||t.exec(e.name)}function zn(e,t){return!!e.isDefault&&(!t||t.exec("default"))}(class extends Cn{constructor(e){super(((e,t)=>{for(var r in t||(t={}))Vn.call(t,r)&&Ln(e,r,t[r]);if(In)for(var r of In(t))Fn.call(t,r)&&Ln(e,r,t[r]);return e})({type:"datasource",value:"",text:"",options:[],name:"",regex:"",pluginId:""},e)),this._variableDependency=new ht(this,{statePaths:["regex"]})}getValueOptions(t){if(!this.state.pluginId)return(0,S.of)([]);const r=(0,u.getDataSourceSrv)().getList({metrics:!0,variables:!1,pluginId:this.state.pluginId});let n;if(this.state.regex){const t=ct.interpolate(this,this.state.regex,void 0,"regex");n=(0,e.stringToJsRegex)(t)}const a=[];for(let e=0;e<r.length;e++){const t=r[e];Mn(t,n)&&a.push({label:t.name,value:t.uid}),this.state.defaultOptionEnabled&&zn(t,n)&&a.push({label:"default",value:"default"})}return 0===a.length?this.setState({error:"No data sources found"}):this.state.error&&this.setState({error:null}),(0,S.of)(a)}}).Component=({model:e})=>xn(e);const Nn=e=>Boolean(e.metricFindQuery)&&!Boolean(e.variables),Hn=t=>{if(!t.variables)return!1;if(t.variables.getType()!==e.VariableSupportType.Standard)return!1;const r=t.variables;return"toDataQuery"in r&&Boolean(r.toDataQuery)},Bn=t=>{if(!t.variables)return!1;if(t.variables.getType()!==e.VariableSupportType.Custom)return!1;const r=t.variables;return"query"in r&&"editor"in r&&Boolean(r.query)&&Boolean(r.editor)};var Un=Object.defineProperty,$n=Object.defineProperties,Wn=Object.getOwnPropertyDescriptors,qn=Object.getOwnPropertySymbols,Gn=Object.prototype.hasOwnProperty,Qn=Object.prototype.propertyIsEnumerable,Yn=(e,t,r)=>t in e?Un(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Kn=(e,t)=>{for(var r in t||(t={}))Gn.call(t,r)&&Yn(e,r,t[r]);if(qn)for(var r of qn(t))Qn.call(t,r)&&Yn(e,r,t[r]);return e},Xn=(e,t)=>$n(e,Wn(t));class Zn{constructor(e,t=(0,u.getRunRequest)()){this.datasource=e,this._runRequest=t}getTarget(e){if(Hn(this.datasource))return this.datasource.variables.toDataQuery(function(e){const t=e.state.query;return t&&"object"==typeof t?null==t.refId?Xn(Kn({},t),{refId:`variable-${e.state.name}`}):e.state.query:{query:t,refId:`variable-${e.state.name}`}}(e));throw new Error("Couldn't create a target with supplied arguments.")}runRequest(e,t){return Hn(this.datasource)?this.datasource.variables.query?this._runRequest(this.datasource,t,this.datasource.variables.query.bind(this.datasource.variables)):this._runRequest(this.datasource,t):ta()}}class Jn{constructor(e){this.datasource=e}getTarget(e){if(Nn(this.datasource))return e.state.query;throw new Error("Couldn't create a target with supplied arguments.")}runRequest({variable:t,searchFilter:r},n){return Nn(this.datasource)?(0,S.from)(this.datasource.metricFindQuery(t.state.query,Xn(Kn({},n),{variable:{name:t.state.name,type:t.state.type},searchFilter:r}))).pipe((0,S.mergeMap)((t=>{if(!t||!t.length)return ta();const r=t;return(0,S.of)({series:r,state:e.LoadingState.Done,timeRange:n.range})}))):ta()}}class ea{constructor(e,t=(0,u.getRunRequest)()){this.datasource=e,this._runRequest=t}getTarget(e){if(Bn(this.datasource))return e.state.query;throw new Error("Couldn't create a target with supplied arguments.")}runRequest(e,t){return Bn(this.datasource)?this.datasource.variables.query?this._runRequest(this.datasource,t,this.datasource.variables.query.bind(this.datasource.variables)):this._runRequest(this.datasource,t):ta()}}function ta(){return(0,S.of)({state:e.LoadingState.Done,series:[],timeRange:(0,e.getDefaultTimeRange)()})}const ra=(e,t)=>{const r=[];let n=null;t.lastIndex=0;do{n=t.exec(e),n&&r.push(n)}while(t.global&&n&&""!==n[0]&&void 0!==n[0]);return r};var na=Object.defineProperty,aa=Object.getOwnPropertySymbols,oa=Object.prototype.hasOwnProperty,ia=Object.prototype.propertyIsEnumerable,sa=(e,t,r)=>t in e?na(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;class la extends Cn{constructor(t){super(((e,t)=>{for(var r in t||(t={}))oa.call(t,r)&&sa(e,r,t[r]);if(aa)for(var r of aa(t))ia.call(t,r)&&sa(e,r,t[r]);return e})({type:"query",name:"",value:"",text:"",options:[],datasource:null,regex:"",query:{refId:"A"},refresh:e.VariableRefresh.onDashboardLoad,sort:e.VariableSort.disabled},t)),this._variableDependency=new ht(this,{statePaths:["regex","query","datasource"]}),this.onSearchChange=e=>{pt(this.state.query).indexOf("__searchFilter")&&this._updateOptionsBasedOnSearchFilter(e)},this._updateOptionsBasedOnSearchFilter=(0,Re.debounce)((async e=>{const t=await(0,S.lastValueFrom)(this.getValueOptions({searchFilter:e}));this.setState({options:t,loading:!1})}),400)}getValueOptions(t){return this.state.query?(this.setState({loading:!0,error:null}),(0,S.from)(Ot(this.state.datasource,{__sceneObject:{text:"__sceneObject",value:this}})).pipe((0,S.mergeMap)((r=>{const n=function(e){if(Hn(e))return new Zn(e,(0,u.getRunRequest)());if(Nn(e))return new Jn(e);if(Bn(e))return new ea(e);throw new Error(`Couldn't create a query runner for datasource ${e.type}`)}(r),a=n.getTarget(this),o=this.getRequest(a,t.searchFilter);return n.runRequest({variable:this,searchFilter:t.searchFilter},o).pipe((0,S.filter)((t=>t.state===e.LoadingState.Done||t.state===e.LoadingState.Error)),(0,S.take)(1),(0,S.mergeMap)((t=>t.state===e.LoadingState.Error?(0,S.throwError)((()=>t.error)):(0,S.of)(t))),(t=>t.pipe((0,S.map)((t=>{const r=t.series;if(!r||!r.length)return[];if(function(t){if(!t)return!1;if(!t.length)return!0;const r=t[0];if((0,e.isDataFrame)(r))return!1;for(const e in r){if(!r.hasOwnProperty(e))continue;if(null!==r[e]&&"string"!=typeof r[e]&&"number"!=typeof r[e])continue;const t=e.toLowerCase();if("text"===t||"value"===t)return!0}return!1}(r))return r;if(0===r[0].fields.length)return[];const n=(0,e.getProcessedDataFrames)(r),a=[];let o=-1,i=-1,s=-1,l=-1;for(const t of n)for(let n=0;n<t.fields.length;n++){const a=t.fields[n],u=(0,e.getFieldDisplayName)(a,t,r).toLowerCase();a.type===e.FieldType.string&&-1===s&&(s=n),"text"===u&&a.type===e.FieldType.string&&-1===i&&(i=n),"value"===u&&a.type===e.FieldType.string&&-1===o&&(o=n),"expandable"!==u||a.type!==e.FieldType.boolean&&a.type!==e.FieldType.number||-1!==l||(l=n)}if(-1===s)throw new Error("Couldn't find any field of type string in the results.");for(const e of r)for(let t=0;t<e.length;t++){const r=-1!==l?e.fields[l].values.get(t):void 0,n=e.fields[s].values.get(t),u=-1!==i?e.fields[i].values.get(t):null,c=-1!==o?e.fields[o].values.get(t):null;-1!==o||-1!==i?-1!==o||-1===i?-1===o||-1!==i?a.push({text:u,value:c,expandable:r}):a.push({text:c,value:c,expandable:r}):a.push({text:u,value:u,expandable:r}):a.push({text:n,value:n,expandable:r})}return a})))),(0,S.mergeMap)((t=>{let r="";return this.state.regex&&(r=ct.interpolate(this,this.state.regex,void 0,"regex")),(0,S.of)(((t,r,n)=>{var a,o,i,s,l,u;let c,d=[];t&&(c=(0,e.stringToJsRegex)(t));for(let e=0;e<n.length;e++){const t=n[e];let r=void 0===t.text||null===t.text?t.value:t.text,p=void 0===t.value||null===t.value?t.text:t.value;if((0,Re.isNumber)(p)&&(p=p.toString()),(0,Re.isNumber)(r)&&(r=r.toString()),c){const e=ra(p,c);if(!e.length)continue;const t=e.find((e=>e.groups&&e.groups.value)),n=e.find((e=>e.groups&&e.groups.text)),h=e.find((e=>e.length>1)),f=e.length>1&&h;if(t||n)p=null!=(i=null==(a=null==t?void 0:t.groups)?void 0:a.value)?i:null==(o=null==n?void 0:n.groups)?void 0:o.text,r=null!=(u=null==(s=null==n?void 0:n.groups)?void 0:s.text)?u:null==(l=null==t?void 0:t.groups)?void 0:l.value;else{if(f){for(let t=0;t<e.length;t++){const r=e[t];d.push({label:r[1],value:r[1]})}continue}h&&(r=h[1],p=h[1])}}d.push({label:r,value:p})}return d=(0,Re.uniqBy)(d,"value"),((t,r)=>{if(r===e.VariableSort.disabled)return t;const n=e=>{if(!e.text)return-1;const t=e.text.match(/.*?(\d+).*/);return!t||t.length<2?-1:parseInt(t[1],10)},a=e=>e.sort(((e,t)=>e.text?t.text?e.text.localeCompare(t.text,void 0,{numeric:!0}):1:-1));switch(r){case e.VariableSort.alphabeticalAsc:t=(0,Re.sortBy)(t,"text");break;case e.VariableSort.alphabeticalDesc:t=(0,Re.sortBy)(t,"text").reverse();break;case e.VariableSort.numericalAsc:t=(0,Re.sortBy)(t,n);break;case e.VariableSort.numericalDesc:t=(t=(0,Re.sortBy)(t,n)).reverse();break;case e.VariableSort.alphabeticalCaseInsensitiveAsc:t=(0,Re.sortBy)(t,(e=>(0,Re.toLower)(e.text)));break;case e.VariableSort.alphabeticalCaseInsensitiveDesc:t=(t=(0,Re.sortBy)(t,(e=>(0,Re.toLower)(e.text)))).reverse();break;case e.VariableSort.naturalAsc||7:t=a(t);break;case e.VariableSort.naturalDesc||8:t=(t=a(t)).reverse()}return t})(d,r)})(r,this.state.sort,t))})),(0,S.catchError)((e=>e.cancelled?(0,S.of)([]):(0,S.throwError)((()=>e)))))})))):(0,S.of)([])}getRequest(t,r){const n={__sceneObject:{text:"__sceneObject",value:this}};r&&(n.__searchFilter={value:r,text:r});const a=ct.getTimeRange(this).state.value;return{app:e.CoreApp.Dashboard,requestId:D(),timezone:"",range:a,interval:"",intervalMs:0,targets:[t],scopedVars:n,startTime:Date.now()}}}function ua(e,t){const r=["A","B","C","D","E","F","G","H"],n=[];if(t>5)return[];for(const a of r){const r=`${e}${a}`;n.push({name:r,children:ua(r,t+1)})}return n}function ca(e,t,r){if(r>=t.length)return e;if("*"===t[r])return e;const n=t[r];let a=[],o=[n];n.startsWith("{")&&(o=n.replace(/\{|\}/g,"").split(","));for(const n of e)for(const e of o)if(-1!==e.indexOf("*")){const o=e.replace("*","");new RegExp(`^${o}.*`,"gi").test(n.name)&&(a=a.concat(ca([n],t,r+1)))}else n.name===e&&(a=a.concat(ca(n.children,t,r+1)));return a}function da(e){return 0===e.indexOf("value")?[{name:e,children:[]}]:ca(ua("",0),e.split("."),0)}la.Component=({model:e})=>xn(e);var pa=Object.defineProperty,ha=Object.getOwnPropertySymbols,fa=Object.prototype.hasOwnProperty,ma=Object.prototype.propertyIsEnumerable,ga=(e,t,r)=>t in e?pa(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function ya({model:e}){const{value:n,key:a,loading:o}=e.useState(),i=(0,t.useCallback)((t=>{e.setValue(t.currentTarget.value)}),[e]),s=(0,t.useCallback)((t=>{"Enter"===t.key&&e.setValue(t.currentTarget.value)}),[e]);return r().createElement(tr.AutoSizeInput,{id:a,placeholder:"Enter value",minWidth:15,defaultValue:n,loading:o,onBlur:i,onKeyDown:s})}(class extends Cn{constructor(t){super(((e,t)=>{for(var r in t||(t={}))fa.call(t,r)&&ga(e,r,t[r]);if(ha)for(var r of ha(t))ma.call(t,r)&&ga(e,r,t[r]);return e})({type:"custom",name:"Test",value:"Value",text:"Text",query:"Query",options:[],refresh:e.VariableRefresh.onDashboardLoad},t)),this.completeUpdate=new S.Subject,this.isGettingValues=!0,this.getValueOptionsCount=0,this._variableDependency=new ht(this,{statePaths:["query"]})}getValueOptions(e){const{delayMs:t}=this.state;return this.getValueOptionsCount+=1,new S.Observable((e=>{if(this.setState({loading:!0}),this.state.throwError)throw new Error(this.state.throwError);const r=this.completeUpdate.subscribe({next:()=>{e.next(this.issueQuery()),e.complete()}});let n;return t?n=window.setTimeout((()=>this.signalUpdateCompleted()),t):0===t&&this.signalUpdateCompleted(),this.isGettingValues=!0,()=>{r.unsubscribe(),window.clearTimeout(n),this.setState({loading:!1}),this.isGettingValues=!1}}))}cancel(){const e=te(this,(e=>e instanceof vn?e:void 0));null==e||e.cancel(this)}issueQuery(){const e=ct.interpolate(this,this.state.query),t=this.getOptions(e);return this.setState({issuedQuery:e,options:t}),t}getOptions(e){return this.state.optionsToReturn?this.state.optionsToReturn:da(e).map((e=>({label:e.name,value:e.name})))}signalUpdateCompleted(){this.completeUpdate.next(1)}}).Component=({model:e})=>xn(e);var ba=Object.defineProperty,va=Object.getOwnPropertySymbols,wa=Object.prototype.hasOwnProperty,Sa=Object.prototype.propertyIsEnumerable,_a=(e,t,r)=>t in e?ba(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;(class extends Q{constructor(e){super(((e,t)=>{for(var r in t||(t={}))wa.call(t,r)&&_a(e,r,t[r]);if(va)for(var r of va(t))Sa.call(t,r)&&_a(e,r,t[r]);return e})({type:"textbox",value:"",name:""},e)),this._urlSync=new pe(this,{keys:[this.getKey()]})}getValue(){return this.state.value}setValue(e){e!==this.state.value&&(this.setState({value:e}),this.publishEvent(new De(this),!0))}getKey(){return`var-${this.state.name}`}getUrlState(){return{[this.getKey()]:this.state.value}}updateFromUrl(e){const t={},r=e[this.getKey()];"string"==typeof r&&(t.value=r),this.setState(t)}}).Component=({model:e})=>r().createElement(ya,{model:e}),Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;var Oa=Object.defineProperty,xa=Object.getOwnPropertySymbols,Ca=Object.prototype.hasOwnProperty,Pa=Object.prototype.propertyIsEnumerable,Da=(e,t,r)=>t in e?Oa(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;(class extends Q{constructor(e){super(((e,t)=>{for(var r in t||(t={}))Ca.call(t,r)&&Da(e,r,t[r]);if(xa)for(var r of xa(t))Pa.call(t,r)&&Da(e,r,t[r]);return e})({type:"interval",value:"",intervals:["1m","10m","30m","1h","6h","12h","1d","7d","14d","30d"],name:"",autoStepCount:30,autoMinInterval:"10s",autoEnabled:!1,refresh:ne.onTimeRangeChanged},e)),this._onChange=e=>{this.setState({value:e.value}),this.publishEvent(new De(this),!0)},this._urlSync=new pe(this,{keys:[this.getKey()]})}getKey(){return`var-${this.state.name}`}getUrlState(){return{[this.getKey()]:this.state.value}}updateFromUrl(e){const t={},r=e[this.getKey()];"string"==typeof r&&(r.startsWith("$__auto_interval_")?t.value=$e:t.value=r),this.setState(t)}getOptionsForSelect(){const{value:e,intervals:t,autoEnabled:r}=this.state;let n=t.map((e=>({value:e,label:e})));return r&&(n=[{value:$e,label:"Auto"},...n]),e&&!n.some((t=>t.value===e))&&n.push({value:e,label:e}),n}getValue(){const{value:e,autoStepCount:t,autoMinInterval:r}=this.state;return e===$e?this.getAutoRefreshInteval(t,r):e}getAutoRefreshInteval(t,r){const n=ct.getTimeRange(this).state.value;return e.rangeUtil.calculateInterval(n,t,r).interval}validateAndUpdate(){const{value:e,intervals:t}=this.state;let r=!1;if(e===$e)r=!0;else if(!e&&t.length>0){const e=t[0];this.setState({value:e}),r=!0}return r&&this.publishEvent(new De(this),!0),(0,S.of)({})}}).Component=({model:e})=>{const{key:t,value:n}=e.useState();return r().createElement(tr.Select,{id:t,placeholder:"Select value",width:"auto",value:n,tabSelectsValue:!1,options:e.getOptionsForSelect(),onChange:e._onChange})};class Ea{constructor(e){this._variable=e}getKey(){return`var-${this._variable.state.name}`}getKeys(){return[this.getKey()]}getUrlState(){const e=this._variable.state.filters.map((e=>function(e){return[e.key,e.operator,e.value]}(e).map(Ra).join("|")));return{[this.getKey()]:e}}updateFromUrl(e){const t=e[this.getKey()];if(null==t)return;const r=function(e){if(Array.isArray(e))return e.map(Ta).filter(ka);const t=Ta(e);return null===t?[]:[t]}(t);this._variable.setState({filters:r})}}function Ra(e){return null==e?"":/\|/g[Symbol.replace](e,"__gfp__")}function ja(e){return null==e?"":/__gfp__/g[Symbol.replace](e,"|")}function Ta(e){if("string"!=typeof e||0===e.length)return null;const t=e.split("|").map(ja);return{key:t[0],operator:t[1],value:t[2],condition:""}}function ka(e){return null!==e&&"string"==typeof e.key&&"string"==typeof e.value}var Aa=Object.defineProperty,Ia=Object.defineProperties,Va=Object.getOwnPropertyDescriptors,Fa=Object.getOwnPropertySymbols,La=Object.prototype.hasOwnProperty,Ma=Object.prototype.propertyIsEnumerable,za=(e,t,r)=>t in e?Aa(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Na=(e,t)=>{for(var r in t||(t={}))La.call(t,r)&&za(e,r,t[r]);if(Fa)for(var r of Fa(t))Ma.call(t,r)&&za(e,r,t[r]);return e},Ha=(e,t)=>Ia(e,Va(t));function Ba({filter:n,model:a}){var o,i;const s=(0,tr.useStyles2)(Ua),[l,u]=(0,t.useState)({}),c=""!==n.key?(0,e.toOption)(n.key):null,d=""!==n.value?(0,e.toOption)(n.value):null,p=r().createElement(tr.Select,{disabled:a.state.readOnly,className:l.isKeysOpen?s.widthWhenOpen:void 0,width:"auto",value:d,placeholder:"value",options:l.values,onChange:e=>a._updateFilter(n,"value",e.value),isOpen:l.isValuesOpen,isLoading:l.isValuesLoading,onOpenMenu:async()=>{u(Ha(Na({},l),{isValuesLoading:!0}));const e=await a._getValuesFor(n);u(Ha(Na({},l),{isValuesLoading:!1,isValuesOpen:!0,values:e}))},onCloseMenu:()=>{u(Ha(Na({},l),{isValuesOpen:!1}))}}),h=r().createElement(tr.Select,{disabled:a.state.readOnly,className:l.isKeysOpen?s.widthWhenOpen:void 0,width:"auto",value:c,placeholder:"Select label",options:l.keys,onChange:e=>a._updateFilter(n,"key",e.value),autoFocus:""===n.key,isOpen:l.isKeysOpen,isLoading:l.isKeysLoading,onOpenMenu:async()=>{u(Ha(Na({},l),{isKeysLoading:!0}));const e=await a._getKeys(n.key);u(Ha(Na({},l),{isKeysLoading:!1,isKeysOpen:!0,keys:e}))},onCloseMenu:()=>{u(Ha(Na({},l),{isKeysOpen:!1}))},openMenuOnFocus:!0});if("vertical"===a.state.layout){if(n.key){const e=r().createElement(en,{layout:"vertical",label:null!=(o=n.key)?o:"",onRemove:()=>a._removeFilter(n)});return r().createElement(tr.Field,{label:e,"data-testid":`AdHocFilter-${n.key}`,className:s.field},p)}return r().createElement(tr.Field,{label:"Select label","data-testid":`AdHocFilter-${n.key}`,className:s.field},h)}return r().createElement("div",{className:s.wrapper,"data-testid":`AdHocFilter-${n.key}`},h,r().createElement(tr.Select,{value:n.operator,disabled:a.state.readOnly,options:a._getOperators(),width:"auto",onChange:e=>a._updateFilter(n,"operator",e.value)}),p,r().createElement(tr.Button,{variant:"secondary","aria-label":"Remove filter",title:"Remove filter",className:s.removeButton,icon:"times","data-testid":`AdHocFilter-remove-${null!=(i=n.key)?i:""}`,onClick:()=>a._removeFilter(n)}))}const Ua=e=>({field:(0,rr.css)({marginBottom:0}),wrapper:(0,rr.css)({display:"flex","> *":{"&:not(:first-child)":{marginLeft:-1},"&:first-child":{borderTopRightRadius:0,borderBottomRightRadius:0},"&:last-child":{borderTopLeftRadius:0,borderBottomLeftRadius:0},"&:not(:first-child):not(:last-child)":{borderRadius:0},position:"relative",zIndex:0,"&:hover":{zIndex:1},"&:focus-within":{zIndex:2}}}),widthWhenOpen:(0,rr.css)({minWidth:e.spacing(16)}),removeButton:(0,rr.css)({paddingLeft:e.spacing(1.5),paddingRight:e.spacing(1.5),borderLeft:"none",position:"relative",left:"1px"})});function $a({model:e}){const{_wip:t}=e.useState();return t?r().createElement(Ba,{filter:t,model:e}):r().createElement(tr.Button,{variant:"secondary",icon:"plus",title:"Add filter","aria-label":"Add filter","data-testid":"AdHocFilter-add",onClick:()=>e._addWip()})}var Wa=Object.defineProperty,qa=Object.defineProperties,Ga=Object.getOwnPropertyDescriptors,Qa=Object.getOwnPropertySymbols,Ya=Object.prototype.hasOwnProperty,Ka=Object.prototype.propertyIsEnumerable,Xa=(e,t,r)=>t in e?Wa(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Za=(e,t)=>{for(var r in t||(t={}))Ya.call(t,r)&&Xa(e,r,t[r]);if(Qa)for(var r of Qa(t))Ka.call(t,r)&&Xa(e,r,t[r]);return e},Ja=(e,t)=>qa(e,Ga(t));class eo extends Q{constructor(e){super(Za({name:"Filters",filters:[],baseFilters:[],datasource:null,applyMode:"same-datasource",layout:"horizontal"},e)),this._urlSync=new Ea(this),this._scopedVars={__sceneObject:{value:this}},this._dataSourceSrv=(0,u.getDataSourceSrv)(),"same-datasource"===this.state.applyMode&&function(e){if(e.addActivationHandler((()=>(Mr.add(e),()=>Mr.delete(e)))),Lr)return;const t=(0,u.getTemplateSrv)();(null==t?void 0:t.getAdhocFilters)?(Lr=t.getAdhocFilters,t.getAdhocFilters=function(e){var r;if(0===Mr.size)return Lr.call(t);const n=(0,u.getDataSourceSrv)().getInstanceSettings(e);if(!n)return[];for(const e of Mr.values())if((null==(r=e.state.datasource)?void 0:r.uid)===n.uid)return e.state.filters;return[]}.bind(t)):console.log("Failed to patch getAdhocFilters")}(this)}_updateFilter(e,t,r){if(null==r)return;const{filters:n,_wip:a}=this.state;if(e===a)return void("value"===t?this.setState({filters:[...n,Ja(Za({},a),{[t]:r})],_wip:void 0}):this.setState({_wip:Ja(Za({},e),{[t]:r})}));const o=this.state.filters.map((n=>n===e?Ja(Za({},n),{[t]:r}):n));this.setState({filters:o})}_removeFilter(e){e!==this.state._wip?this.setState({filters:this.state.filters.filter((t=>t!==e))}):this.setState({_wip:void 0})}async _getKeys(e){var t,r;const n=await(null==(r=(t=this.state).getTagKeysProvider)?void 0:r.call(t,this,e));if(n&&n.replace)return n.values.map(ro);const a=await this._dataSourceSrv.get(this.state.datasource,this._scopedVars);if(!a||!a.getTagKeys)return[];const o=this.state.filters.filter((t=>t.key!==e)).concat(this.state.baseFilters);let i=await a.getTagKeys({filters:o});n&&(i=i.concat(n.values));const s=this.state.tagKeyRegexFilter;return s&&(i=i.filter((e=>e.text.match(s)))),i.map(ro)}async _getValuesFor(e){var t,r;const n=await(null==(r=(t=this.state).getTagValuesProvider)?void 0:r.call(t,this,e));if(n&&n.replace)return n.values.map(ro);const a=await this._dataSourceSrv.get(this.state.datasource,this._scopedVars);if(!a||!a.getTagValues)return[];const o=this.state.filters.filter((t=>t.key!==e.key)).concat(this.state.baseFilters);let i=await a.getTagValues({key:e.key,filters:o});return n&&(i=i.concat(n.values)),i.map(ro)}_addWip(){this.setState({_wip:{key:"",value:"",operator:"=",condition:""}})}_getOperators(){return["=","!=","<",">","=~","!~"].map((e=>({label:e,value:e})))}}eo.Component=function({model:e}){const{filters:t,readOnly:n,layout:a,name:o}=e.useState(),i=(0,tr.useStyles2)(to);return r().createElement("div",{className:i.wrapper},"vertical"!==a&&r().createElement(en,{label:null!=o?o:"Filters",icon:"filter"}),t.map(((t,n)=>r().createElement(r().Fragment,{key:n},r().createElement(Ba,{filter:t,model:e})))),!n&&r().createElement($a,{model:e,key:"'builder"}))};const to=e=>({wrapper:(0,rr.css)({display:"flex",gap:e.spacing(2),alignItems:"flex-end"}),filterIcon:(0,rr.css)({color:e.colors.text.secondary,paddingRight:e.spacing(.5)})});function ro({text:e,value:t}){return{label:e,value:String(null!=t?t:e)}}var no=Object.defineProperty,ao=Object.defineProperties,oo=Object.getOwnPropertyDescriptors,io=Object.getOwnPropertySymbols,so=Object.prototype.hasOwnProperty,lo=Object.prototype.propertyIsEnumerable,uo=(e,t,r)=>t in e?no(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,co=(e=>(e[e.dontHide=0]="dontHide",e[e.hideLabel=1]="hideLabel",e[e.hideVariable=2]="hideVariable",e))(co||{});ao(((e,t)=>{for(var r in t||(t={}))so.call(t,r)&&uo(e,r,t[r]);if(io)for(var r of io(t))lo.call(t,r)&&uo(e,r,t[r]);return e})({},{id:"00000000-0000-0000-0000-000000000000",multi:!1,options:[],skipUrlSync:!1}),oo({description:null,hide:0,datasource:null}));var po=Object.defineProperty,ho=Object.defineProperties,fo=Object.getOwnPropertyDescriptors,mo=Object.getOwnPropertySymbols,go=Object.prototype.hasOwnProperty,yo=Object.prototype.propertyIsEnumerable,bo=(e,t,r)=>t in e?po(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,vo=(e,t)=>{for(var r in t||(t={}))go.call(t,r)&&bo(e,r,t[r]);if(mo)for(var r of mo(t))yo.call(t,r)&&bo(e,r,t[r]);return e},wo=(e,t)=>ho(e,fo(t));const So=class extends Q{static create(e){var t;return new So({type:"adhoc",hide:co.hideLabel,name:null!=(t=e.name)?t:"Filters",set:new eo(wo(vo({},e),{applyMode:"manual"}))})}constructor(e){var t;super(wo(vo({},e),{filterExpression:null!=(t=e.filterExpression)?t:_o(e.set.state.filters)})),this.addActivationHandler((()=>{this._subs.add(this.state.set.subscribeToState(((e,t)=>{e.filters!==t.filters&&this._updateFilterExpression(e.filters,!0)}))),this._updateFilterExpression(this.state.set.state.filters,!1)}))}getValue(){return this.state.filterExpression}_updateFilterExpression(e,t){let r=_o(e);r!==this.state.filterExpression&&(this.setState({filterExpression:r}),t&&this.publishEvent(new De(this),!0))}};function _o(e){let t="";for(const r of e)t+=`${Oo(r)},`;return t.length>0&&(t=t.slice(0,-1)),t}function Oo(e){let t="";return t="=~"===e.operator||"!~"===e.operator?xo(function(e){return e.replace(Co,"\\$&")}(e.value)):xo(e.value),`${e.key}${e.operator}"${t}"`}function xo(e){return e.replace(/\\/g,"\\\\").replace(/\n/g,"\\n").replace(/"/g,'\\"')}So.Component=({model:e})=>r().createElement(eo.Component,{model:e.state.set});const Co=/[*+?()|\\.\[\]{}^$]/g;class Po{constructor(){this.urlKeyMapper=new Do,this._stateSub=null,this._locationSub=null,this._onLocationUpdate=e=>{if(this._lastPath!==e.pathname)return;const t=new URLSearchParams(e.search);this.urlKeyMapper.rebuildIndex(this._sceneRoot),this._syncSceneStateFromUrl(this._sceneRoot,t),this._lastPath=e.pathname},this._onStateChanged=({payload:e})=>{const t=e.changedObject;if(t.urlSync){const e=t.urlSync.getUrlState(),r=u.locationService.getSearch(),n={};this.urlKeyMapper.rebuildIndex(this._sceneRoot);for(const[a,o]of Object.entries(e)){const e=this.urlKeyMapper.getUniqueKey(a,t);Eo(r.getAll(e),o)||(n[e]=o)}Object.keys(n).length>0&&u.locationService.partial(n,!0)}}}initSync(e){this._locationSub||(er("UrlSyncManager","New location listen"),this._locationSub=u.locationService.getHistory().listen(this._onLocationUpdate)),this._stateSub&&(er("UrlSyncManager","Unregister previous scene state subscription",this._sceneRoot.state.key),this._stateSub.unsubscribe()),this._sceneRoot=e,this._lastPath=u.locationService.getLocation().pathname,this._stateSub=e.subscribeToEvent(L,this._onStateChanged),this.syncFrom(this._sceneRoot)}cleanUp(e){this._sceneRoot===e&&(er("UrlSyncManager","Clean up"),this._locationSub&&(this._locationSub(),er("UrlSyncManager","Unregister history listen"),this._locationSub=null),this._stateSub&&(this._stateSub.unsubscribe(),this._stateSub=null,er("UrlSyncManager","Root deactived, unsub to state","same key",this._sceneRoot.state.key===e.state.key)))}syncFrom(e){const t=u.locationService.getSearch();this.urlKeyMapper.rebuildIndex(this._sceneRoot),this._syncSceneStateFromUrl(e,t)}_syncSceneStateFromUrl(e,t){if(e.urlSync){const r={},n=e.urlSync.getUrlState();for(const a of e.urlSync.getKeys()){const o=this.urlKeyMapper.getUniqueKey(a,e),i=t.getAll(o),s=n[a];Eo(i,s)||(i.length>0?Array.isArray(s)?r[a]=i:r[a]=i[0]:r[a]=null)}Object.keys(r).length>0&&e.urlSync.updateFromUrl(r)}e.forEachChild((e=>this._syncSceneStateFromUrl(e,t)))}getUrlState(e){const t=new Do;t.rebuildIndex(e);const r={},n=e=>{if(e.urlSync){const n=e.urlSync.getUrlState();for(const[a,o]of Object.entries(n))if(null!=o){const n=t.getUniqueKey(a,e);r[n]=o}}e.forEachChild(n)};return n(e),r}}class Do{constructor(){this.index=new Map}getUniqueKey(e,t){const r=this.index.get(e);if(!r)throw new Error("Cannot find any scene object that uses the key '"+e+"'");const n=r.findIndex((e=>e.sceneObject===t));return n>0?`${e}-${n+1}`:e}rebuildIndex(e){this.index.clear(),this.buildIndex(e,0)}buildIndex(e,t){if(e.urlSync)for(const r of e.urlSync.getKeys()){const n=this.index.get(r);n?(n.push({sceneObject:e,depth:t}),n.sort(((e,t)=>e.depth-t.depth))):this.index.set(r,[{sceneObject:e,depth:t}])}e.forEachChild((e=>this.buildIndex(e,t+1)))}}function Eo(e,t){return 0===e.length&&null==t||(Array.isArray(t)||1!==(null==e?void 0:e.length)?0===(null==t?void 0:t.length)&&null===e||(0,Re.isEqual)(e,t):t===e[0])}let Ro;function jo(){return Ro||(Ro=new Po),Ro}class To extends Q{constructor(e){super(e),this.addActivationHandler((()=>{const e=function(e){const t=window.__grafanaSceneContext;return er("setWindowGrafanaScene","set window.__grafanaSceneContext",e),window.__grafanaSceneContext=e,()=>{window.__grafanaSceneContext===e&&(er("setWindowGrafanaScene","restore window.__grafanaSceneContext",t),window.__grafanaSceneContext=t)}}(this);return()=>{e(),jo().cleanUp(this)}}))}initUrlSync(){jo().initSync(this)}}To.Component=function({model:e}){const{body:t,controls:n}=e.useState(),a=(0,tr.useStyles2)(ko);return r().createElement("div",{className:a.container},n&&r().createElement("div",{className:a.controls},n.map((e=>r().createElement(e.Component,{key:e.state.key,model:e})))),r().createElement("div",{className:a.body},r().createElement(t.Component,{model:t})))};const ko=e=>({container:(0,rr.css)({flexGrow:1,display:"flex",gap:e.spacing(2),minHeight:"100%",flexDirection:"column"}),body:(0,rr.css)({flexGrow:1,display:"flex",gap:e.spacing(1)}),controls:(0,rr.css)({display:"flex",gap:e.spacing(2),alignItems:"flex-end",flexWrap:"wrap"})});var Ao=function(){},Io="undefined"!=typeof window;const Vo=Io?t.useLayoutEffect:t.useEffect;var Fo={x:0,y:0,width:0,height:0,top:0,left:0,bottom:0,right:0};const Lo=Io&&void 0!==window.ResizeObserver?function(){var e=(0,t.useState)(null),r=e[0],n=e[1],a=(0,t.useState)(Fo),o=a[0],i=a[1],s=(0,t.useMemo)((function(){return new window.ResizeObserver((function(e){if(e[0]){var t=e[0].contentRect,r=t.x,n=t.y,a=t.width,o=t.height,s=t.top,l=t.left,u=t.bottom,c=t.right;i({x:r,y:n,width:a,height:o,top:s,left:l,bottom:u,right:c})}}))}),[]);return Vo((function(){if(r)return s.observe(r),function(){s.disconnect()}}),[r]),[n,o]}:function(){return[Ao,Fo]};function Mo(e,t){if(t)return t;let r=e.error?e.error.message:void 0;return e.errors&&(r=e.errors.map((e=>e.message)).join(", ")),r}const zo=(0,rr.css)({position:"relative",width:"100%",height:"100%"}),No=(0,rr.css)({position:"absolute",width:"100%",height:"100%"}),Ho=e=>({ok:(0,rr.css)({color:e.colors.success.text}),pending:(0,rr.css)({color:e.colors.warning.text}),alerting:(0,rr.css)({color:e.colors.error.text})});var Bo=Object.defineProperty,Uo=Object.defineProperties,$o=Object.getOwnPropertyDescriptors,Wo=Object.getOwnPropertySymbols,qo=Object.prototype.hasOwnProperty,Go=Object.prototype.propertyIsEnumerable,Qo=(e,t,r)=>t in e?Bo(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Yo=(e,t)=>{for(var r in t||(t={}))qo.call(t,r)&&Qo(e,r,t[r]);if(Wo)for(var r of Wo(t))Go.call(t,r)&&Qo(e,r,t[r]);return e},Ko=(e,t)=>Uo(e,$o(t));const Xo="hideSeriesFrom",Zo=(0,e.isSystemOverrideWithRef)(Xo);function Jo(t,r=e.ByNamesMatcherMode.exclude,n){return n=null!=n?n:{id:"custom.hideFrom",value:{viz:!0,legend:!1,tooltip:!1}},{__systemRef:Xo,matcher:{id:e.FieldMatcherID.byNames,options:{mode:r,names:t,prefix:r===e.ByNamesMatcherMode.exclude?"All except:":void 0,readOnly:!0}},properties:[Ko(Yo({},n),{value:{viz:!0,legend:!1,tooltip:!1}})]}}const ei=e=>{var t;const r=null==(t=e.matcher.options)?void 0:t.names;return Array.isArray(r)?[...r]:[]},ti=(t,r)=>{const n=new Set;for(const a of t)for(const o of a.fields){if(o.type!==e.FieldType.number)continue;const i=(0,e.getFieldDisplayName)(o,a,t);i!==r&&n.add(i)}return Array.from(n)},ri=(t,r)=>{var n;let a=[];for(const o of t){const t=o.properties.find((e=>"custom.hideFrom"===e.id));if(void 0!==t&&!0===(null==(n=t.value)?void 0:n.legend)){const t=e.fieldMatchers.get(o.matcher.id).get(o.matcher.options);for(const n of r)for(const o of n.fields){if(o.type!==e.FieldType.number)continue;const i=(0,e.getFieldDisplayName)(o,n,r);t(o,n,r)&&a.push(i)}}}return a};var ni=Object.defineProperty,ai=Object.defineProperties,oi=Object.getOwnPropertyDescriptors,ii=Object.getOwnPropertySymbols,si=Object.prototype.hasOwnProperty,li=Object.prototype.propertyIsEnumerable,ui=(e,t,r)=>t in e?ni(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ci=(e,t)=>{for(var r in t||(t={}))si.call(t,r)&&ui(e,r,t[r]);if(ii)for(var r of ii(t))li.call(t,r)&&ui(e,r,t[r]);return e},di=(e,t)=>ai(e,oi(t));const pi=(t,r)=>({matcher:{id:e.FieldMatcherID.byName,options:t},properties:[hi(r)]}),hi=t=>({id:"color",value:{mode:e.FieldColorModeId.Fixed,fixedColor:t}});var fi=Object.defineProperty,mi=Object.defineProperties,gi=Object.getOwnPropertyDescriptors,yi=Object.getOwnPropertySymbols,bi=Object.prototype.hasOwnProperty,vi=Object.prototype.propertyIsEnumerable,wi=(e,t,r)=>t in e?fi(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Si=(e,t)=>{for(var r in t||(t={}))bi.call(t,r)&&wi(e,r,t[r]);if(yi)for(var r of yi(t))vi.call(t,r)&&wi(e,r,t[r]);return e},_i=(e,t)=>mi(e,gi(t));class Oi extends Q{constructor(t){super(Si({options:{},fieldConfig:{defaults:{},overrides:[]},title:"Title",pluginId:"timeseries"},t)),this._variableDependency=new ht(this,{statePaths:["title","options","fieldConfig"]}),this._structureRev=0,this.onTimeRangeChange=t=>{ct.getTimeRange(this).onTimeRangeChange({raw:{from:(0,e.toUtc)(t.from),to:(0,e.toUtc)(t.to)},from:(0,e.toUtc)(t.from),to:(0,e.toUtc)(t.to)})},this.onTitleChange=e=>{this.setState({title:e})},this.onDescriptionChange=e=>{this.setState({description:e})},this.onDisplayModeChange=e=>{this.setState({displayMode:e})},this.onOptionsChange=(t,r=!1)=>{const{fieldConfig:n,options:a}=this.state,o=r?t:(0,Re.mergeWith)((0,Re.cloneDeep)(a),t,((e,t)=>{if((0,Re.isArray)(t))return t})),i=(0,e.getPanelOptionsWithDefaults)({plugin:this._plugin,currentOptions:o,currentFieldConfig:n,isAfterPluginChange:!1});this.setState({options:i.options})},this.onFieldConfigChange=(t,r)=>{const{fieldConfig:n,options:a}=this.state,o=r?t:(0,Re.merge)((0,Re.cloneDeep)(n),t),i=(0,e.getPanelOptionsWithDefaults)({plugin:this._plugin,currentOptions:a,currentFieldConfig:o,isAfterPluginChange:!1});this.setState({fieldConfig:i.fieldConfig})},this.interpolate=(e,t,r)=>ct.interpolate(this,e,t,r),this.getDescription=()=>{this.publishEvent(new M({origin:this,interaction:"panel-description-shown"}),!0);const{description:t}=this.state;if(t){const r=this.interpolate(t);return(0,e.renderMarkdown)(r)}return""},this.onCancelQuery=()=>{var e;this.publishEvent(new M({origin:this,interaction:"panel-cancel-query-clicked"}),!0);const t=ct.getData(this);null==(e=t.cancelQuery)||e.call(t)},this.onStatusMessageClick=()=>{this.publishEvent(new M({origin:this,interaction:"panel-status-message-clicked"}),!0)},this._onSeriesColorChange=(t,r)=>{this.onFieldConfigChange(((t,r,n)=>{const{overrides:a}=n,o=n.overrides.findIndex((r=>r.matcher.id===e.FieldMatcherID.byName&&r.matcher.options===t));if(o<0)return di(ci({},n),{overrides:[...n.overrides,pi(t,r)]});const i=Array.from(a),s=i[o],l=s.properties.findIndex((e=>"color"===e.id));if(l<0)return i[o]=di(ci({},s),{properties:[...s.properties,hi(r)]}),di(ci({},n),{overrides:i});const u=Array.from(s.properties);return u[l]=hi(r),i[o]=di(ci({},s),{properties:u}),di(ci({},n),{overrides:i})})(t,r,this.state.fieldConfig))},this._onSeriesVisibilityChange=(t,r)=>{this._dataWithFieldConfig&&this.onFieldConfigChange(function(t,r,n,a){const{overrides:o}=n,i=t,s=o.findIndex(Zo);if(s<0){if(r===tr.SeriesVisibilityChangeMode.ToggleSelection){const e=Jo([i,...ri(o,a)]);return Ko(Yo({},n),{overrides:[...n.overrides,e]})}const e=Jo(ti(a,i));return Ko(Yo({},n),{overrides:[...n.overrides,e]})}const l=Array.from(o),[u]=l.splice(s,1);if(r===tr.SeriesVisibilityChangeMode.ToggleSelection){let e=ei(u);const t=ri(l,a);if(t.length>0&&(e=e.filter((e=>t.indexOf(e)<0))),e[0]===i&&1===e.length)return Ko(Yo({},n),{overrides:l});const r=Jo([i,...t]);return Ko(Yo({},n),{overrides:[...l,r]})}const c=((t,r,n=e.ByNamesMatcherMode.exclude)=>{const a=t.properties.find((e=>"custom.hideFrom"===e.id)),o=ei(t),i=o.findIndex((e=>e===r));return i<0?o.push(r):o.splice(i,1),Jo(o,n,a)})(u,i);return((e,t)=>ei(e).length===ti(t).length)(c,a)?Ko(Yo({},n),{overrides:l}):Ko(Yo({},n),{overrides:[...l,c]})}(t,r,this.state.fieldConfig,this._dataWithFieldConfig.series),!0)},this._onInstanceStateChange=e=>{this.setState({_pluginInstanceState:e})},this._onToggleLegendSort=e=>{const t=this.state.options.legend;if(!t)return;let r=t.sortDesc,n=t.sortBy;e!==n&&(r=void 0),!1===r?(n=void 0,r=void 0):(r=!r,n=e),this.onOptionsChange(_i(Si({},this.state.options),{legend:_i(Si({},t),{sortBy:n,sortDesc:r})}))},this.addActivationHandler((()=>{this._onActivate()})),t.menu&&t.menu.addActivationHandler((()=>{this.publishEvent(new M({origin:this,interaction:"panel-menu-shown"}),!0)}))}_onActivate(){this._plugin||this._loadPlugin(this.state.pluginId)}_loadPlugin(t){const r=function(e){var t;const{getPanelPluginFromCache:r}=(0,u.getPluginImportUtils)();return null!=(t=r(e))?t:w.get(e)}(t);if(r)this._pluginLoaded(r);else{const{importPanelPlugin:r}=(0,u.getPluginImportUtils)();try{r(t).then((e=>this._pluginLoaded(e)))}catch(r){this._pluginLoaded(function(t,r){const n=new e.PanelPlugin((()=>null));return n.meta={id:t,name:t,sort:100,type:e.PluginType.panel,module:"",baseUrl:"",info:{author:{name:""},description:"",links:[],logos:{large:"",small:"public/img/grafana_icon.svg"},screenshots:[],updated:"",version:""}},n}(t)),this.setState({_pluginLoadError:r.message})}}}async _pluginLoaded(t){const{options:r,fieldConfig:n,title:a,pluginVersion:o,_UNSAFE_customMigrationHandler:i}=this.state,s={title:a,options:r,fieldConfig:n,id:1,type:t.meta.id,pluginVersion:o},l=this._getPluginVersion(t);i&&i(s,t),t.onPanelMigration&&l!==this.state.pluginVersion&&(s.options=await t.onPanelMigration(s));const u=(0,e.getPanelOptionsWithDefaults)({plugin:t,currentOptions:s.options,currentFieldConfig:s.fieldConfig,isAfterPluginChange:!1});if(this._plugin=t,this.setState({options:u.options,fieldConfig:u.fieldConfig,pluginVersion:l}),t.meta.skipDataQuery){const e=ct.getTimeRange(this);this._subs.add(e.subscribeToState((()=>this.forceRender())))}}_getPluginVersion(e){return e&&e.meta.info.version?e.meta.info.version:u.config.buildInfo.version}getPlugin(){return this._plugin}getPanelContext(){return this._panelContext||(this._panelContext=this.buildPanelContext()),this._panelContext}applyFieldConfig(t){var r,n;const a=this._plugin;if(!a||a.meta.skipDataQuery||!t)return de;const o=a.dataSupport||{alertStates:!1,annotations:!1},i=a.fieldConfigRegistry,s=null==(r=this._prevData)?void 0:r.series,l=null==t?void 0:t.series;return null==t.structureRev&&l&&s&&!(0,e.compareArrayValues)(l,s,e.compareDataFrameStructures)&&this._structureRev++,this._dataWithFieldConfig=_i(Si({},t),{structureRev:this._structureRev,series:(0,e.applyFieldOverrides)({data:l,fieldConfig:this.state.fieldConfig,fieldConfigRegistry:i,replaceVariables:this.interpolate,theme:u.config.theme2,timeZone:null==(n=t.request)?void 0:n.timezone})}),o.alertStates||(this._dataWithFieldConfig.alertState=void 0),o.annotations||(this._dataWithFieldConfig.annotations=void 0),this._dataWithFieldConfig}buildPanelContext(){const t=(this,ct.findObject(this,(e=>e instanceof St)));const r={eventsScope:t?t.getEventsScope():"__global_",eventBus:t?t.getEventsBus(this):(0,u.getAppEvents)(),app:e.CoreApp.Unknown,sync:()=>t?t.state.sync:e.DashboardCursorSync.Off,onSeriesColorChange:this._onSeriesColorChange,onToggleSeriesVisibility:this._onSeriesVisibilityChange,onToggleLegendSort:this._onToggleLegendSort,onInstanceStateChange:this._onInstanceStateChange};return this.state.extendPanelContext&&this.state.extendPanelContext(this,r),r}}function xi(e){return e instanceof hs}Oi.Component=function({model:t}){var n,a,o;const{title:i,options:s,fieldConfig:l,_pluginLoadError:c,$data:d,displayMode:p,hoverHeader:h,menu:f,headerActions:m,titleItems:g,description:y}=t.useState(),[b,{width:v,height:w}]=Lo(),S=t.getPlugin(),{dragClass:_,dragClassCancel:O}=function(e){var t,r;const n=ct.getLayout(e),a=null==n?void 0:n.isDraggable();return n&&a&&!function(e,t){let r=e.parent;for(;r&&r!==t;){if("isDraggable"in r.state&&!1===r.state.isDraggable)return!0;r=r.parent}return!1}(e,n)?{dragClass:null==(t=n.getDragClass)?void 0:t.call(n),dragClassCancel:null==(r=null==n?void 0:n.getDragClassCancel)?void 0:r.call(n)}:{dragClass:"",dragClassCancel:""}}(t),x=ct.getData(t),C=x.useState(),P=t.applyFieldConfig(C.data),D=ct.getTimeRange(t),E=D.getTimeZone(),R=function(e,t,r){var n;return!t||t.meta.skipDataQuery?e.state.value:r&&(null==(n=r.request)?void 0:n.range)?r.request.range:e.state.value}(D,S,P),j=t.interpolate(i,void 0,"text"),T=(0,tr.useStyles2)(Ho);if(!S)return r().createElement("div",null,"Loading plugin panel...");if(!S.panel)return r().createElement("div",null,"Panel plugin has no panel component");const k=S.panel;d&&d.setContainerWidth&&d.setContainerWidth(Math.round(v));let A,I,V=[];g&&(Array.isArray(g)?V=V.concat(g.map((e=>r().createElement(e.Component,{model:e,key:`${e.state.key}`})))):Vr(g)?V.push(r().createElement(g.Component,{model:g})):V.push(g)),t.state.$timeRange&&V.push(r().createElement(t.state.$timeRange.Component,{model:t.state.$timeRange,key:t.state.key})),P.alertState&&V.push(r().createElement(tr.Tooltip,{content:null!=(n=P.alertState.state)?n:"unknown",key:`alert-states-icon-${t.state.key}`},r().createElement(tr.PanelChrome.TitleItem,{className:(0,rr.cx)({[T.ok]:P.alertState.state===e.AlertState.OK,[T.pending]:P.alertState.state===e.AlertState.Pending,[T.alerting]:P.alertState.state===e.AlertState.Alerting})},r().createElement(tr.Icon,{name:"alerting"===P.alertState.state?"heart-break":"heart",className:"panel-alert-icon",size:"md"})))),f&&(A=r().createElement(f.Component,{model:f})),m&&(I=Array.isArray(m)?r().createElement(r().Fragment,null,m.map((e=>r().createElement(e.Component,{model:e,key:`${e.state.key}`})))):Vr(m)?r().createElement(m.Component,{model:m}):m);const F=P,L=!x.isDataReadyToDisplay||x.isDataReadyToDisplay(),M=t.getPanelContext(),z=null!=(o=null==(a=M.instanceState)?void 0:a.legacyPanelId)?o:1;return r().createElement("div",{className:zo},r().createElement("div",{ref:b,className:No,"data-viz-panel-key":t.state.key},v>0&&w>0&&r().createElement(tr.PanelChrome,{title:j,description:(null==y?void 0:y.trim())?t.getDescription:void 0,loadingState:F.state,statusMessage:Mo(F,c),statusMessageOnClick:t.onStatusMessageClick,width:v,height:w,displayMode:p,hoverHeader:h,titleItems:V,dragClass:_,actions:I,dragClassCancel:O,padding:S.noPadding?"none":"md",menu:A,onCancelQuery:t.onCancelQuery},((n,a)=>r().createElement(r().Fragment,null,r().createElement(tr.ErrorBoundaryAlert,{dependencies:[S,F]},r().createElement(e.PluginContextProvider,{meta:S.meta},r().createElement(tr.PanelContextProvider,{value:M},L&&r().createElement(k,{id:z,data:F,title:i,timeRange:R,timeZone:E,options:s,fieldConfig:l,transparent:!1,width:n,height:a,renderCounter:0,replaceVariables:t.interpolate,onOptionsChange:t.onOptionsChange,onFieldConfigChange:t.onFieldConfigChange,onChangeTimeRange:t.onTimeRangeChange,eventBus:(0,u.getAppEvents)()})))))))))},class extends Q{addItem(e){this.setState({items:this.state.items?[...this.state.items,e]:[e]})}setItems(e){this.setState({items:e})}}.Component=function({model:e}){const{items:n=[]}=e.useState(),a=r().useRef(null);(0,t.useEffect)((()=>{a.current&&a.current.focus()}),[]);const o=e=>e.map((e=>"divider"===e.type?r().createElement(tr.Menu.Divider,{key:e.text}):r().createElement(tr.Menu.Item,{key:e.text,label:e.text,icon:e.iconClassName,childItems:e.subMenu?o(e.subMenu):void 0,url:e.href,onClick:e.onClick,shortcut:e.shortcut})));return r().createElement(tr.Menu,{ref:a},o(n))},class extends Q{}.Component=function({model:e}){const{body:t}=e.useState(),n=e.parent;if(n&&!(n instanceof rs)&&!xi(n))throw new Error("SceneGridItem must be a child of SceneGridLayout or SceneGridRow");return t?r().createElement(t.Component,{model:t}):null};var Ci=d(788),Pi=d.n(Ci),Di=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),Ei=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ri=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},ji=void 0;ji="undefined"!=typeof window?window:"undefined"!=typeof self?self:d.g;var Ti=null,ki=null,Ai=ji.clearTimeout,Ii=ji.setTimeout,Vi=ji.cancelAnimationFrame||ji.mozCancelAnimationFrame||ji.webkitCancelAnimationFrame,Fi=ji.requestAnimationFrame||ji.mozRequestAnimationFrame||ji.webkitRequestAnimationFrame;null==Vi||null==Fi?(Ti=Ai,ki=function(e){return Ii(e,20)}):(Ti=function(e){var t=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(n=(i=s.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{!n&&s.return&&s.return()}finally{if(a)throw o}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}(e,2),r=t[0],n=t[1];Vi(r),Ai(n)},ki=function(e){var t=Fi((function(){Ai(r),e()})),r=Ii((function(){Vi(t),e()}),20);return[t,r]});var Li=function(e){function r(){var e,t,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return t=n=Ri(this,(e=r.__proto__||Object.getPrototypeOf(r)).call.apply(e,[this].concat(o))),n.state={height:n.props.defaultHeight||0,width:n.props.defaultWidth||0},n._onResize=function(){var e=n.props,t=e.disableHeight,r=e.disableWidth,a=e.onResize;if(n._parentNode){var o=n._parentNode.offsetHeight||0,i=n._parentNode.offsetWidth||0,s=window.getComputedStyle(n._parentNode)||{},l=parseInt(s.paddingLeft,10)||0,u=parseInt(s.paddingRight,10)||0,c=parseInt(s.paddingTop,10)||0,d=parseInt(s.paddingBottom,10)||0,p=o-c-d,h=i-l-u;(!t&&n.state.height!==p||!r&&n.state.width!==h)&&(n.setState({height:o-c-d,width:i-l-u}),a({height:o,width:i}))}},n._setRef=function(e){n._autoSizer=e},Ri(n,t)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,e),Di(r,[{key:"componentDidMount",value:function(){var e=this.props.nonce;this._autoSizer&&this._autoSizer.parentNode&&this._autoSizer.parentNode.ownerDocument&&this._autoSizer.parentNode.ownerDocument.defaultView&&this._autoSizer.parentNode instanceof this._autoSizer.parentNode.ownerDocument.defaultView.HTMLElement&&(this._parentNode=this._autoSizer.parentNode,this._detectElementResize=function(e){var t=void 0,r=void 0,n=void 0,a=void 0,o=void 0,i=void 0,s=void 0,l="undefined"!=typeof document&&document.attachEvent;if(!l){i=function(e){var t=e.__resizeTriggers__,r=t.firstElementChild,n=t.lastElementChild,a=r.firstElementChild;n.scrollLeft=n.scrollWidth,n.scrollTop=n.scrollHeight,a.style.width=r.offsetWidth+1+"px",a.style.height=r.offsetHeight+1+"px",r.scrollLeft=r.scrollWidth,r.scrollTop=r.scrollHeight},o=function(e){return e.offsetWidth!==e.__resizeLast__.width||e.offsetHeight!==e.__resizeLast__.height},s=function(e){if(!(e.target.className&&"function"==typeof e.target.className.indexOf&&e.target.className.indexOf("contract-trigger")<0&&e.target.className.indexOf("expand-trigger")<0)){var t=this;i(this),this.__resizeRAF__&&Ti(this.__resizeRAF__),this.__resizeRAF__=ki((function(){o(t)&&(t.__resizeLast__.width=t.offsetWidth,t.__resizeLast__.height=t.offsetHeight,t.__resizeListeners__.forEach((function(r){r.call(t,e)})))}))}};var u=!1,c="";n="animationstart";var d="Webkit Moz O ms".split(" "),p="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" "),h=document.createElement("fakeelement");if(void 0!==h.style.animationName&&(u=!0),!1===u)for(var f=0;f<d.length;f++)if(void 0!==h.style[d[f]+"AnimationName"]){c="-"+d[f].toLowerCase()+"-",n=p[f],u=!0;break}t="@"+c+"keyframes "+(r="resizeanim")+" { from { opacity: 0; } to { opacity: 0; } } ",a=c+"animation: 1ms "+r+"; "}return{addResizeListener:function(o,u){if(l)o.attachEvent("onresize",u);else{if(!o.__resizeTriggers__){var c=o.ownerDocument,d=ji.getComputedStyle(o);d&&"static"===d.position&&(o.style.position="relative"),function(r){if(!r.getElementById("detectElementResize")){var n=(t||"")+".resize-triggers { "+(a||"")+'visibility: hidden; opacity: 0; } .resize-triggers, .resize-triggers > div, .contract-trigger:before { content: " "; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; z-index: -1; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',o=r.head||r.getElementsByTagName("head")[0],i=r.createElement("style");i.id="detectElementResize",i.type="text/css",null!=e&&i.setAttribute("nonce",e),i.styleSheet?i.styleSheet.cssText=n:i.appendChild(r.createTextNode(n)),o.appendChild(i)}}(c),o.__resizeLast__={},o.__resizeListeners__=[],(o.__resizeTriggers__=c.createElement("div")).className="resize-triggers";var p=c.createElement("div");p.className="expand-trigger",p.appendChild(c.createElement("div"));var h=c.createElement("div");h.className="contract-trigger",o.__resizeTriggers__.appendChild(p),o.__resizeTriggers__.appendChild(h),o.appendChild(o.__resizeTriggers__),i(o),o.addEventListener("scroll",s,!0),n&&(o.__resizeTriggers__.__animationListener__=function(e){e.animationName===r&&i(o)},o.__resizeTriggers__.addEventListener(n,o.__resizeTriggers__.__animationListener__))}o.__resizeListeners__.push(u)}},removeResizeListener:function(e,t){if(l)e.detachEvent("onresize",t);else if(e.__resizeListeners__.splice(e.__resizeListeners__.indexOf(t),1),!e.__resizeListeners__.length){e.removeEventListener("scroll",s,!0),e.__resizeTriggers__.__animationListener__&&(e.__resizeTriggers__.removeEventListener(n,e.__resizeTriggers__.__animationListener__),e.__resizeTriggers__.__animationListener__=null);try{e.__resizeTriggers__=!e.removeChild(e.__resizeTriggers__)}catch(e){}}}}}(e),this._detectElementResize.addResizeListener(this._parentNode,this._onResize),this._onResize())}},{key:"componentWillUnmount",value:function(){this._detectElementResize&&this._parentNode&&this._detectElementResize.removeResizeListener(this._parentNode,this._onResize)}},{key:"render",value:function(){var e=this.props,r=e.children,n=e.className,a=e.disableHeight,o=e.disableWidth,i=e.style,s=this.state,l=s.height,u=s.width,c={overflow:"visible"},d={},p=!1;return a||(0===l&&(p=!0),c.height=0,d.height=l),o||(0===u&&(p=!0),c.width=0,d.width=u),(0,t.createElement)("div",{className:n,ref:this._setRef,style:Ei({},c,i)},!p&&r(d))}}]),r}(t.PureComponent);Li.defaultProps={onResize:function(){},disableHeight:!1,disableWidth:!1,style:{}};const Mi=Li;var zi=Object.defineProperty,Ni=Object.getOwnPropertySymbols,Hi=Object.prototype.hasOwnProperty,Bi=Object.prototype.propertyIsEnumerable,Ui=(e,t,r)=>t in e?zi(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function $i(){const e=(0,t.useRef)(void 0);return null!=e.current||(e.current=(0,Re.uniqueId)()),e.current}const Wi=r().forwardRef(((e,n)=>{var a=e,{children:o,onLoad:i,onChange:s}=a,l=((e,t)=>{var r={};for(var n in e)Hi.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&Ni)for(var n of Ni(e))t.indexOf(n)<0&&Bi.call(e,n)&&(r[n]=e[n]);return r})(a,["children","onLoad","onChange"]);const u=$i(),[c,d]=(0,t.useState)(!1),[p,h]=(0,t.useState)(!1),f=(0,t.useRef)(null);return(0,t.useImperativeHandle)(n,(()=>f.current)),m=()=>{Wi.addCallback(u,(e=>{!c&&e.isIntersecting&&(d(!0),null==i||i()),h(e.isIntersecting),null==s||s(e.isIntersecting)}));const e=f.current;return e&&Wi.observer.observe(e),()=>{delete Wi.callbacks[u],e&&Wi.observer.unobserve(e),0===Object.keys(Wi.callbacks).length&&Wi.observer.disconnect()}},(0,t.useEffect)(m,[]),r().createElement("div",((e,t)=>{for(var r in t||(t={}))Hi.call(t,r)&&Ui(e,r,t[r]);if(Ni)for(var r of Ni(t))Bi.call(t,r)&&Ui(e,r,t[r]);return e})({id:u,ref:f},l),c&&("function"==typeof o?o({isInView:p}):o));var m}));Wi.displayName="LazyLoader",Wi.callbacks={},Wi.addCallback=(e,t)=>Wi.callbacks[e]=t,Wi.observer=new IntersectionObserver((e=>{for(const t of e)Wi.callbacks[t.target.id](t)}),{rootMargin:"100px"});var qi=Object.defineProperty,Gi=Object.defineProperties,Qi=Object.getOwnPropertyDescriptors,Yi=Object.getOwnPropertySymbols,Ki=Object.prototype.hasOwnProperty,Xi=Object.prototype.propertyIsEnumerable,Zi=(e,t,r)=>t in e?qi(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Ji=(e,t)=>{for(var r in t||(t={}))Ki.call(t,r)&&Zi(e,r,t[r]);if(Yi)for(var r of Yi(t))Xi.call(t,r)&&Zi(e,r,t[r]);return e},es=(e,t)=>Gi(e,Qi(t));const ts=class extends Q{constructor(e){super(es(Ji({},e),{children:as(e.children)})),this._skipOnLayoutChange=!1,this.onLayoutChange=e=>{if(this._skipOnLayoutChange)this._skipOnLayoutChange=!1;else{for(const t of e){const e=this.getSceneLayoutChild(t.i),r={x:t.x,y:t.y,width:t.w,height:t.h};ns(e.state,r)||e.setState(Ji({},r))}this.setState({children:as(this.state.children)})}},this.onResizeStop=(e,t,r)=>{this.getSceneLayoutChild(r.i).setState({width:r.w,height:r.h})},this.onDragStop=(e,t,r)=>{const n=this.getSceneLayoutChild(r.i);e=os(e);for(let t=0;t<e.length;t++){const r=e[t],n=this.getSceneLayoutChild(r.i),a=n.state;(null==a?void 0:a.x)===r.x&&(null==a?void 0:a.y)===r.y||n.setState({x:r.x,y:r.y})}const a=e.findIndex((e=>e.i===r.i)),o=this.findGridItemSceneParent(e,a-1);let i=this.state.children;o!==n.parent&&(i=this.moveChildTo(n,o)),this.setState({children:as(i)}),this._skipOnLayoutChange=!0}}isDraggable(){var e;return null!=(e=this.state.isDraggable)&&e}getDragClass(){return`grid-drag-handle-${this.state.key}`}getDragClassCancel(){return"grid-drag-cancel"}toggleRow(e){var t,r;if(!e.state.isCollapsed)return e.setState({isCollapsed:!0}),void this.setState({});const n=e.state.children;if(0===n.length)return e.setState({isCollapsed:!1}),void this.setState({});const a=e.state.y,o=(null!=(t=n[0].state.y)?t:a)-(a+1);let i=a;for(const e of n){const t=Ji({},e.state);t.y=null!=(r=t.y)?r:a,t.y-=o,t.y!==e.state.y&&e.setState(t),i=Math.max(i,Number(t.y)+Number(t.height))}const s=i-a-1;for(const t of this.state.children)if(t.state.y>a&&this.pushChildDown(t,s),xi(t)&&t!==e)for(const e of t.state.children)e.state.y>a&&this.pushChildDown(e,s);e.setState({isCollapsed:!1}),this.setState({})}getSceneLayoutChild(e){for(const t of this.state.children){if(t.state.key===e)return t;if(t instanceof hs)for(const r of t.state.children)if(r.state.key===e)return r}throw new Error("Scene layout child not found for GridItem")}pushChildDown(e,t){e.setState({y:e.state.y+t})}findGridItemSceneParent(e,t){for(let r=t;r>=0;r--){const t=e[r],n=this.getSceneLayoutChild(t.i);if(n instanceof hs)return n.state.isCollapsed?this:n}return this}moveChildTo(e,t){const r=e.parent;let n=this.state.children;const a=e.clone({key:e.state.key});if(r instanceof hs){const o=r.clone({children:r.state.children.filter((t=>t.state.key!==e.state.key))});if(n=n.map((e=>e===r?o:e)),t instanceof hs){const e=t.clone({children:[...t.state.children,a]});n=n.map((r=>r===t?e:r))}else n=[...n,a]}else if(!(t instanceof ts)){n=n.filter((t=>t.state.key!==e.state.key));const r=t.clone({children:[...t.state.children,a]});n=n.map((e=>e===t?r:e))}return n}toGridCell(e){var t,r;const n=e.state;let a=null!=(t=n.x)?t:0,o=null!=(r=n.y)?r:0;const i=Number.isInteger(Number(n.width))?Number(n.width):4,s=Number.isInteger(Number(n.height))?Number(n.height):4;let l=e.state.isDraggable,u=e.state.isResizable;return e instanceof hs&&(l=!!e.state.isCollapsed,u=!1),{i:e.state.key,x:a,y:o,h:s,w:i,isResizable:u,isDraggable:l}}buildGridLayout(e){let t=[];for(const e of this.state.children)if(t.push(this.toGridCell(e)),e instanceof hs&&!e.state.isCollapsed)for(const r of e.state.children)t.push(this.toGridCell(r));return t=os(t),e<768?(this._skipOnLayoutChange=!0,t.map((e=>es(Ji({},e),{w:24})))):(this._skipOnLayoutChange=!1,t)}};let rs=ts;function ns(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function as(e){return[...e].sort(((e,t)=>e.state.y-t.state.y||e.state.x-t.state.x))}function os(e){return[...e].sort(((e,t)=>e.y-t.y||e.x-t.x))}rs.Component=function({model:e}){const{children:t,isLazy:n,isDraggable:a,isResizable:o}=e.useState();return function(e){if(e.some((e=>void 0===e.state.height||void 0===e.state.width||void 0===e.state.x||void 0===e.state.y)))throw new Error("All children must have a size specified")}(t),r().createElement(Mi,{disableHeight:!0},(({width:t})=>{if(0===t)return null;const i=e.buildGridLayout(t);return r().createElement("div",{style:{width:`${t}px`,height:"100%"}},r().createElement(Pi(),{width:t,isDraggable:a&&t>768,isResizable:null!=o&&o,containerPadding:[0,0],useCSSTransforms:!1,margin:[8,8],cols:24,rowHeight:30,draggableHandle:`.grid-drag-handle-${e.state.key}`,draggableCancel:".grid-drag-cancel",layout:i,onDragStop:e.onDragStop,onResizeStop:e.onResizeStop,onLayoutChange:e.onLayoutChange,isBounded:!1},i.map((t=>{var a;const o=e.getSceneLayoutChild(t.i),i=null==(a=o.getClassName)?void 0:a.call(o);return n?r().createElement(Wi,{key:o.state.key,"data-griditem-key":o.state.key,className:i},r().createElement(o.Component,{model:o,key:o.state.key})):r().createElement("div",{key:o.state.key,"data-griditem-key":o.state.key,className:i},r().createElement(o.Component,{model:o,key:o.state.key}))}))))}))};var is=Object.defineProperty,ss=Object.defineProperties,ls=Object.getOwnPropertyDescriptors,us=Object.getOwnPropertySymbols,cs=Object.prototype.hasOwnProperty,ds=Object.prototype.propertyIsEnumerable,ps=(e,t,r)=>t in e?is(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;class hs extends Q{constructor(e){super(((e,t)=>ss(e,ls({x:0,height:1,width:24})))(((e,t)=>{for(var r in t||(t={}))cs.call(t,r)&&ps(e,r,t[r]);if(us)for(var r of us(t))ds.call(t,r)&&ps(e,r,t[r]);return e})({children:e.children||[],isCollapsible:e.isCollapsible||!0,title:e.title||""},e))),this.onCollapseToggle=()=>{this.state.isCollapsible&&this.getGridLayout().toggleRow(this)}}getGridLayout(){const e=this.parent;if(!(e&&e instanceof rs))throw new Error("SceneGridRow must be a child of SceneGridLayout");return e}getUrlState(){return{rowc:this.state.isCollapsed?"1":"0"}}updateFromUrl(e){null!=e.rowc&&e.rowc!==this.getUrlState().rowc&&this.onCollapseToggle()}}hs.Component=function({model:e}){const t=(0,tr.useStyles2)(fs),{isCollapsible:n,isCollapsed:a,title:o,isDraggable:i,actions:s}=e.useState(),l=e.getGridLayout().getDragClass();return r().createElement("div",{className:(0,rr.cx)(t.row,a&&t.rowCollapsed)},r().createElement("button",{onClick:e.onCollapseToggle,className:t.rowTitleButton,"aria-label":a?"Expand row":"Collapse row"},n&&r().createElement(tr.Icon,{name:a?"angle-right":"angle-down"}),r().createElement("span",{className:t.rowTitle,role:"heading"},ct.interpolate(e,o,void 0,"text"))),s&&r().createElement(s.Component,{model:s}),i&&a&&r().createElement("div",{className:(0,rr.cx)(t.dragHandle,l)},r().createElement(tr.Icon,{name:"draggabledots"})))};const fs=e=>({row:(0,rr.css)({width:"100%",height:"30px",display:"flex",justifyContent:"space-between",gap:e.spacing(1)}),rowTitleButton:(0,rr.css)({display:"flex",alignItems:"center",cursor:"pointer",background:"transparent",border:"none",gap:e.spacing(1)}),rowCollapsed:(0,rr.css)({borderBottom:`1px solid ${e.colors.border.weak}`}),rowTitle:(0,rr.css)({fontSize:e.typography.h5.fontSize,fontWeight:e.typography.fontWeightMedium}),collapsedInfo:(0,rr.css)({fontSize:e.typography.bodySmall.fontSize,color:e.colors.text.secondary,display:"flex",alignItems:"center",flexGrow:1}),dragHandle:(0,rr.css)({display:"flex",padding:e.spacing(0,1),alignItems:"center",justifyContent:"flex-end",cursor:"move",color:e.colors.text.secondary,"&:hover":{color:e.colors.text.primary}})});(class extends Q{constructor(){super(...arguments),this.onToggle=()=>{this.setState({isCollapsed:!this.state.isCollapsed})},this.onRemove=()=>{const e=this.parent;"body"in e.state&&e.setState({body:void 0})}}}).Component=function({model:e}){const{title:t,isCollapsed:n,canCollapse:a,canRemove:o,body:i,controls:s}=e.useState(),l=(0,tr.useStyles2)(fs),u=(0,tr.useStyles2)(ms),c=(null!=s?s:[]).map((e=>r().createElement(e.Component,{key:e.state.key,model:e})));return o&&c.push(r().createElement(tr.ToolbarButton,{icon:"times",variant:"default",onClick:e.onRemove,key:"remove-button","aria-label":"Remove scene"})),r().createElement("div",{className:u.wrapper},r().createElement("div",{className:(0,rr.cx)(u.row,n&&u.rowCollapsed)},r().createElement("button",{onClick:e.onToggle,className:l.rowTitleButton,"aria-label":n?"Expand scene":"Collapse scene"},a&&r().createElement(tr.Icon,{name:n?"angle-right":"angle-down"}),r().createElement("span",{className:l.rowTitle,role:"heading"},ct.interpolate(e,t,void 0,"text"))),r().createElement("div",{className:u.actions},c)),!n&&r().createElement(i.Component,{model:i}))};const ms=e=>({wrapper:(0,rr.css)({display:"flex",flexDirection:"column",flexGrow:1,gap:e.spacing(1),cursor:"pointer"}),row:(0,rr.css)({width:"100%",display:"flex",justifyContent:"space-between",gap:e.spacing(1)}),rowCollapsed:(0,rr.css)({borderBottom:`1px solid ${e.colors.border.weak}`,paddingBottom:e.spacing(1)}),actions:(0,rr.css)({display:"flex",alignItems:"center",gap:e.spacing(1),justifyContent:"flex-end",flexGrow:1})});(class extends Q{constructor(){super(...arguments),this._variableDependency=new ht(this,{statePaths:["text"]})}}).Component=({model:e})=>{const{text:t,fontSize:n=20,align:a="left",key:o,spacing:i}=e.useState(),s=(0,tr.useTheme2)(),l=(0,rr.css)({fontSize:n,display:"flex",flexGrow:1,alignItems:"center",padding:i?s.spacing(i,0):void 0,justifyContent:a});return r().createElement("div",{className:l,"data-testid":o},ct.interpolate(e,t))},class extends Q{}.Component=({model:e})=>{const t=e.useState();return r().createElement(tr.ToolbarButton,{onClick:t.onClick,icon:t.icon})},class extends Q{}.Component=({model:e})=>{const t=e.useState();return r().createElement("div",{style:{display:"flex"}},t.label&&r().createElement(en,{label:t.label}),r().createElement(tr.Input,{defaultValue:t.value,width:8,onBlur:t=>{e.state.onChange(parseInt(t.currentTarget.value,10))}}))};class gs extends Q{constructor(){super(...arguments),this.onZoom=()=>{const t=ct.getTimeRange(this),r=function(t,r){const n=t.to.valueOf()-t.from.valueOf(),a=t.to.valueOf()-n/2,o=0===n?3e4:2*n,i=a+o/2,s=a-o/2;return{from:(0,e.toUtc)(s),to:(0,e.toUtc)(i),raw:{from:(0,e.toUtc)(s),to:(0,e.toUtc)(i)}}}(t.state.value);t.onTimeRangeChange(r)},this.onChangeFiscalYearStartMonth=e=>{ct.getTimeRange(this).setState({fiscalYearStartMonth:e})},this.onMoveBackward=()=>{const e=ct.getTimeRange(this),{state:{value:t}}=e;e.onTimeRangeChange(bs(ys.Backward,t,Date.now()))},this.onMoveForward=()=>{const e=ct.getTimeRange(this),{state:{value:t}}=e;e.onTimeRangeChange(bs(ys.Forward,t,Date.now()))}}}gs.Component=function({model:e}){const{hidePicker:t,isOnCanvas:n}=e.useState(),a=ct.getTimeRange(e),o=a.getTimeZone(),i=a.useState();return t?null:r().createElement(tr.TimeRangePicker,{isOnCanvas:null==n||n,value:i.value,onChange:a.onTimeRangeChange,timeZone:o,fiscalYearStartMonth:i.fiscalYearStartMonth,onMoveBackward:e.onMoveBackward,onMoveForward:e.onMoveForward,onZoom:e.onZoom,onChangeTimeZone:a.onTimeZoneChange,onChangeFiscalYearStartMonth:e.onChangeFiscalYearStartMonth})};var ys=(e=>(e[e.Backward=0]="Backward",e[e.Forward=1]="Forward",e))(ys||{});function bs(t,r,n){const a=r.to.valueOf(),o=r.from.valueOf(),i=(a-o)/2;let s,l;0===t?(s=o-i,l=a-i):(s=o+i,l=a+i,l>n&&a<n&&(l=n,s=o));const u=(0,e.toUtc)(s),c=(0,e.toUtc)(l);return{from:u,to:c,raw:{from:u,to:c}}}var vs=Object.defineProperty,ws=Object.defineProperties,Ss=Object.getOwnPropertyDescriptors,_s=Object.getOwnPropertySymbols,Os=Object.prototype.hasOwnProperty,xs=Object.prototype.propertyIsEnumerable,Cs=(e,t,r)=>t in e?vs(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const Ps=["5s","10s","30s","1m","5m","15m","30m","1h","2h","1d"];class Ds extends Q{constructor(t){var r;super(((e,t)=>ws(e,Ss(t)))(((e,t)=>{for(var r in t||(t={}))Os.call(t,r)&&Cs(e,r,t[r]);if(_s)for(var r of _s(t))xs.call(t,r)&&Cs(e,r,t[r]);return e})({refresh:""},t),{intervals:null!=(r=t.intervals)?r:Ps})),this._urlSync=new pe(this,{keys:["refresh"]}),this.onRefresh=()=>{const e=ct.getTimeRange(this);this._intervalTimer&&clearInterval(this._intervalTimer),e.onRefresh(),this.setupIntervalTimer()},this.onIntervalChanged=e=>{this.setState({refresh:e}),this.setupIntervalTimer()},this.setupIntervalTimer=()=>{const t=ct.getTimeRange(this),{refresh:r,intervals:n}=this.state;if((this._intervalTimer||""===r)&&clearInterval(this._intervalTimer),""===r)return;if(n&&!n.includes(r))return;const a=e.rangeUtil.intervalToMs(r);this._intervalTimer=setInterval((()=>{t.onRefresh()}),a)},this.addActivationHandler((()=>(this.setupIntervalTimer(),()=>{this._intervalTimer&&clearInterval(this._intervalTimer)})))}getUrlState(){return{refresh:this.state.refresh}}updateFromUrl(e){const t=e.refresh;t&&"string"==typeof t&&this.setState({refresh:t})}}Ds.Component=function({model:e}){const{refresh:t,intervals:n,isOnCanvas:a}=e.useState();return r().createElement(tr.RefreshPicker,{value:t,intervals:n,onRefresh:e.onRefresh,onIntervalChanged:e.onIntervalChanged,isOnCanvas:null==a||a})},class extends Q{constructor(t){super(t),this.addActivationHandler((()=>{const t=ct.getData(this);this._subs.add(t.subscribeToState((t=>{var r;(null==(r=t.data)?void 0:r.state)===e.LoadingState.Done&&this.performRepeat(t.data)}))),t.state.data&&this.performRepeat(t.state.data)}))}performRepeat(e){const t=[];for(let r=0;r<e.series.length;r++){const n=this.state.getLayoutChild(e,e.series[r],r);t.push(n)}this.state.body.setState({children:t})}}.Component=({model:e})=>{const{body:t}=e.useState();return r().createElement(t.Component,{model:t})};const Es=class extends Q{constructor(){super({})}get Component(){return Es.Component}};let Rs=Es;Rs.Component=e=>r().createElement("div",{style:{flexGrow:1}});class js extends Q{toggleDirection(){this.setState({direction:"row"===this.state.direction?"column":"row"})}isDraggable(){return!1}}js.Component=function({model:e,parentState:n}){const{children:a,isHidden:o}=e.useState(),i=function(e,r){return(0,t.useMemo)((()=>{var t,n,a,o,i,s,l,c,d,p;const{direction:h="row",wrap:f}=e,m=u.config.theme2,g={};return r?ks(g,e,r):(g.display="flex",g.flexGrow=1),g.flexDirection=h,g.gap="8px",g.flexWrap=f||"nowrap",g.alignContent="baseline",g.minHeight=g.minHeight||0,g[m.breakpoints.down("md")]={flexDirection:null!=(n=null==(t=e.md)?void 0:t.direction)?n:"column",maxWidth:null!=(o=null==(a=e.md)?void 0:a.maxWidth)?o:"unset",maxHeight:null!=(s=null==(i=e.md)?void 0:i.maxHeight)?s:"unset",height:null!=(c=null==(l=e.md)?void 0:l.height)?c:"unset",width:null!=(p=null==(d=e.md)?void 0:d.width)?p:"unset"},(0,rr.css)(g)}),[r,e])}(e.state,n);return o?null:r().createElement("div",{className:i},a.map((t=>{const n=t.Component;return r().createElement(n,{key:t.state.key,model:t,parentState:e.state})})))};class Ts extends Q{}function ks(e,t,r){var n,a,o;const i=null!=(n=r.direction)?n:"row",{xSizing:s="fill",ySizing:l="fill"}=t;return e.display="flex",e.position="relative",e.flexDirection=i,"column"===i?(t.height?e.height=t.height:e.flexGrow="fill"===l?1:0,t.width?e.width=t.width:e.alignSelf="fill"===s?"stretch":"flex-start"):(t.height?e.height=t.height:e.alignSelf="fill"===l?"stretch":"flex-start",t.width?e.width=t.width:e.flexGrow="fill"===s?1:0),e.minWidth=t.minWidth,e.maxWidth=t.maxWidth,e.maxHeight=t.maxHeight,e.minHeight=null!=(a=t.minHeight)?a:r.minHeight,e.height=null!=(o=t.height)?o:r.height,e}Ts.Component=function({model:e,parentState:n}){if(!n)throw new Error("SceneFlexItem must be a child of SceneFlexLayout");const{body:a,isHidden:o}=e.useState(),i=function(e,r){return(0,t.useMemo)((()=>{var t,n,a,o,i,s,l,c,d,p;const h=u.config.theme2,f=ks({},e,r);return f[h.breakpoints.down("md")]={maxWidth:null!=(n=null==(t=e.md)?void 0:t.maxWidth)?n:"unset",maxHeight:null!=(o=null==(a=e.md)?void 0:a.maxHeight)?o:"unset",height:null!=(l=null==(i=e.md)?void 0:i.height)?l:null==(s=r.md)?void 0:s.height,width:null!=(p=null==(c=e.md)?void 0:c.width)?p:null==(d=r.md)?void 0:d.width},(0,rr.css)(f)}),[e,r])}(e.state,n);return!a||o?null:r().createElement("div",{className:i},r().createElement(a.Component,{model:a}))};var As=Object.defineProperty,Is=Object.getOwnPropertySymbols,Vs=Object.prototype.hasOwnProperty,Fs=Object.prototype.propertyIsEnumerable,Ls=(e,t,r)=>t in e?As(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;(class extends Q{constructor(e){var t,r;super(((e,t)=>{for(var r in t||(t={}))Vs.call(t,r)&&Ls(e,r,t[r]);if(Is)for(var r of Is(t))Fs.call(t,r)&&Ls(e,r,t[r]);return e})({rowGap:1,columnGap:1,templateColumns:"repeat(auto-fit, minmax(400px, 1fr))",autoRows:null!=(t=e.autoRows)?t:"320px",children:null!=(r=e.children)?r:[]},e))}isDraggable(){return!1}}).Component=function({model:e}){const{children:n,isHidden:a,isLazy:o}=e.useState(),i=(s=e.state,(0,t.useMemo)((()=>{var e,t,r,n,a,o,i,l,c,d,p;const h={},f=u.config.theme2;return h.display="grid",h.gridTemplateColumns=s.templateColumns,h.gridTemplateRows=s.templateRows||"unset",h.gridAutoRows=s.autoRows||"unset",h.rowGap=f.spacing(null!=(e=s.rowGap)?e:1),h.columnGap=f.spacing(null!=(t=s.columnGap)?t:1),h.justifyItems=s.justifyItems||"unset",h.alignItems=s.alignItems||"unset",h.justifyContent=s.justifyContent||"unset",h.flexGrow=1,s.md&&(h[f.breakpoints.down("md")]={gridTemplateRows:null==(r=s.md)?void 0:r.templateRows,gridTemplateColumns:null==(n=s.md)?void 0:n.templateColumns,rowGap:s.md.rowGap?f.spacing(null!=(o=null==(a=s.md)?void 0:a.rowGap)?o:1):void 0,columnGap:s.md.columnGap?f.spacing(null!=(l=null==(i=s.md)?void 0:i.rowGap)?l:1):void 0,justifyItems:null==(c=s.md)?void 0:c.justifyItems,alignItems:null==(d=s.md)?void 0:d.alignItems,justifyContent:null==(p=s.md)?void 0:p.justifyContent}),(0,rr.css)(h)}),[s]));var s;return a?null:r().createElement("div",{className:i},n.map((t=>{const n=t.Component;return o?r().createElement(Wi,{key:t.state.key,className:i},r().createElement(n,{key:t.state.key,model:t,parentState:e.state})):r().createElement(n,{key:t.state.key,model:t,parentState:e.state})})))},class extends Q{}.Component=function({model:e,parentState:n}){if(!n)throw new Error("SceneCSSGridItem must be a child of SceneCSSGridLayout");const{body:a,isHidden:o}=e.useState(),i=(s=e.state,(0,t.useMemo)((()=>{const e={};return e.gridColumn=s.gridColumn||"unset",e.gridRow=s.gridRow||"unset",e.position="relative",(0,rr.css)(e)}),[s]));var s;return!a||o?null:r().createElement("div",{className:i},r().createElement(a.Component,{model:a}))};var Ms=Object.defineProperty,zs=Object.getOwnPropertySymbols,Ns=Object.prototype.hasOwnProperty,Hs=Object.prototype.propertyIsEnumerable,Bs=(e,t,r)=>t in e?Ms(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Us=(e,t)=>{for(var r in t||(t={}))Ns.call(t,r)&&Bs(e,r,t[r]);if(zs)for(var r of zs(t))Hs.call(t,r)&&Bs(e,r,t[r]);return e};const $s=new Set(["ArrowUp","ArrowDown"]),Ws=new Set(["ArrowLeft","ArrowRight"]),qs={row:{dim:"width",axis:"clientX",min:"minWidth",max:"maxWidth"},column:{dim:"height",axis:"clientY",min:"minHeight",max:"maxHeight"}};function Gs({direction:e="row",handleSize:n=32,initialSize:a="auto",primaryPaneStyles:o,secondaryPaneStyles:i,onDragFinished:s,children:l}){const u=r().Children.toArray(l),c=(0,t.useRef)(null),d=(0,t.useRef)(null),p=(0,t.useRef)(null),h=(0,t.useRef)(null),f=(0,t.useRef)(null),m=(0,t.useRef)("1fr"),g=(0,t.useRef)(void 0),y=(0,t.useRef)(void 0),b=qs[e].dim,v=qs[e].axis,w=qs[e].min,S=qs[e].max;!function(e,r,n=0,a){const o=(0,Re.throttle)(r,n);(0,t.useLayoutEffect)((()=>{if(!e)return;const t=new ResizeObserver(o);return t.observe(e,{box:"device-pixel-content-box"}),()=>t.disconnect()}),a)}(h.current,(e=>{for(const t of e){if(!t.target.isSameNode(h.current))return;const e=d.current.getBoundingClientRect()[b],r=Ys(d.current);c.current.ariaValueNow=`${(0,Re.clamp)((e-r[w])/(r[S]-r[w])*100,0,100)}`}}),500,[S,w,e,b]);const _=(0,t.useRef)(null),O=(0,t.useCallback)((e=>{m.current=d.current.getBoundingClientRect()[b],f.current=h.current.getBoundingClientRect()[b],_.current=e[v],c.current.setPointerCapture(e.pointerId),g.current=Ys(d.current),y.current=void 0}),[b,v]),x=(0,t.useCallback)((e=>{if(null!==_.current&&"1fr"!==m.current){const t=e[v]-_.current,r=g.current,a=(0,Re.clamp)(m.current+t,r[w],r[S]),o=a/(f.current-n);d.current.style.flexGrow=`${o}`,p.current.style.flexGrow=""+(1-o);const i=(0,Re.clamp)((a-r[w])/(r[S]-r[w])*100,0,100);c.current.ariaValueNow=`${i}`}}),[n,v,w,S]),C=(0,t.useCallback)((e=>{e.preventDefault(),e.stopPropagation(),c.current.releasePointerCapture(e.pointerId),_.current=null,null==s||s(parseFloat(d.current.style.flexGrow))}),[s]),P=(0,t.useRef)(new Set),D=(0,t.useRef)(null),E=(0,t.useCallback)((t=>{var r;if(0===P.current.size)return void(D.current=null);if("1fr"===m.current)return;const a=.3*(t-(null!=(r=D.current)?r:t));let o=0;"row"===e?(P.current.has("ArrowLeft")&&(o-=a),P.current.has("ArrowRight")&&(o+=a)):(P.current.has("ArrowUp")&&(o-=a),P.current.has("ArrowDown")&&(o+=a));const i=g.current,s=d.current.getBoundingClientRect()[b],l=(0,Re.clamp)(s+o,i[w],i[S]),u=l/(f.current-n);d.current.style.flexGrow=`${u}`,p.current.style.flexGrow=""+(1-u);const h=(l-i[w])/(i[S]-i[w])*100;c.current.ariaValueNow=`${(0,Re.clamp)(h,0,100)}`,D.current=t,window.requestAnimationFrame(E)}),[e,n,w,S,b]),R=(0,t.useCallback)((t=>{if("Enter"!==t.key){if("Home"===t.key){g.current=Ys(d.current),f.current=h.current.getBoundingClientRect()[b];const e=g.current[w]/(f.current-n);return d.current.style.flexGrow=`${e}`,p.current.style.flexGrow=""+(1-e),void(c.current.ariaValueNow="0")}if("End"===t.key){g.current=Ys(d.current),f.current=h.current.getBoundingClientRect()[b];const e=g.current[S]/(f.current-n);return d.current.style.flexGrow=`${e}`,p.current.style.flexGrow=""+(1-e),void(c.current.ariaValueNow="100")}if(("column"===e&&$s.has(t.key)||"row"===e&&Ws.has(t.key))&&!P.current.has(t.key)&&(y.current=void 0,t.preventDefault(),t.stopPropagation(),m.current=d.current.getBoundingClientRect()[b],f.current=h.current.getBoundingClientRect()[b],g.current=Ys(d.current),!P.current.has(t.key))){const e=0===P.current.size;P.current.add(t.key),e&&window.requestAnimationFrame(E)}}else void 0===y.current?(y.current=d.current.style.flexGrow,d.current.style.flexGrow="0",p.current.style.flexGrow="1"):(d.current.style.flexGrow=y.current,p.current.style.flexGrow=""+(1-parseFloat(y.current)),y.current=void 0)}),[e,E,n,S,b,w]),j=(0,t.useCallback)((t=>{"row"===e&&!Ws.has(t.key)||"column"===e&&!$s.has(t.key)||(P.current.delete(t.key),null==s||s(parseFloat(d.current.style.flexGrow)))}),[e,s]),T=(0,t.useCallback)((()=>{d.current.style.flexGrow="0.5",p.current.style.flexGrow="0.5";const e=Ys(d.current);g.current=e,m.current=d.current.getBoundingClientRect()[b],c.current.ariaValueNow=""+(m.current-e[w])/(e[S]-e[w])*100}),[S,b,w]),k=(0,tr.useStyles2)(Qs),A=$i();return r().createElement("div",{ref:h,className:k.container,style:{flexDirection:e}},r().createElement("div",{ref:d,className:k.panel,style:Us({flexGrow:"auto"===a?.5:(0,Re.clamp)(a,0,1),[w]:"min-content"},o),id:`start-panel-${A}`},u[0]),r().createElement("div",{ref:c,style:{[b]:`${n}px`},className:(0,rr.cx)(k.handle,{[k.handleHorizontal]:"column"===e}),onPointerUp:C,onPointerDown:O,onPointerMove:x,onKeyDown:R,onKeyUp:j,onDoubleClick:T,role:"separator","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":50,"aria-controls":`start-panel-${A}`,"aria-label":"Pane resize widget",tabIndex:0}),r().createElement("div",{ref:p,className:k.panel,style:Us({flexGrow:"auto"===a?.5:(0,Re.clamp)(1-a,0,1),[w]:"min-content"},i),id:`end-panel-${A}`},u[1]))}function Qs(e){return{handle:(0,rr.css)({cursor:"col-resize",position:"relative",flexShrink:0,userSelect:"none","&::before":{content:'""',position:"absolute",backgroundColor:e.colors.primary.main,left:"50%",transform:"translate(-50%)",top:0,height:"100%",width:"1px",opacity:0,transition:"opacity ease-in-out 0.2s"},"&::after":{content:'""',width:"4px",borderRadius:"4px",backgroundColor:e.colors.border.weak,transition:"background-color ease-in-out 0.2s",height:"50%",top:"calc(50% - (50%) / 2)",transform:"translateX(-50%)",position:"absolute",left:"50%"},"&:hover, &:focus-visible":{outline:"none","&::before":{opacity:1},"&::after":{backgroundColor:e.colors.primary.main}}}),handleHorizontal:(0,rr.css)({cursor:"row-resize","&::before":{left:"inherit",transform:"translateY(-50%)",top:"50%",height:"1px",width:"100%"},"&::after":{width:"50%",height:"4px",top:"50%",transform:"translateY(-50%)",left:"calc(50% - (50%) / 2)"}}),container:(0,rr.css)({display:"flex",width:"100%",flexGrow:1,overflow:"hidden"}),panel:(0,rr.css)({display:"flex",position:"relative",flexBasis:0})}}function Ys(e){if(null===e)return;const t=document.body.style.overflow,r=e.style.width,n=e.style.height,a=e.style.flexGrow;document.body.style.overflow="hidden",e.style.flexGrow="0";const{width:o,height:i}=e.getBoundingClientRect();e.style.flexGrow="100";const{width:s,height:l}=e.getBoundingClientRect();return document.body.style.overflow=t,e.style.width=r,e.style.height=n,e.style.flexGrow=a,{minWidth:o,maxWidth:s,minHeight:i,maxHeight:l}}(class extends Q{toggleDirection(){this.setState({direction:"row"===this.state.direction?"column":"row"})}isDraggable(){return!1}}).Component=function({model:e}){const{primary:t,secondary:n,direction:a,isHidden:o,initialSize:i}=e.useState();if(o)return null;const s=t.Component,l=n.Component;return r().createElement(Gs,{direction:a,initialSize:null!=i?i:.5},r().createElement(s,{key:t.state.key,model:t,parentState:e.state}),r().createElement(l,{key:n.state.key,model:n,parentState:e.state}))};class Ks extends Q{enrichDataRequest(){return{app:this.state.name||"app"}}}Ks.Component=({model:e})=>{const{pages:t}=e.useState();return r().createElement(a.Switch,null,t.map((e=>r().createElement(a.Route,{key:e.state.url,exact:!1,path:e.state.url,render:t=>v(e,t)}))))};var Xs=Object.defineProperty,Zs=Object.getOwnPropertySymbols,Js=Object.prototype.hasOwnProperty,el=Object.prototype.propertyIsEnumerable,tl=(e,t,r)=>t in e?Xs(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;class rl extends Q{}function nl({node:e}){const t=e.useState(),n=(0,tr.useStyles2)(al);return r().createElement("div",{className:n.container},Object.keys(t).map((a=>r().createElement("div",{className:n.row,key:a},r().createElement("div",{className:n.keyName},a),r().createElement("div",{className:n.value},function(e,t,n){if(null===t)return"null";switch(typeof t){case"number":return r().createElement(tr.Input,{type:"number",defaultValue:t,onBlur:t=>n.setState({[e]:t.currentTarget.valueAsNumber})});case"string":return r().createElement(tr.Input,{type:"text",defaultValue:t,onBlur:t=>n.setState({[e]:t.currentTarget.value})});case"object":return Vr(t)?t.constructor.name:(0,Re.isPlainObject)(t)||(0,Re.isArray)(t)?r().createElement(tr.JSONFormatter,{json:t,open:0}):String(t);default:return typeof t}}(a,t[a],e))))))}function al(e){return{container:(0,rr.css)({flexGrow:1,display:"flex",gap:e.spacing(.5),flexDirection:"column"}),row:(0,rr.css)({display:"flex",gap:e.spacing(2)}),keyName:(0,rr.css)({display:"flex",flexGrow:"0",width:120,alignItems:"center",height:e.spacing(e.components.height.md)}),value:(0,rr.css)({flexGrow:1,minHeight:e.spacing(e.components.height.md),display:"flex",alignItems:"center"})}}function ol({node:e,selectedObject:t,onSelect:n}){const a=(0,tr.useStyles2)(il),o=[],i=e===t;return e.forEachChild((e=>{o.push(r().createElement(ol,{node:e,key:e.state.key,selectedObject:t,onSelect:n}))})),r().createElement("div",{className:a.container},r().createElement("div",{className:(0,rr.cx)(a.name,i&&a.selected),onClick:()=>n(e)},e.constructor.name),r().createElement("div",{className:a.children},o))}function il(e){return{container:(0,rr.css)({flexGrow:1,display:"flex",gap:e.spacing(.5),flexDirection:"column"}),name:(0,rr.css)({flexGrow:1,display:"flex",gap:e.spacing(1),fontSize:e.typography.bodySmall.fontSize,cursor:"pointer",padding:e.spacing(0,1),borderRadius:e.shape.borderRadius(2),position:"relative","&:hover":{background:e.colors.background.secondary}}),selected:(0,rr.css)({"&::before":{display:"block",content:"' '",position:"absolute",left:0,width:4,bottom:2,top:2,borderRadius:e.shape.radius.default,backgroundImage:e.colors.gradients.brandVertical}}),children:(0,rr.css)({flexGrow:1,display:"flex",flexDirection:"column",paddingLeft:e.spacing(1)})}}function sl({scene:e}){const n=(0,tr.useStyles2)(ll),[a,o]=(0,t.useState)(!1),[i,s]=(0,t.useState)();return r().createElement(r().Fragment,null,r().createElement(tr.ToolbarButton,{variant:"canvas",icon:"bug",onClick:()=>o(!0)}),a&&r().createElement(tr.Drawer,{title:"Scene debugger",onClose:()=>o(!1),size:"lg"},r().createElement("div",{className:n.panes},r().createElement("div",{className:n.pane1},r().createElement("div",{className:n.paneHeading},"Scene graph"),r().createElement(tr.CustomScrollbar,{autoHeightMin:"100%"},r().createElement("div",{className:n.treeWrapper},r().createElement(ol,{node:e,selectedObject:i,onSelect:s})))),r().createElement("div",{className:n.pane2},r().createElement("div",{className:n.paneHeading},"Object details"),i&&r().createElement(nl,{node:i})))))}function ll(e){return{panes:(0,rr.css)({flexGrow:1,display:"flex",height:"100%",flexDirection:"row",marginTop:e.spacing(-2)}),pane1:(0,rr.css)({flexGrow:0,display:"flex",height:"100%",flexDirection:"column",borderRight:`1px solid ${e.colors.border.weak}`}),pane2:(0,rr.css)({flexGrow:1,display:"flex",minHeight:"100%",flexDirection:"column",paddingLeft:e.spacing(2)}),treeWrapper:(0,rr.css)({paddingRight:e.spacing(2),height:"100%",marginLeft:e.spacing(-1)}),paneHeading:(0,rr.css)({padding:e.spacing(1,0),fontWeight:e.typography.fontWeightMedium})}}function ul({page:e,routeProps:n}){const o=function(e){return e.parent instanceof pl?e.parent:e}(e),i=o.useState(),s=function(){const e=(0,a.useLocation)();return(0,u.locationSearchToObject)(e.search||"")}(),l=e.getScene(n.match),c=i.initializedScene===l;if((0,t.useLayoutEffect)((()=>{c||o.initializeScene(l)}),[l,o,c]),(0,t.useEffect)((()=>()=>o.setState({initializedScene:void 0})),[o]),!c)return null;const d={text:i.title,img:i.titleImg,icon:i.titleIcon,url:b(i.url,i.preserveUrlKeys),hideFromBreadcrumbs:i.hideFromBreadcrumbs,parentItem:cl(i.getParentPage?i.getParentPage():o.parent)};i.tabs&&(d.children=i.tabs.map((t=>({text:t.state.title,icon:t.state.titleIcon,tabSuffix:t.state.tabSuffix,active:e===t,url:b(t.state.url,t.state.preserveUrlKeys),parentItem:d}))));let p=[];return i.controls&&(p=i.controls.map((e=>r().createElement(e.Component,{model:e,key:e.state.key})))),s["scene-debugger"]&&p.push(r().createElement(sl,{scene:o,key:"scene-debugger"})),r().createElement(u.PluginPage,{pageNav:d,actions:p,renderTitle:i.renderTitle,subTitle:i.subTitle},r().createElement(l.Component,{model:l}))}function cl(e,t){if(e instanceof pl)return{text:e.state.title,url:b(e.state.url,e.state.preserveUrlKeys),hideFromBreadcrumbs:e.state.hideFromBreadcrumbs,parentItem:cl(e.state.getParentPage?e.state.getParentPage():e.parent)}}function dl({drilldown:e,parent:t,routeProps:r}){return v(t.getDrilldownPage(e,r.match),r)}rl.Component=({model:e})=>{const{component:t,props:n,reactNode:a}=e.useState();return t?r().createElement(t,((e,t)=>{for(var r in t||(t={}))Js.call(t,r)&&tl(e,r,t[r]);if(Zs)for(var r of Zs(t))el.call(t,r)&&tl(e,r,t[r]);return e})({},n)):a||null};class pl extends Q{constructor(e){super(e),this._sceneCache=new Map,this._drilldownCache=new Map,this.addActivationHandler((()=>()=>jo().cleanUp(this)))}initializeScene(e){this.setState({initializedScene:e}),jo().initSync(this)}getScene(e){let t=this._sceneCache.get(e.url);if(t)return t;if(!this.state.getScene)throw new Error("Missing getScene on SceneAppPage "+this.state.title);return t=this.state.getScene(e),this._sceneCache.set(e.url,t),t}getDrilldownPage(e,t){let r=this._drilldownCache.get(t.url);return r||(r=e.getPage(t,this),this._drilldownCache.set(t.url,r),r)}enrichDataRequest(e){if(this.state.getParentPage)return this.state.getParentPage().enrichDataRequest(e);if(!this.parent)return null;const t=this.getRoot();return Fr(t)?t.enrichDataRequest(e):null}}pl.Component=function({model:e,routeProps:t}){var n,o;const{tabs:i,drilldowns:s}=e.useState(),l=[];if(i&&i.length>0)for(let t=0;t<i.length;t++){const s=i[t];if(0===t&&l.push(r().createElement(a.Route,{exact:!0,key:e.state.url,path:null!=(n=e.state.routePath)?n:e.state.url,render:e=>v(s,e)})),l.push(r().createElement(a.Route,{exact:!0,key:s.state.url,path:null!=(o=s.state.routePath)?o:s.state.url,render:e=>v(s,e)})),s.state.drilldowns)for(const e of s.state.drilldowns)l.push(r().createElement(a.Route,{exact:!1,key:e.routePath,path:e.routePath,render:t=>r().createElement(dl,{drilldown:e,parent:s,routeProps:t})}))}if(s)for(const t of s)l.push(r().createElement(a.Route,{key:t.routePath,exact:!1,path:t.routePath,render:n=>r().createElement(dl,{drilldown:t,parent:e,routeProps:n})}));return!i&&(u=e,(c=t.match).isExact&&(c.url===u.state.url||u.parent instanceof pl&&u.parent.state.tabs[0]===u&&u.parent.state.url===c.url))?r().createElement(ul,{page:e,routeProps:t}):(l.push(function(e,t){return r().createElement(a.Route,{key:"fallback route",render:n=>{var a,o,i;const s=null!=(i=null==(o=(a=e.state).getFallbackPage)?void 0:o.call(a))?i:new pl({url:"",title:"Not found",subTitle:"The url did not match any page",getScene:()=>new To({body:new js({direction:"column",children:[new Ts({body:new rl({component:()=>r().createElement("div",{"data-testid":"default-fallback-content"},"If you found your way here using a link then there might be a bug in this application.")})})]})})});return r().createElement(ul,{page:s,routeProps:t})}})}(e,t)),r().createElement(a.Switch,null,l));var u,c};var hl=(e=>(e.Always="always",e.Auto="auto",e.Never="never",e))(hl||{}),fl=(e=>(e.Hue="hue",e.None="none",e.Opacity="opacity",e.Scheme="scheme",e))(fl||{}),ml=(e=>(e.None="none",e.Normal="normal",e.Percent="percent",e))(ml||{}),gl=(e=>(e.Auto="auto",e.Horizontal="horizontal",e.Vertical="vertical",e))(gl||{}),yl=(e=>(e.Background="background",e.BackgroundSolid="background_solid",e.None="none",e.Value="value",e))(yl||{}),bl=(e=>(e.Area="area",e.Line="line",e.None="none",e))(bl||{}),vl=(e=>(e.Auto="auto",e.Center="center",e))(vl||{}),wl=(e=>(e.Auto="auto",e.Name="name",e.None="none",e.Value="value",e.ValueAndName="value_and_name",e))(wl||{}),Sl=(e=>(e.Basic="basic",e.Gradient="gradient",e.Lcd="lcd",e))(Sl||{}),_l=(e=>(e.Color="color",e.Hidden="hidden",e.Text="text",e))(_l||{}),Ol=(e=>(e.Lg="lg",e.Md="md",e.Sm="sm",e))(Ol||{});gl.Auto,hl.Auto,ml.None,fl.None,Sl.Gradient,_l.Color,hl.Auto,fl.None,yl.Value,bl.Area,vl.Auto,wl.Auto,hl.Auto,hl.Auto,Ol.Sm,hl.Auto;class xl{constructor(){this._overrides=[]}overrideColor(e){return this._overrides[this._overrides.length-1].properties.push({id:"color",value:e}),this}overrideDecimals(e){return this._overrides[this._overrides.length-1].properties.push({id:"decimals",value:e}),this}overrideDisplayName(e){return this._overrides[this._overrides.length-1].properties.push({id:"displayName",value:e}),this}overrideFilterable(e){return this._overrides[this._overrides.length-1].properties.push({id:"filterable",value:e}),this}overrideLinks(e){return this._overrides[this._overrides.length-1].properties.push({id:"links",value:e}),this}overrideMappings(e){return this._overrides[this._overrides.length-1].properties.push({id:"mappings",value:e}),this}overrideMax(e){return this._overrides[this._overrides.length-1].properties.push({id:"max",value:e}),this}overrideMin(e){return this._overrides[this._overrides.length-1].properties.push({id:"min",value:e}),this}overrideNoValue(e){return this._overrides[this._overrides.length-1].properties.push({id:"noValue",value:e}),this}overrideThresholds(e){return this._overrides[this._overrides.length-1].properties.push({id:"thresholds",value:e}),this}overrideUnit(e){return this._overrides[this._overrides.length-1].properties.push({id:"unit",value:e}),this}}class Cl extends xl{match(e){return this._overrides.push({matcher:e,properties:[]}),this}matchFieldsWithName(t){return this._overrides.push({matcher:{id:e.FieldMatcherID.byName,options:t},properties:[]}),this}matchFieldsWithNameByRegex(t){return this._overrides.push({matcher:{id:e.FieldMatcherID.byRegexp,options:t},properties:[]}),this}matchFieldsByType(t){return this._overrides.push({matcher:{id:e.FieldMatcherID.byType,options:t},properties:[]}),this}matchFieldsByQuery(t){return this._overrides.push({matcher:{id:e.FieldMatcherID.byFrameRefID,options:t},properties:[]}),this}matchFieldsByValue(t){return this._overrides.push({matcher:{id:e.FieldMatcherID.byValue,options:t},properties:[]}),this}matchComparisonQuery(e){return this.matchFieldsByQuery(mr(e))}overrideCustomFieldConfig(e,t){const r=`custom.${String(e)}`;return this._overrides[this._overrides.length-1].properties.push({id:r,value:t}),this}build(){return this._overrides}}var Pl=Object.defineProperty,Dl=Object.defineProperties,El=Object.getOwnPropertyDescriptors,Rl=Object.getOwnPropertySymbols,jl=Object.prototype.hasOwnProperty,Tl=Object.prototype.propertyIsEnumerable,kl=(e,t,r)=>t in e?Pl(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Al=(e,t)=>{for(var r in t||(t={}))jl.call(t,r)&&kl(e,r,t[r]);if(Rl)for(var r of Rl(t))Tl.call(t,r)&&kl(e,r,t[r]);return e},Il=(e,t)=>Dl(e,El(t));class Vl{constructor(e){this.defaultFieldConfig=e,this._fieldConfig={defaults:{},overrides:[]},this._overridesBuilder=new Cl,this.setDefaults()}setDefaults(){const e={defaults:{custom:this.defaultFieldConfig?(0,Re.cloneDeep)(this.defaultFieldConfig()):{}},overrides:[]};this._fieldConfig=e}setColor(e){return this.setFieldConfigDefaults("color",e)}setDecimals(e){return this.setFieldConfigDefaults("decimals",e)}setDisplayName(e){return this.setFieldConfigDefaults("displayName",e)}setFilterable(e){return this.setFieldConfigDefaults("filterable",e)}setLinks(e){return this.setFieldConfigDefaults("links",e)}setMappings(e){return this.setFieldConfigDefaults("mappings",e)}setMax(e){return this.setFieldConfigDefaults("max",e)}setMin(e){return this.setFieldConfigDefaults("min",e)}setNoValue(e){return this.setFieldConfigDefaults("noValue",e)}setThresholds(e){return this.setFieldConfigDefaults("thresholds",e)}setUnit(e){return this.setFieldConfigDefaults("unit",e)}setCustomFieldConfig(e,t){return this._fieldConfig.defaults=Il(Al({},this._fieldConfig.defaults),{custom:(0,Re.merge)(this._fieldConfig.defaults.custom,{[e]:t})}),this}setOverrides(e){return e(this._overridesBuilder),this}setFieldConfigDefaults(e,t){return this._fieldConfig.defaults=Il(Al({},this._fieldConfig.defaults),{[e]:t}),this}build(){return{defaults:this._fieldConfig.defaults,overrides:this._overridesBuilder.build()}}}class Fl{constructor(e){this.defaultOptions=e,this._options={},this.setDefaults()}setDefaults(){this._options=this.defaultOptions?(0,Re.cloneDeep)(this.defaultOptions()):{}}setOption(e,t){return this._options=(0,Re.merge)(this._options,{[e]:t}),this}build(){return this._options}}var Ll=Object.defineProperty,Ml=Object.defineProperties,zl=Object.getOwnPropertyDescriptors,Nl=Object.getOwnPropertySymbols,Hl=Object.prototype.hasOwnProperty,Bl=Object.prototype.propertyIsEnumerable,Ul=(e,t,r)=>t in e?Ll(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;class $l{constructor(e,t,r,n){this._state={},this._state.title="",this._state.description="",this._state.displayMode="default",this._state.hoverHeader=!1,this._state.pluginId=e,this._state.pluginVersion=t,this._fieldConfigBuilder=new Vl(n),this._panelOptionsBuilder=new Fl(r)}setTitle(e){return this._state.title=e,this}setDescription(e){return this._state.description=e,this}setDisplayMode(e){return this._state.displayMode=e,this}setHoverHeader(e){return this._state.hoverHeader=e,this}setMenu(e){return this._state.menu=e,this}setHeaderActions(e){return this._state.headerActions=e,this}setColor(e){return this._fieldConfigBuilder.setColor(e),this}setDecimals(e){return this._fieldConfigBuilder.setDecimals(e),this}setDisplayName(e){return this._fieldConfigBuilder.setDisplayName(e),this}setFilterable(e){return this._fieldConfigBuilder.setFilterable(e),this}setLinks(e){return this._fieldConfigBuilder.setLinks(e),this}setMappings(e){return this._fieldConfigBuilder.setMappings(e),this}setMax(e){return this._fieldConfigBuilder.setMax(e),this}setMin(e){return this._fieldConfigBuilder.setMin(e),this}setNoValue(e){return this._fieldConfigBuilder.setNoValue(e),this}setThresholds(e){return this._fieldConfigBuilder.setThresholds(e),this}setUnit(e){return this._fieldConfigBuilder.setUnit(e),this}setCustomFieldConfig(e,t){return this._fieldConfigBuilder.setCustomFieldConfig(e,t),this}setOverrides(e){return this._fieldConfigBuilder.setOverrides(e),this}setOption(e,t){return this._panelOptionsBuilder.setOption(e,t),this}setData(e){return this._state.$data=e,this}setTimeRange(e){return this._state.$timeRange=e,this}setVariables(e){return this._state.$variables=e,this}setBehaviors(e){return this._state.$behaviors=e,this}build(){const e=new Oi(((e,t)=>Ml(e,zl(t)))(((e,t)=>{for(var r in t||(t={}))Hl.call(t,r)&&Ul(e,r,t[r]);if(Nl)for(var r of Nl(t))Bl.call(t,r)&&Ul(e,r,t[r]);return e})({},this._state),{options:this._panelOptionsBuilder.build(),fieldConfig:this._fieldConfigBuilder.build()}));return e}}const Wl=()=>new $l("timeseries","10.0.0"),ql=()=>{const e=new Kr({datasource:s.CACHE_STATS,queries:[{refId:"A",query:'SELECT mean(value) FROM "monthly"."bandwidth.1min" WHERE hostname=\'$hostname\' AND $timeFilter GROUP BY time(60s)',rawQuery:!0,resultFormat:"time_series",alias:"bandwidth"}]});return Wl().setTitle("Bandwidth").setData(e).setCustomFieldConfig("fillOpacity",20).setOption("legend",{showLegend:!0,calcs:["max"]}).setUnit("kbps").build()},Gl=()=>{const e=new Kr({datasource:s.CACHE_STATS,queries:[{refId:"A",query:'SELECT mean(value) FROM "monthly"."connections.1min" WHERE hostname=\'$hostname\' AND $timeFilter GROUP BY time(60s)',rawQuery:!0,resultFormat:"time_series",alias:"connections"}]});return Wl().setTitle("Connections").setData(e).setCustomFieldConfig("fillOpacity",20).setOption("legend",{showLegend:!0,calcs:["max"]}).setCustomFieldConfig("spanNulls",!0).build()},Ql=()=>{const e=new Kr({datasource:s.TELEGRAF,queries:[{refId:"A",query:'SELECT mean("usage_system") AS "cpu_system", mean("usage_iowait") AS "cpu_iowait", mean("usage_user") AS "cpu_user", mean("usage_guest") AS "cpu_guest", mean("usage_steal") AS "cpu_steal" FROM "cpu" WHERE host=\'$hostname\' AND $timeFilter GROUP BY time($interval) fill(null)',rawQuery:!0,resultFormat:"time_series",alias:"$col"}]});return Wl().setTitle("CPU Usage").setData(e).setUnit("%").setCustomFieldConfig("spanNulls",!0).setCustomFieldConfig("fillOpacity",20).build()},Yl=()=>{const e=new Kr({datasource:s.TELEGRAF,queries:[{refId:"A",query:'SELECT mean("load1") AS "load1", mean("load5") AS "load5", mean("load15") AS "load15" FROM "system" WHERE host=\'$hostname\' AND $timeFilter GROUP BY time($interval) fill(null)',rawQuery:!0,resultFormat:"time_series",alias:"$col"}]});return Wl().setTitle("Load Average").setData(e).setCustomFieldConfig("fillOpacity",20).setCustomFieldConfig("spanNulls",!0).build()},Kl=()=>{const e=new Kr({datasource:s.TELEGRAF,queries:[{refId:"A",query:'SELECT mean("used_percent") AS "mem_used" FROM "mem" WHERE host=\'$hostname\' AND $timeFilter GROUP BY time($interval) fill(null)',rawQuery:!0,resultFormat:"time_series",alias:"$col"}]});return Wl().setTitle("Memory Usage").setData(e).setCustomFieldConfig("spanNulls",!0).setCustomFieldConfig("fillOpacity",20).setUnit("%").build()},Xl=()=>{const e=new Kr({datasource:s.TELEGRAF,queries:[{refId:"A",query:'SELECT mean("tcp_close") AS "tcp_close", mean("tcp_close_wait") AS "tcp_close_wait", mean("tcp_established") AS "tcp_established", mean("tcp_time_wait") AS "tcp_time_wait", mean("tcp_closing") AS "tcp_closing", mean("tcp_fin_wait1") AS "tcp_fin_wait1", mean("tcp_fin_wait2") AS "tcp_fin_wait2", mean("tcp_last_ack") AS "tcp_last_ack", mean("tcp_syn_recv") AS "tcp_syn_recv", mean("tcp_syn_sent") AS "tcp_syn_sent" FROM "netstat" WHERE host=\'$hostname\' AND $timeFilter GROUP BY time($interval) fill(null)',rawQuery:!0,resultFormat:"time_series",alias:"$col"}]});return Wl().setTitle("Netstat").setData(e).setCustomFieldConfig("spanNulls",!0).setCustomFieldConfig("fillOpacity",20).build()},Zl=()=>{const e=new Kr({datasource:s.TELEGRAF,queries:[{refId:"A",query:'SELECT non_negative_derivative(sum("read_time"), 10s) AS "read_time" FROM "diskio" WHERE host=\'$hostname\' AND $timeFilter GROUP BY time($interval) fill(null)',rawQuery:!0,resultFormat:"time_series",alias:"$col"},{refId:"B",query:'SELECT non_negative_derivative(sum("write_time"), 10s) AS "write_time" FROM "diskio" WHERE host=\'$hostname\' AND $timeFilter GROUP BY time($interval) fill(null)',rawQuery:!0,resultFormat:"time_series",alias:"$col"}]});return Wl().setTitle("Read/Write Time").setData(e).setCustomFieldConfig("spanNulls",!0).setCustomFieldConfig("fillOpacity",20).setUnit("ns").build()},Jl=()=>{const e=new Kr({datasource:s.CACHE_STATS,queries:[{refId:"A",query:'SELECT mean("vol1_wrap_count") AS "vol1", mean("vol2_wrap_count") AS "vol2" FROM "monthly"."wrap_count.1min" WHERE hostname=\'$hostname\' AND $timeFilter GROUP BY time($interval) fill(null)',rawQuery:!0,resultFormat:"time_series",alias:"$col"}]});return Wl().setTitle("Wrap Count").setData(e).setCustomFieldConfig("spanNulls",!0).setCustomFieldConfig("fillOpacity",20).build()};function eu(){const e=new Se({from:"now-6h",to:"now"}),t=new la({name:"hostname",datasource:s.CACHE_STATS,query:'SHOW TAG VALUES ON "cache_stats" FROM "monthly"."bandwidth" with key = "hostname"'});return new To({$timeRange:e,$variables:new vn({variables:[t]}),body:new js({direction:"column",children:[new Ts({height:250,body:ql()}),new Ts({height:250,body:Gl()}),new js({direction:"row",height:250,children:[new Ts({width:"50%",body:Ql()}),new Ts({width:"50%",body:Kl()})]}),new js({direction:"row",height:250,children:[new Ts({width:"50%",body:Yl()}),new Ts({width:"50%",body:Zl()})]}),new js({direction:"row",height:250,children:[new Ts({width:"50%",body:Jl()}),new Ts({width:"50%",body:Xl()})]})]}),controls:[new fn({}),new Rs,new gs({isOnCanvas:!0}),new Ds({intervals:["5s","1m","1h"],isOnCanvas:!0})]})}const tu=()=>{const e=(0,t.useMemo)((()=>new Ks({pages:[new pl({title:"Server",url:l(`${i.Server}`),hideFromBreadcrumbs:!0,getScene:eu})]})),[]);return r().createElement(e.Component,{model:e})},ru=()=>{const e=new Kr({datasource:s.DELIVERYSERVICE_STATS,queries:[{refId:"A",query:"SELECT mean(value) FROM \"monthly\".\"kbps.ds.1min\" WHERE deliveryservice='$deliveryservice' AND cachegroup = 'total'  and $timeFilter GROUP BY time(60s), deliveryservice ORDER BY asc",rawQuery:!0,resultFormat:"time_series",alias:"$tag_deliveryservice",measurement:"bw"}]});return Wl().setTitle("Bandwidth").setData(e).setOption("legend",{showLegend:!0,calcs:["max"]}).setCustomFieldConfig("axisCenteredZero",!0).setUnit("bps").build()},nu=()=>{const e=new Kr({datasource:s.DELIVERYSERVICE_STATS,queries:[{refId:"A",query:'SELECT mean(value) FROM "monthly"."tps_2xx.ds.1min" WHERE $timeFilter AND deliveryservice=\'$deliveryservice\' GROUP BY time(60s) ORDER BY asc',rawQuery:!0,resultFormat:"time_series",measurement:"tps_2xx",hide:!1,tags:{deliveryservice:"$deliveryservice"}},{refId:"B",query:'SELECT mean(value) FROM "monthly"."tps_3xx.ds.1min" WHERE $timeFilter AND deliveryservice=\'$deliveryservice\' GROUP BY time(60s) ORDER BY asc',rawQuery:!0,resultFormat:"time_series"},{refId:"C",query:'SELECT mean(value) FROM "monthly"."tps_4xx.ds.1min" WHERE $timeFilter AND deliveryservice=\'$deliveryservice\' GROUP BY time(60s) ORDER BY asc',rawQuery:!0,resultFormat:"time_series"},{refId:"D",query:'SELECT mean(value) FROM "monthly"."tps_5xx.ds.1min" WHERE $timeFilter AND deliveryservice=\'$deliveryservice\' GROUP BY time(60s) ORDER BY asc',rawQuery:!0,resultFormat:"time_series"}]});return Wl().setTitle("TPS").setData(e).setOption("legend",{showLegend:!0,calcs:["max"]}).setCustomFieldConfig("axisCenteredZero",!0).setCustomFieldConfig("spanNulls",!0).build()},au=()=>{const e=new Kr({datasource:s.DELIVERYSERVICE_STATS,queries:[{refId:"A",query:"SELECT mean(value) FROM \"monthly\".\"kbps.cg.1min\" WHERE deliveryservice='$deliveryservice' AND cachegroup != 'all' and $timeFilter GROUP BY time(60s), cachegroup",rawQuery:!0,resultFormat:"time_series",alias:"$tag_cachegroup"}]});return Wl().setTitle("Bandwidth by CacheGroup").setData(e).setOption("legend",{showLegend:!0,calcs:["max"]}).setCustomFieldConfig("axisCenteredZero",!0).setCustomFieldConfig("spanNulls",!0).setUnit("bps").build()};function ou(){const e=new Se({from:"now-6h",to:"now"}),t=new la({name:"deliveryservice",datasource:s.DELIVERYSERVICE_STATS,query:'SHOW TAG VALUES ON "deliveryservice_stats" FROM "monthly"."kbps" with key = "deliveryservice"'});return new To({$timeRange:e,$variables:new vn({variables:[t]}),body:new js({direction:"column",children:[new Ts({minHeight:300,body:ru()}),new Ts({minHeight:300,body:nu()}),new Ts({minHeight:300,body:au()})]}),controls:[new fn({}),new Rs,new gs({isOnCanvas:!0}),new Ds({intervals:["5s","1m","1h"],isOnCanvas:!0})]})}const iu=()=>{const e=(0,t.useMemo)((()=>new Ks({pages:[new pl({title:"Delivery Services",url:l(`${i.DeliveryService}`),hideFromBreadcrumbs:!0,getScene:ou})]})),[]);return r().createElement(e.Component,{model:e})},su=()=>{const e=new Kr({datasource:s.CACHE_STATS,queries:[{refId:"A",query:'SELECT sum(value) FROM "monthly"."bandwidth.1min" WHERE "cachegroup" = \'$cachegroup\' AND $timeFilter GROUP BY time(60s), cachegroup',rawQuery:!0,resultFormat:"time_series",alias:"$tag_cachegroup"}]});return Wl().setTitle("Total bandwidth (stacked)").setData(e).setCustomFieldConfig("fillOpacity",20).setOption("legend",{showLegend:!0,calcs:["max"]}).setUnit("Kbits").build()},lu=()=>{const e=new Kr({datasource:s.CACHE_STATS,queries:[{refId:"A",query:'SELECT mean("value") FROM "monthly"."connections.1min" WHERE ("cachegroup" = \'$cachegroup\') AND $timeFilter GROUP BY time($interval), "hostname" fill(null)',rawQuery:!0,resultFormat:"time_series"}]});return Wl().setTitle("Connections (stacked)").setCustomFieldConfig("fillOpacity",20).setData(e).setOption("legend",{showLegend:!0,calcs:["max"]}).setCustomFieldConfig("spanNulls",!0).build()};function uu(){const e=new Se({from:"now-6h",to:"now"}),t=new la({name:"cachegroup",datasource:s.CACHE_STATS,query:'SHOW TAG VALUES ON "cache_stats" FROM "monthly"."bandwidth" with key = "cachegroup"'});return new To({$timeRange:e,$variables:new vn({variables:[t]}),body:new js({direction:"column",children:[new Ts({minHeight:300,body:su()}),new Ts({minHeight:300,body:lu()})]}),controls:[new fn({}),new Rs,new gs({isOnCanvas:!0}),new Ds({intervals:["5s","1m","1h"],isOnCanvas:!0})]})}const cu=()=>{const e=(0,t.useMemo)((()=>new Ks({pages:[new pl({title:"Cache Groups",url:l(`${i.CacheGroup}`),hideFromBreadcrumbs:!0,getScene:uu})]})),[]);return r().createElement(e.Component,{model:e})},du=()=>r().createElement(a.Switch,null,r().createElement(a.Route,{path:l(`${i.CacheGroup}`),component:cu}),r().createElement(a.Route,{path:l(`${i.DeliveryService}`),component:iu}),r().createElement(a.Route,{path:l(`${i.Server}`),component:tu}),r().createElement(a.Redirect,{to:l(i.CacheGroup)}));class pu extends r().PureComponent{render(){return r().createElement(n.Provider,{value:this.props},r().createElement(du,null))}}const hu=(new e.AppPlugin).setRootPage(pu)})(),p})()));
//# sourceMappingURL=module.js.map